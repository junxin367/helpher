{"version":3,"sources":["assets\\Game\\Scripts\\Chain.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport Game from \"./Game\";\nimport ccUtil from \"../../framework/utils/ccUtil\";\nimport { PlayerInfo } from \"./Common/Base/PlayerInfo\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Chain extends cc.Component {\n\n    @property(cc.Node)\n    tielian: cc.Node = null;\n\n    @property(cc.Node)\n    chain_item: cc.Node = null;\n\n    @property(cc.Node)\n    handler: cc.Node = null;\n\n    @property(Number)\n    currentLen:number = 0;\n\n    @property(Number)\n    maxLen:number = 0;\n\n    isMove: boolean = true\n\n    collider: cc.PhysicsBoxCollider;\n\n    onLoad () {\n        this.handler.on(cc.Node.EventType.TOUCH_START, this.click, this);\n        this.handler.on(cc.Node.EventType.TOUCH_MOVE, this.click_move, this);\n        this.handler.on(cc.Node.EventType.TOUCH_END, this.over, this);\n        this.handler.on(cc.Node.EventType.TOUCH_CANCEL, this.over, this);\n        // this.schedule(this.creatChain,0)\n        this.showCurrent();\n    }\n\n    start () {\n        if(!PlayerInfo.isPlayingDaily)return;\n        let sp = this.getComponent(cc.Sprite);\n        ccUtil.setDisplay(sp,\"/Img/chain/yuan_2\")\n    }\n\n    showCurrent(){\n        // if(this.tielian.height < this.currentLen+35){\n\n        //     this.unschedule(this.showCurrent);\n        //     return;\n        // }\n        // this.up();\n        let sub = this.currentLen -  this.tielian.height;\n        this.tielian.height  = this.currentLen\n        this.tielian.y -= sub;\n\n        this.collider = this.tielian.getComponent(cc.PhysicsBoxCollider);\n\n            this.collider.offset = cc.v2(0,this.maxLen/2);\n            this.collider.size.height = this.maxLen;\n            this.tielian.getComponent(cc.RigidBody).syncPosition(true);\n    \n  \n    }\n\n    // creatChain(){\n    //     let node = cc.instantiate(this.chain_item);\n    //     this.tielian.insertChild(node,0);\n    //     if(this.tielian.height >= this.maxLen){\n    //         this.unschedule(this.creatChain);\n    //         if(this.currentLen == this.maxLen)return;\n    //         this.schedule(this.showCurrent,0)\n    //         return;\n    //     }\n    // }\n\n    click(){\n        this.isMove = true;\n     \n    }\n\n    click_move(e){\n        var delta = e.touch.getDelta();\n        // if(delta.y > 4){\n        //     this.up()\n         \n        // }else if(delta.y < -4){\n        //     this.down()\n        // }\n        if(this.tielian.height -delta.y <= 0 || this.tielian.height -delta.y >= this.maxLen){\n            return;\n        }\n        \n        this.tielian.height -= delta.y\n        this.tielian.y += delta.y;\n        // this.collider.offset = cc.v2(0,this.tielian.height/2);\n        // this.collider.size.height = this.tielian.height;\n        // this.tielian.getComponent(cc.RigidBody).syncPosition(true);\n    }\n\n    over(){\n\n    }\n}\n"]}