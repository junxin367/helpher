{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIRank.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport mvcView from \"../../../framework/ui/mvcView\";\nimport wxRankList from \"./wxRankList\";\nimport ccUtil from \"../../../framework/utils/ccUtil\";\nimport UIFunctions from \"../../../framework/ui/UIFunctions\";\nimport { UserInfo } from \"../../../framework/extension/weak_net_game/UserInfo\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\nimport Net from \"../../../framework/misc/Net\";\nimport { SettingInfo } from \"../../../framework/extension/weak_net_game/SettingInfo\";\nimport Device from \"../../../framework/misc/Device\";\nimport Platform from \"../../../framework/extension/Platform\";\n\nconst { ccclass, property } = cc._decorator;\n\nexport interface RankItem {\n    userId: string,\n    nickName: string,\n    avatarUrl: string,\n    gender: number,\n    highScore: number,\n    level: number,\n    openId: string,\n    _id: string,\n    challengelevel: number,\n}\n\n@ccclass\nexport default class UIRank extends mvcView {\n\n    @property(cc.Layout)\n    layout: cc.Layout = null;\n\n    @property(cc.ToggleContainer)\n    radioGroup: cc.ToggleContainer = null;\n\n    @property(cc.ToggleContainer)\n    modelGroup: cc.ToggleContainer = null;\n\n    @property(cc.Node)\n    node_worldRank: cc.Node = null;\n\n    @property(cc.Node)\n    subContext: cc.Node = null;\n\n    static rankUrl = \"\";\n    myRank: RankItem = {} as RankItem;\n    ranklist: RankItem[];\n    lvRank: number = 0;\n    isPlayingDaily: boolean = false;\n    onLoad() {\n        this.register(this.layout, _ => this.ranklist, this.itemAtIndex.bind(this));\n        this.register(\"panel/my/head\", _ => UserInfo.avatarUrl ? UserInfo.avatarUrl : \"Img/rank/moren\");\n        this.register(\"panel/my/rankIcon\", _ => this.lvRank == 0 ? \"Img/rank/moren\" : \"Img/rank/\" + (this.lvRank));\n        this.register(\"panel/my/score\", _ => ((this.isPlayingDaily ? PlayerInfo.dailylevel : PlayerInfo.level) || 0) + \"关\");\n        this.register(\"panel/my/name\", _ => (UserInfo.nickName ? (UserInfo.nickName.length <= 10 ? UserInfo.nickName : UserInfo.nickName.substr(0, 10)) : \"自已\"));\n        this.register(\"panel/my/rank\", _ => this.lvRank == 0 ? \"未上榜\" : (this.lvRank));\n        this.onVisible(\"panel/my/rankIcon\", _ => this.lvRank < 4 && this.lvRank != 0);\n        this.onVisible(\"panel/my/rank\", _ => this.lvRank > 3 || this.lvRank == 0);\n\n    }\n\n    start() {\n\n    }\n\n    onShow() {\n        let model = this.modelGroup.toggleItems.find(v => v.isChecked)\n        if (UIFunctions.getToggleIndex(model) == 0) {\n            this.isPlayingDaily = false\n        } else {\n            this.isPlayingDaily = true\n        }\n        let toggle = this.radioGroup.toggleItems.find(v => v.isChecked)\n        if (UIFunctions.getToggleIndex(toggle) == 0) {\n            this.click_friend()\n        } else {\n            this.click_world();\n        }\n    }\n\n    click_close() {\n\n        wxRankList.instance.onClose();\n        vm.hide(this);\n    }\n\n    click_friend() {\n\n        // this.node_worldRank.active = false;\n        this.node_worldRank.active = false;\n        if (this.isPlayingDaily) {\n            wxRankList.instance.loadChallengLevelOpenRank();\n        }\n        else {\n            wxRankList.instance.loadLevelOpenRank();\n        }\n        this.subContext.active = true;\n    }\n\n    click_world() {\n        wxRankList.instance.onClose();\n        this.click_world_wx();\n    }\n\n\n    /**\n     *  //微信 按钮回调\n     * @param userInfo 微信获取到的用户信息，\n     * @param isNew 弹框返回 true 表示授权 ， 其它 表示已授权过\n     */\n    async click_world_wx(userInfo?, isNew?) {\n        if (isNew) {\n            UIFunctions.selectToggleIndex(this.radioGroup.node, 1);\n        }\n        this.node_worldRank.active = true\n        if (userInfo) {\n            await UserInfo.openRankAndUpload({ level: PlayerInfo.level, challengelevel: PlayerInfo.dailylevel }, userInfo);\n        }\n        if (!this.ranklist)\n            this.requestRank();\n        this.render();\n        this.subContext.active = false;\n    }\n\n\n    requestRank() {\n        let params = {\n            orderBy: this.isPlayingDaily ? \"challengelevel\" : \"level\",\n            page: 1,\n            row: 20\n        }\n        WeakNetGame.client.httpGet(UIRank.rankUrl, params).then(v => {\n            if (v == Net.Code.Timeout) {\n                // Toast.make(\"请求超时\")\n            } else {\n                if (v) {\n                    console.log(v)\n                    let ret = JSON.parse(v);\n                    let data = ret.data\n                    if (data) {\n                        this.ranklist = data.list as RankItem[];\n                        for (let i = 0; i < data.list.length; i++) {\n                            if (data.list[i].avatarUrl == UserInfo.avatarUrl) {\n                                this.myRank = data.list[i];\n                                this.lvRank = i;\n                            }\n                        }\n                        this.checkUserRank();\n                        // 60 s 后清除缓存 \n                        this.scheduleOnce(_ => this.ranklist = null, 60);\n                        console.log(data);\n                        // this.status = this.Rank_Loaded\n                        if (data) {\n                            this.render();\n                        }\n                    } else {\n                        // this.status = this.Rank_load_Error\n                        // this.render();\n                        // Toast.make(\"加载失败！\")\n                    }\n                }\n            }\n        })\n    }\n\n    itemAtIndex(node: cc.Node, data: RankItem, i) {\n        let nickname = data.nickName || data._id || \"未授权玩家\";\n        var nick = nickname.length <= 5 ? nickname : nickname.substr(0, 10);\n        let head = ccUtil.find(\"head\", node, cc.Sprite);\n        let nickLabel = ccUtil.find(\"name\", node, cc.Label);\n        let rankLabel = ccUtil.find(\"rank\", node, cc.Label);\n        let scoreLabel = ccUtil.find(\"score\", node, cc.Label);\n        let rankIcon = ccUtil.find(\"rankIcon\", node, cc.Sprite);\n\n\n        rankIcon.node.active = false;\n        rankLabel.node.active = false;\n        if (i < 3) {\n            ccUtil.setDisplay(rankIcon, \"Img/rank/\" + (i + 1));\n            rankIcon.node.active = true\n        }\n        else {\n            rankLabel.string = i + 1;\n            rankLabel.node.active = true;\n        }\n\n        if (data.avatarUrl) {\n            ccUtil.setDisplay(head, data.avatarUrl);\n        } else {\n            ccUtil.setDisplay(head, \"Img/rank/moren\");\n        }\n        nickLabel.string = nick;\n        scoreLabel.string = (this.isPlayingDaily ? data.challengelevel : data.level || 0) + \"关\";\n    }\n\n    checkUserRank() {\n        for (let key in this.ranklist) {\n            if (this.ranklist[key].openId == PlayerInfo.openId) {\n                this.lvRank = parseInt(key) + 1;\n                return;\n            }\n            else {\n                this.lvRank = 0;\n            }\n        }\n    }\n    click_share(v) {\n        Device.playSfx(\"button\")\n        Platform.share();\n    }\n\n    click_challenge() {\n        this.isPlayingDaily = true;\n        let toggle = this.radioGroup.toggleItems.find(v => v.isChecked)\n        if (UIFunctions.getToggleIndex(toggle) == 0) {\n            this.click_friend()\n        } else {\n            this.ranklist = null;\n            this.click_world();\n        }\n    }\n\n    click_normal() {\n        this.isPlayingDaily = false;\n        let toggle = this.radioGroup.toggleItems.find(v => v.isChecked)\n        if (UIFunctions.getToggleIndex(toggle) == 0) {\n            this.click_friend()\n        } else {\n            this.ranklist = null;\n            this.click_world();\n        }\n    }\n    // update (dt) {}\n}\n"]}