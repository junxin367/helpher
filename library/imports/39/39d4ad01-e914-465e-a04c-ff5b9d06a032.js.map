{"version":3,"sources":["assets\\framework\\extension\\wxsdk\\sdk.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { evt } from \"../../core/event\";\r\nimport { GameConfig } from \"./GameConfigs\";\r\n\r\nimport Net from \"../../misc/Net\";\r\nimport { Toast } from \"../../ui/ToastManager\";\r\nimport Signal from \"../../core/Signal\";\r\n\r\nclass Global {\r\n    static videoAd = undefined\r\n    static bannerAd = undefined\r\n    static interstitialAd = undefined\r\n    static isBannerShow = false;\r\n    static videoAdLoadCount = 0 //视频广告加载次数\r\n    static bannerAdLoadCount = 0 //banner广告加载次数\r\n    static video_close_callback: (ret: any) => void;\r\n    static video_error_callback: () => void;\r\n    static video_load_callback: () => void;\r\n}\r\n\r\n\r\ninterface SystemInfo {\r\n    SDKVersion: string,\r\n    batteryLevel: number,\r\n    benchmarkLevel: number,\r\n    brand: string,\r\n    devicePixelRatio: number\r\n    fontSizeSetting: number,\r\n    language: string,\r\n    model: string,//\"iPhone 6/7/8 Plus\"\r\n    pixelRatio: number\r\n    platform: string;//\"devtools\"\r\n    safeArea: any;//{ right, bottom, left, top, width }\r\n    screenHeight: number;\r\n    screenWidth: number;\r\n    statusBarHeight: number;\r\n    system: string;//\"iOS 10.0.1\"\r\n    version: string;//\"7.0.4\"\r\n    windowHeight: number\r\n    windowWidth: number;\r\n}\r\n\r\nexport interface ShareInfo {\r\n    title: string,\r\n    imageUrl: string,\r\n    query?: string,\r\n    ald_desc?: string\r\n\r\n    id?: string,\r\n    queryObjects: Object\r\n}\r\n\r\nclass WxSdk {\r\n    _userInfo: any = null;\r\n    _loginCode: any;\r\n    _openId: string = \"\";\r\n\r\n    _db: any;\r\n    _version: number;\r\n    _systemInfo: any;\r\n\r\n    public get Ver(): number { return this._version; }\r\n\r\n    public get userInfo() { return this._userInfo }\r\n\r\n    public get parent() {\r\n        if (!CC_WECHATGAME) return \"\"\r\n        let info = wx.getLaunchOptionsSync();\r\n        if (info.scene == 1007 || info.scene == 1008) {//通过分享进入游戏\r\n            let openId = info.query[\"user_id\"];\r\n            return openId\r\n        }\r\n        return \"\"; //默认\r\n    }\r\n\r\n    public set openId(v) {\r\n        this._openId = v\r\n    }\r\n\r\n    public get openId() {\r\n        return this._openId\r\n    }\r\n\r\n\r\n    constructor() {\r\n        if (CC_WECHATGAME) {\r\n            if (this._version == null) {\r\n                this._systemInfo = wx.getSystemInfoSync();\r\n                let ver = this._systemInfo.SDKVersion.replace(/\\./g, \"\")\r\n                this._version = parseInt(ver);\r\n            }\r\n        }\r\n    }\r\n\r\n    requestDB(tbname, callback, target) {\r\n        this._db.collection(tbname).get({\r\n            success: function (res) {\r\n                console.log(\"get \" + tbname + \" succ:\", res.data)\r\n                // self._shareConfig = res.data;\r\n                if (callback) callback.call(target, res.data);\r\n            }, fail: (res) => {\r\n                console.log(\"get \" + tbname + \" fail:\")\r\n                if (callback) callback.call(target)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    requestConfig(callback) {\r\n        this._db.collection(\"t_conf\").get({\r\n            success: function (res) {\r\n                console.log(\"get configs succ:\", res.data)\r\n                // self._shareConfig = res.data;\r\n                if (callback) callback(res.data);\r\n            }, fail: (res) => {\r\n                console.log(\"get configs fail:\", res)\r\n                if (callback) callback(null)\r\n            }\r\n        });\r\n    }\r\n\r\n    compareVersion(v1, v2) {\r\n        v1 = v1.split('.')\r\n        v2 = v2.split('.')\r\n        const len = Math.max(v1.length, v2.length)\r\n\r\n        while (v1.length < len) {\r\n            v1.push('0')\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0')\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i])\r\n            const num2 = parseInt(v2[i])\r\n\r\n            if (num1 > num2) {\r\n                return 1\r\n            } else if (num1 < num2) {\r\n                return -1\r\n            }\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开分享\r\n     * @param share_cfg {ShareInfo}\r\n     */\r\n    async openShare(share_cfg: ShareInfo, params?) {\r\n        if (!g.iswxgame()) return;\r\n        let info = {} as ShareInfo;\r\n        console.log(\"sdsdsd\",info,info.title);\r\n\r\n        info.title = share_cfg.title;\r\n        info.imageUrl = share_cfg.imageUrl;\r\n        let querys: any = info.queryObjects || {};\r\n        if (info != null) {\r\n            let querystr = \"\"\r\n            params = params || {}\r\n            Object.keys(params).forEach(k1 => {\r\n                querys[k1] = params[k1]\r\n            })\r\n            querystr = Object.keys(querys).reduce((sum, k) => {\r\n                let v = querys[k]\r\n                return sum + `${k}=${v}&`\r\n            }, querystr)\r\n            info.query = querystr + \"time=\" + new Date().getTime()\r\n            info.ald_desc = share_cfg.ald_desc\r\n            console.log(\"open Share\", info)\r\n            wx.aldShareAppMessage(info);\r\n        }\r\n    }\r\n\r\n    private createButton(callback, x?, y?, width?, height?) {\r\n        console.log(\"-------------createButton\");\r\n        let button = wx.createUserInfoButton({\r\n            type: \"text\",\r\n            text: \"     \",\r\n            style: {\r\n                x: x || 0, y: y || 0,\r\n                width: width || cc.winSize.width,\r\n                height: height || cc.winSize.height,\r\n                lineHeight: 40,\r\n                backgroundColor: '#00000000',\r\n                color: '#ffffff'\r\n            }\r\n        });\r\n        button.onTap(function (res) {\r\n            button.destroy();\r\n            if (res && res) {\r\n                if (callback) callback(res);\r\n            } else if (callback) callback(null);\r\n        });\r\n    }\r\n\r\n\r\n    private getUserInfo(callback) {\r\n        console.warn(\"-------------getUserInfo\");\r\n        wx.getUserInfo({\r\n            withCredentials: true,\r\n            lang: \"zh_CN\",\r\n            success: (res) => {\r\n                console.log(\"getUserInfo success.\", res);\r\n                if (callback) callback(res);\r\n            }, fail: (res) => {\r\n                console.log(\"getUserInfo:\", res);\r\n                if (callback) callback(null);\r\n            },\r\n            complete: null\r\n        });\r\n    }\r\n\r\n    oldAuthUser(callback) {\r\n        wx.authorize({\r\n            scope: \"scope.userInfo\",\r\n            success: (res) => {\r\n                console.log(res);\r\n                if (callback) callback(true);\r\n            }, fail: (res) => {\r\n                console.log(res);\r\n                if (callback) callback(false);\r\n            }, complete: null\r\n        });\r\n    }\r\n\r\n\r\n    public showShareMenu(cf: ShareInfo) {\r\n        let self = this;\r\n        wx.showShareMenu({\r\n            withShareTicket: true,\r\n            success: (res) => {\r\n                console.log(res);\r\n            }, fail: (res) => {\r\n                console.log(res);\r\n            }, complete: null\r\n        });\r\n        wx.aldOnShareAppMessage(function () {\r\n            // let content =  {title:GameConfig.default_share_title,imageUrl:cc.url.raw(GameConfig.deafult_share_imgUrl)}\r\n            return cf;\r\n        });\r\n    }\r\n\r\n\r\n    private wxLogin(callback) {\r\n        wx.login({\r\n            success: (res) => {\r\n                console.log(\"code \", res.code);\r\n                this._loginCode = res.code;\r\n                evt.emit(\"wxlogin\", res.code);\r\n                if (callback) callback(true);\r\n            }, fail: (res) => {\r\n                if (callback) callback(false);\r\n            }, complete: null\r\n        });\r\n    }\r\n\r\n    public startAuth() {\r\n        let self = this;\r\n        return new Promise((resolve, reject) => {\r\n            if (self._version >= 220) {\r\n                self.createButton((ret) => {\r\n                    self.loginToServer(ret);\r\n                    if (ret)\r\n                        resolve(this._userInfo)\r\n                    else\r\n                        reject();\r\n                });\r\n            } else {\r\n                self.oldAuthUser((isAuth) => {\r\n                    if (isAuth) {\r\n                        self.getUserInfo((ret) => {\r\n                            self.loginToServer(ret);\r\n                            resolve(this._userInfo)\r\n                        });\r\n                    } else {\r\n                        reject();\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    public checkAuth() {\r\n        if (wxsdk.userInfo) {\r\n            return Promise.resolve(wxsdk.userInfo);\r\n        } else {\r\n            return new Promise((resolve, reject) => {\r\n                wx.getSetting({\r\n                    success: (res) => {\r\n                        let auth = res.authSetting;\r\n                        if (auth[\"scope.userInfo\"]) {\r\n                            this.getUserInfo((ret) => {\r\n                                this.loginToServer(ret);\r\n                                resolve(this._userInfo)\r\n                            })\r\n                        } else {\r\n                            // return this.startAuth();\r\n                            resolve(null);\r\n                        }\r\n                    }, fail: null,\r\n                    complete: null,\r\n                });\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private loginToServer(ret) {\r\n        if (ret && ret.userInfo) {\r\n            this._userInfo = ret.userInfo\r\n        }\r\n        evt.emit(\"wxUserInfo\", this._userInfo, this._loginCode);\r\n    }\r\n\r\n    public login(p) {\r\n        if (!CC_WECHATGAME) return\r\n        let self = this;\r\n        //wx.cloud.init({traceUser: true});\r\n        // this._db = wx.cloud.database({env: \"release-2c87c4\"});//测试环境\r\n        //this._db = wx.cloud.database();\r\n        self.wxLogin(isLogin => {\r\n            if (!isLogin) return;\r\n            if (p) {\r\n                this.startAuth();\r\n            }\r\n        })\r\n    }\r\n\r\n    //发送消息到子域\r\n    public postMessage(cmd, data?) {\r\n        if (CC_WECHATGAME) {\r\n            let req = { cmd }\r\n            if (data) {\r\n                Object.keys(data).forEach(k => {\r\n                    req[k] = data[k]\r\n                })\r\n            }\r\n            wx.getOpenDataContext().postMessage(req);\r\n        }\r\n    }\r\n\r\n    public uploadScores(kvs) {\r\n        return new Promise((resolve, reject) => {\r\n            let obj = {\r\n                KVDataList: kvs,\r\n                success: function (d) {\r\n                    resolve(d)\r\n                },\r\n                fail: function () {\r\n                    reject();\r\n                },\r\n                complete: function () { },\r\n            }\r\n            console.warn(\"-------uploadScores\", kvs);\r\n            wx.setUserCloudStorage(obj)\r\n        })\r\n    }\r\n\r\n    public uploadScore(k, v, callback?) {\r\n        var kvDataList = new Array();\r\n        kvDataList.push({\r\n            key: k,\r\n            value: v\r\n        });\r\n\r\n        let obj = {\r\n            KVDataList: kvDataList,\r\n            success: function (d) {\r\n                if (callback) callback(d)\r\n            },\r\n            fail: function () { },\r\n            complete: function () { },\r\n        }\r\n        wx.setUserCloudStorage(obj)\r\n        // \"wxgame\": {\r\n        //     \"score\": 16,\r\n        //     \"update_time\": 1513080573\r\n        // },\r\n        // \"cost_ms\": 36500\r\n    }\r\n\r\n    public loadBannerAd(callback?) {\r\n        if (Global.bannerAd) {\r\n            Global.bannerAd.destroy()\r\n        }\r\n        if (!this._systemInfo)\r\n            this._systemInfo = wx.getSystemInfoSync();\r\n        var w = this._systemInfo.screenWidth / 2;\r\n        var h = this._systemInfo.screenHeight;\r\n\r\n        let isPor = this._systemInfo.screenWidth <= this._systemInfo.screenHeight;\r\n        let fixWidth = isPor ? this._systemInfo.screenWidth : (this._systemInfo.screenHeight / 3);\r\n        let modelStr = this._systemInfo.model\r\n        let isIOS = false;\r\n        if (modelStr) {\r\n            if (modelStr.indexOf(\"iPhone\") != -1) {\r\n                isIOS = true;\r\n            }\r\n        }\r\n        let bannerAd = wx.createBannerAd({\r\n            adUnitId: GameConfig.banner_ad_id,\r\n            style: {\r\n                left: 0,\r\n                top: 0,//cc.visibleRect.height\r\n                width: fixWidth\r\n            }\r\n        })\r\n        Global.bannerAd = bannerAd;\r\n\r\n        bannerAd.onLoad(() => {\r\n            Global.bannerAdLoadCount = 0;\r\n            bannerAd.style.left = w - bannerAd.style.realWidth / 2;\r\n            if (isIOS) {\r\n                bannerAd.style.top = h - bannerAd.style.realHeight - 13;\r\n            } else {\r\n                bannerAd.style.top = h - bannerAd.style.realHeight;\r\n            }\r\n            if (callback) callback(\"load\", bannerAd)\r\n        })\r\n        bannerAd.onError((err) => {\r\n            //加载失败\r\n            console.log(\"wxsdk bannerAd onError code:\" + err.code + \" msg:\" + err.msg);\r\n            Global.bannerAdLoadCount += 1;\r\n            if (Global.bannerAdLoadCount < 4) {\r\n                this.loadBannerAd(callback);\r\n            }\r\n            Global.bannerAd = null;\r\n            if (callback) callback(\"error\")\r\n        });\r\n    }\r\n\r\n    public showBannerAd(errorCallback?): any {\r\n        console.log(\"Wxsdk 显示banner广告\", Global.bannerAd)\r\n        if (Global.bannerAd) {\r\n            Global.bannerAd.show();\r\n            Global.isBannerShow = true\r\n            evt.emit(\"wxsdk.BannerReady\")\r\n        } else {\r\n            console.log(\"Wxsdk 不存在banner资源....\");\r\n            this.loadBannerAd((v, ad) => {\r\n                if (v == \"load\") {\r\n                    this.showBannerAd()\r\n                } else if (v == 'error') {\r\n                    errorCallback && errorCallback();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    isBannerShow() {\r\n        return Global.isBannerShow;\r\n    }\r\n\r\n    hideBannerAd() {\r\n        if (Global.bannerAd) {\r\n            Global.bannerAd.hide();\r\n            Global.isBannerShow = false;\r\n            // Global.bannerAd = null;\r\n        }\r\n    }\r\n\r\n    //interstitial\r\n    showInterstitial(errorCallback) {\r\n        // 创建插屏广告实例，提前初始化\r\n        if (wx.createInterstitialAd) {\r\n            Global.interstitialAd = wx.createInterstitialAd({\r\n                adUnitId: GameConfig.interstitial_ad_id\r\n            })\r\n        }\r\n        else {\r\n            console.log(\"不支持插屏广告\")\r\n            errorCallback && errorCallback('notsupport')\r\n        }\r\n        // 在适合的场景显示插屏广告\r\n        if (Global.interstitialAd) {\r\n            Global.interstitialAd.show().catch((err) => {\r\n                console.error(err)\r\n                errorCallback && errorCallback(\"err\", err);\r\n            })\r\n            return new Promise(v => {\r\n                Global.interstitialAd.onClose((res) => {\r\n                    v();\r\n                })\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    loadVideoAd(callback) {\r\n        console.log(\"============wxsdk.loadVideoAD\");\r\n        // if (!Global.videoAd ) { //如果没有广告资源就加载新的视频广告\r\n        let self = this;\r\n        let videoAd = Global.videoAd;\r\n        if (!videoAd) {\r\n            videoAd = wx.createRewardedVideoAd({\r\n                adUnitId: GameConfig.video_ad_id\r\n            })\r\n        } else {\r\n            videoAd.offClose(Global.video_close_callback);\r\n            videoAd.offError(Global.video_error_callback);\r\n            videoAd.offLoad(Global.video_load_callback);\r\n        }\r\n        Global.video_error_callback = function () {\r\n            //加载失败\r\n            Global.videoAdLoadCount += 1;\r\n            //尝试4次\r\n            if (Global.videoAdLoadCount < 1) {\r\n                self.loadVideoAd(callback);\r\n            } else {\r\n                if (callback) callback(\"error\")\r\n            }\r\n        }\r\n\r\n        Global.video_close_callback = function (ret) {\r\n            //播放结束\r\n            console.log(\"wxsdk onClose...\");\r\n            Global.videoAdLoadCount = 0\r\n            if (callback) callback(\"close\", ret.isEnded)\r\n            Global.videoAd = null;\r\n        }\r\n\r\n        Global.video_load_callback = function () {\r\n            //加载成功\r\n            console.log(\"wxsdk onLoad\");\r\n            Global.videoAd = videoAd;\r\n            Global.videoAdLoadCount = 0;\r\n            // this.showBannerAd();\r\n            if (callback) callback(\"load\", videoAd)\r\n        }\r\n        // 用户触发广告后，显示激励视频广告\r\n        videoAd.show().catch(() => {\r\n            // this.hideBannerAd();\r\n            videoAd.load().then(() => {\r\n                videoAd.show();\r\n                if (callback) callback(\"show\")\r\n            }).catch(err => {\r\n                Global.videoAdLoadCount += 1;\r\n            });\r\n        })\r\n        videoAd.onError(Global.video_error_callback);\r\n        videoAd.onClose(Global.video_close_callback);\r\n        videoAd.onLoad(Global.video_load_callback);\r\n        Global.videoAd = videoAd\r\n    }\r\n\r\n    /**\r\n     一次性模板 id 和永久模板 id 不可同时使用。\r\n    低版本基础库2.4.4~2.8.3 已支持订阅消息接口调用，仅支持传入一个一次性 tmplId / 永久 tmplId。\r\n    2.8.2 版本开始，用户发生点击行为或者发起支付回调后，才可以调起订阅消息界面。\r\n    2.10.0 版本开始，开发版和体验版小游戏将禁止使用模板消息 fomrId。*/\r\n    requestSubscribeMessage() {\r\n        // if (!g.iswxgame()) return;\r\n        const version = wx.getSystemInfoSync().SDKVersion\r\n        if (CC_DEBUG || wxsdk.compareVersion(version, '2.8.4') > 0) {\r\n            return new Promise((resolve, reject) => {\r\n                wx.requestSubscribeMessage({\r\n                    tmplIds: GameConfig.tmplIds,\r\n                    success(res) {\r\n                        console.log(res)\r\n                        let ids = [];\r\n                        GameConfig.tmplIds.map((item, index) => {\r\n                            if (res[item] == \"accept\") {\r\n                                ids.push(item);\r\n                            }\r\n                        })\r\n                        resolve(ids);\r\n                    },\r\n                    fail(err) {\r\n                        wx.showModal({\r\n                            title: '失败提示',\r\n                            content: \"错误信息：\" + err.errMsg + \"错误码：\" + err.errCode\r\n                        })\r\n                        reject(err.errCode)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        else {\r\n            // 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示\r\n            wx.showModal({\r\n                title: '提示',\r\n                content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n            })\r\n        }\r\n    }\r\n\r\n    //客服\r\n    openCustomerServiceConversation(callback, failCallback) {\r\n        if (CC_DEBUG) {\r\n            callback && callback();\r\n            return;\r\n        }\r\n        // if (!g.iswxgame()) return;\r\n        const version = wx.getSystemInfoSync().SDKVersion\r\n        if (wxsdk.compareVersion(version, '2.0.3') > 0) {\r\n            wx.openCustomerServiceConversation({\r\n                showMessageCard: true,\r\n                sendMessageTitle: \"帮她脱险\",\r\n                sendMessageImg: \"https://www.mimgame.com/games/helpher/share/customer-claim.png\",\r\n                success: function (data) {\r\n                    console.log(\"success =\", data)\r\n                    callback && callback();\r\n                },\r\n\r\n                fail: function (data) {\r\n                    console.log(\"fail =\", data)\r\n                    failCallback && failCallback();\r\n                },\r\n\r\n                complete: function (data) {\r\n                    console.log(\"complete =\", data)\r\n                }\r\n            })\r\n        } else {\r\n            // 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示\r\n            wx.showModal({\r\n                title: '提示',\r\n                content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /** -----播放视频  开始------ */\r\n    private desurl = ''\r\n    /** 普清 */\r\n    showVideo(avid, url) {\r\n        console.log('showVideo ===>')\r\n        this.desurl = url\r\n        var self = this\r\n        let start_url = `https://vv.video.qq.com/getinfo?vids=${avid}&platform=101001&charge=0&otype=json&defn=shd`\r\n        console.log('start_url  ', start_url)\r\n        return new Promise((resolve => {\r\n\r\n            window['wx'].request({\r\n                url: start_url,\r\n                success: function (res) {\r\n                    var dataJson = res.data.replace(/QZOutputJson=/, '') + \"qwe\";\r\n                    var dataJson1 = dataJson.replace(/;qwe/, '');\r\n                    var data = JSON.parse(dataJson1);\r\n                    console.log('data  ', data)\r\n                    if (data['em']) {\r\n                        console.log('getVideoInfoB error  ===========>> !!!!!  em', data['em'])\r\n                        return self.goSafeVideo(self.desurl)\r\n                    }\r\n                    else {\r\n                        let theurl = data['vl']['vi'][0]['ul']['ui'][0]['url']\r\n                            + data['vl']['vi'][0]['fn']\r\n                            + \"?vkey=\"\r\n                            + data['vl']['vi'][0]['fvkey']\r\n                        console.log('theurl   ', theurl)\r\n                        return self.goFreeVideo(theurl)\r\n                    }\r\n                },\r\n                fail: function () {\r\n                    console.log('getVideoInfoB error  ===========>> !!!!!')\r\n                    return self.goSafeVideo(self.desurl)\r\n                }\r\n            })\r\n        }))\r\n    }\r\n\r\n    /** 高清 */\r\n    showVideoG(avid, url?: string): Promise<any> {\r\n        console.log('showVideo ===>')\r\n        if (url)\r\n            this.desurl = url.toString()\r\n        var self = this\r\n        let start_url = `https://vv.video.qq.com/getinfo?vids=${avid}&platform=101001&charge=0&otype=json&defn=shd`\r\n        console.log('start_url  ', start_url)\r\n        let signal = new Signal();\r\n        window['wx'].request({\r\n            url: start_url,\r\n            success: function (res) {\r\n                var dataJson = res.data.replace(/QZOutputJson=/, '') + \"qwe\";\r\n                var dataJson1 = dataJson.replace(/;qwe/, '');\r\n                var data = JSON.parse(dataJson1);\r\n                console.log('data  ', data)\r\n                if (data['em']) {\r\n                    console.log('getVideoInfoB error  ===========>> !!!!!  em', data['em'])\r\n                    self.goSafeVideo(self.desurl).then(v => signal.fire()).catch(v => signal.cancel())\r\n                    // signal.cancel();\r\n                }\r\n                else {\r\n                    let gUrl = `https://vv.video.qq.com/getkey?format=2&otype=json&vt=150&vid=${avid}&ran=0\\%2E9477521511726081\\\\&charge=0&filename=${avid}.mp4&platform=11`\r\n                    window['wx'].request({\r\n                        url: gUrl,\r\n                        success: function (res1) {\r\n                            var dataJson2 = res1.data.replace(/QZOutputJson=/, '') + \"qwe\";\r\n                            var dataJson3 = dataJson2.replace(/;qwe/, '');\r\n                            var data1 = JSON.parse(dataJson3);\r\n                            console.log('data1   ', data1)\r\n                            let theurl = data['vl']['vi'][0]['ul']['ui'][0]['url']\r\n                                + `${avid}.mp4`\r\n                                + \"?vkey=\"\r\n                                + data1['key']\r\n\r\n                            console.log('theurl   ', theurl)\r\n                            self.goFreeVideo(theurl).then(v => signal.fire()).catch(v => signal.cancel())\r\n                        },\r\n                        fail: function () {\r\n                            console.log('getkey error  ===========>> !!!!!')\r\n                            self.goSafeVideo(self.desurl).then(v => signal.fire()).catch(v => signal.cancel())\r\n                            // signal.cancel()\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            fail: function () {\r\n                console.log('getVideoInfoB error  ===========>> !!!!!')\r\n                // signal.cancel()\r\n                self.goSafeVideo(self.desurl).then(v => signal.fire()).catch(v => signal.cancel())\r\n            }\r\n        })\r\n        return signal.wait();\r\n    }\r\n\r\n    //oss  地址\r\n\r\n    /** oss备份 */\r\n    goSafeVideo(url: string): Promise<any> {\r\n        console.log('goVideo  ===>  ', url)\r\n        if (!url) return Promise.resolve();\r\n        let wx = window['wx'];\r\n        let signal = new Signal();\r\n        if (wx) {\r\n            let sys = this.getSystemInfo();\r\n            let video = wx.createVideo({\r\n                x: 0,\r\n                y: 0,\r\n                width: sys.windowWidth,\r\n                height: sys.windowHeight,\r\n                src: url,\r\n                objectFit: 'fill',\r\n                controls: true,\r\n                autoplay: true,\r\n                showCenterPlayBtn: false,\r\n                enableProgressGesture: false\r\n            })\r\n            video.requestFullScreen()\r\n\r\n\r\n            video.onEnded(res => {\r\n                console.log('播放完成')\r\n                video.destroy()\r\n                // Game.Inst.showResult()\r\n                signal.fire();\r\n            })\r\n\r\n            video.onError(errMsg => {\r\n                video.destroy()\r\n                this.goSafeVideo(url)\r\n                signal.cancel();\r\n                return\r\n            })\r\n\r\n        } else {\r\n        }\r\n        return signal.wait();\r\n    }\r\n\r\n    /** 免费视频 */\r\n    goFreeVideo(url): Promise<any> {\r\n        var self = this\r\n        let wx = window['wx']\r\n        if (wx) {\r\n            let sys = this.getSystemInfo();\r\n            let video = wx.createVideo({\r\n                x: 0,\r\n                y: 0,\r\n                width: sys.windowWidth,\r\n                height: sys.windowHeight,\r\n                src: url,\r\n                // poster: posterUrl,\r\n                objectFit: 'contain',\r\n                controls: true,\r\n                autoplay: true,\r\n                showCenterPlayBtn: false,\r\n                enableProgressGesture: false\r\n            })\r\n            video.requestFullScreen()\r\n            let signal = new Signal();\r\n            video.onEnded(res => {\r\n                console.log('播放完成')\r\n                video.destroy()\r\n                signal.fire();\r\n            })\r\n\r\n            video.onError(errMsg => {\r\n                console.log('goNewVideo  error  ===========>> !!!!!')\r\n                video.destroy()\r\n                self.goSafeVideo(self.desurl)\r\n                return\r\n            })\r\n            return signal.wait();\r\n\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    /** -----播放视频  结束-----*/\r\n\r\n    getSystemInfo(): SystemInfo {\r\n        if (!this._systemInfo)\r\n            this._systemInfo = wx.getSystemInfoSync();\r\n        return this._systemInfo;\r\n    }\r\n\r\n}\r\n\r\nexport let wxsdk: WxSdk = new WxSdk();"]}