{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIFreeGetLabour.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import mvcView from \"../../../framework/ui/mvcView\";\nimport Switcher from \"../../../framework/ui/controller/Switcher\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport { wxsdk } from \"../../../framework/extension/wxsdk/sdk\";\nimport { GameConfig } from \"../../../framework/extension/wxsdk/GameConfigs\";\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\nimport { Api } from \"../Common/Base/ServerConfig\";\nimport { Toast } from \"../../../framework/ui/ToastManager\";\nimport { UserInfo } from \"../../../framework/extension/weak_net_game/UserInfo\";\nimport Net from \"../../../framework/misc/Net\";\nimport { evt } from \"../../../framework/core/event\";\nimport { Code } from \"../Common/code\";\n\n\nconst { ccclass, property } = cc._decorator;\nenum BtnState {\n    Red,    //去邀请\n    Blue,    //领取\n}\n@ccclass\nexport default class UIFreeGetLabour extends mvcView {\n    @property(cc.Node)\n    btn_close: cc.Node = null;\n\n    @property(Switcher)\n    switcher_yaoqin: Switcher = null;\n\n    @property(Switcher)\n    switcher_subscriber: Switcher = null;\n\n    @property(Switcher)\n    switcher_kefu: Switcher = null;\n\n    @property(Switcher)\n    switcher_shoucang: Switcher = null;\n\n    callback: Function;\n\n\n    onLoad() {\n        this.registerSwitcher(this.switcher_yaoqin, _ => 0);\n        this.registerSwitcher(this.switcher_subscriber, _ => UserInfo.isDy ? 1 : 0);\n        this.registerSwitcher(this.switcher_kefu, _ => UserInfo.isKf ? 1 : 0);\n        this.registerSwitcher(this.switcher_shoucang, _ => UserInfo.isSc ? 1 : 0);\n        evt.on(\"View.onHidden\", this.onViewHidden, this);\n        evt.on(\"UserInfo.isKf\", this.render, this);\n        evt.on(\"UserInfo.isDy\", this.render, this);\n\n    }\n    onShow() {\n        this.render();\n    }\n\n    onViewHidden(view) {\n        // console.log(view.node.name)\n        if (view.node.name == \"UIGetSuccess\") {\n            // console.log(\"是否领取过客服奖励\",UserInfo.isGetKf);\n            this.render();\n        }\n    }\n\n    click_close() {\n        vm.hide(this);\n    }\n\n    click_yaoqin(ev, state) {\n        if (state == BtnState.Red) {\n            // 去邀请 \n            vm.show(\"Prefabs/UI/UIFriendHelp\");\n        } else if (state == BtnState.Blue) {\n            // 点击领取\n        } else {\n            // 已经领取装\n            console.log(\"有问题\")\n        }\n    }\n\n    click_subscriber(ev, state) {\n        if (state == BtnState.Red) {\n            // let self= this;\n            // wxsdk.requestSubscribeMessage(_=>{\n            //     Toast.make(\"订阅成功\")\n            //     UserInfo.isDy = true;\n            //     UserInfo.DyTime = Date.now();\n            //     // UserInfo.save();\n            //     // this.render();\n            //     vm.show(\"Prefabs/UI/UIGetSuccess\",csv.Config.Subscriber_Success,_=>{\n            //         UserInfo.isGetDy = true; \n            //         self.render();\n            //     });\n            // },_=>{\n            //     Toast.make(\"订阅已取消\")\n            // },(d)=>{\n            //     if(d.errno == Code.Subscribe_ERROR){\n            //         Toast.make(d.errmsg);\n            //         UserInfo.isDy = true;\n            //         UserInfo.isGetDy = true;\n            //         self.render();\n            //     }\n            // })\n            vm.show(\"Prefabs/UI/UISubscriber\", _ => this.render());\n        } else if (state == BtnState.Blue) {\n            // 点击领取 订阅成功奖励2点体力\n            this.render();\n            vm.show(\"Prefabs/UI/UIGetSuccess\", csv.Config.Subscriber_Success);\n        } else {\n            // 已经领取装\n            console.log(\"有问题\")\n        }\n    }\n\n    click_kefu(ev, state) {\n        if (state == BtnState.Red) {\n            // 去邀请\n            vm.show(\"Prefabs/UI/UICustomer\", _ => this.render());\n        } else if (state == BtnState.Blue) {\n            // 点击领取\n            UserInfo.isGetKf = true;\n            // this.switcher_kefu.index = 2;\n            this.render();\n            vm.show(\"Prefabs/UI/UIGetSuccess\", csv.Config.Customer_Success);\n        } else {\n            // 已经领取装\n            console.log(\"有问题\")\n        }\n    }\n\n\n    click_shoucang(ev, state) {\n        if (state == BtnState.Red) {\n            // 去邀请\n            vm.show(\"Prefabs/UI/UICollection\", _ => this.render());\n        } else if (state == BtnState.Blue) {\n            // 点击领取\n            vm.show(\"Prefabs/UI/UIGetSuccess\", csv.Config.Collection_Success, _ => {\n                //对应领取成功的回调 按钮状态改变 \n                UserInfo.isGetSc = true;\n                // this.switcher_shoucang.index = 2;\n                this.render();\n            });\n        } else {\n            // 已经领取装\n            console.log(\"有问题\")\n        }\n    }\n\n    onDestroy() {\n        evt.off(this);\n    }\n\n}\n"]}