{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIGetLabour.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import mvcView from \"../../../framework/ui/mvcView\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport LoadingScene from \"../Common/Base/LoadingScene\";\nimport Game from \"../Game\";\nimport { evt } from \"../../../framework/core/event\";\nimport { SettingInfo } from \"../../../framework/extension/weak_net_game/SettingInfo\";\nimport Device from \"../../../framework/misc/Device\";\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\nimport { Toast } from \"../../../framework/ui/ToastManager\";\nimport display from \"../../../framework/misc/display\";\nimport { qqsdk } from \"../../../framework/extension/qq/qqsdk\";\nimport IconSov from \"../../../framework/extension/weak_net_game/IconSov\";\nimport wegame from \"../sdk/wegame\";\nimport { CloudFuncType } from \"../Common/CloudFuncTypes\";\nimport Platform from \"../../../framework/extension/Platform\";\nimport { umeng } from \"../../../framework/extension/aldsdk/umeng\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UIGetLabour extends mvcView {\n    @property(cc.Node)\n    btn_moregame: cc.Node = null;\n\n    @property(cc.Node)\n    sdk: cc.Node = null;\n\n    @property(cc.Button)\n    btn_nothanks: cc.Button = null;\n\n    @property(cc.Button)\n    btn_ok: cc.Button = null;\n\n    @property(cc.Node)\n    btn_jia: cc.Node = null\n\n    callback: Function;\n    isVideo: boolean = false;\n    youlike: cc.Node = null;\n    isActive: boolean = true;\n\n    onLoad() {\n        this.btn_moregame.active = window.qq ? true : false;\n        this.registerSubViews(IconSov);\n    }\n\n\n    onDestroy() {\n        evt.off(this);\n    }\n    onResume() {\n        Platform.reloadBannerAd();\n    }\n\n    onShow(callback, isActive = false) {\n        evt.on(\"Game.Resume\", this.onResume, this);\n        this.callback = callback;\n        this.isActive = isActive;\n        this.isVideo = false;\n        this.render();\n        // if (wegame.isCheatOpen(CloudFuncType.Banner_move)) {\n        //     wegame.enableFakeForAdClick(this.btn_nothanks.node, this.btn_jia, 2, () => {\n        //         if (PlayerInfo.isShowSDK()) {\n        //             if (this.youlike == null) {\n        //                 this.youlike = window['zzsdkui'].youlike(2, null, null, null, function () {\n        //                     Game.instance.interfull.active = true;\n        //                 }.bind(this));\n        //                 if (this.youlike) {\n        //                     this.sdk.addChild(this.youlike);\n        //                     this.youlike.scale = 1;\n        //                 }\n        //             }\n        //             if (this.youlike)\n        //                 this.youlike.active = true;\n        //         }\n        //     });\n        // } else {\n        this.btn_nothanks.node.active = true;\n        this.btn_jia.active = false;\n        // }\n    }\n\n    start() {\n        // if (PlayerInfo.isShowSDK()) {\n        //     let youlike = window['zzsdkui'].youlike(2, 0, 400);\n        //     youlike && this.sdk.addChild(youlike);\n        //     youlike.scale = 1;\n        // }\n    }\n\n    click_close() {\n        vm.hide(this);\n    }\n\n    click_get() {\n        if (PlayerInfo.labour >= csv.Config.Max_Energy && this.isActive) {\n            Toast.make(\"体力已满，快去帮帮小姐姐吧\")\n            return;\n        }\n        this.btn_ok.interactable = false;\n        this.scheduleOnce(_ => this.btn_ok.interactable = true, 3);\n        umeng.onEvent('rewardAd', 'labourShow');\n        WeakNetGame.doChoice(\"SOV_Get_Labour\", _ => {\n            console.log(\"奖励体力\")\n            let add = csv.Config.Energy_Get_Num;\n            let old = PlayerInfo.labour\n            let r = PlayerInfo.labour + add\n            // PlayerInfo.labour = Math.min(r, csv.Config.Max_Energy || 5);\n            PlayerInfo.labour = r;\n            PlayerInfo.save(\"labour\");\n            umeng.onEvent('rewardAd', 'labourRewarded');\n            evt.emit(\"Game.getTili\", display.center, PlayerInfo.labour - old)\n            // if (PlayerInfo.labour >= csv.Config.Max_Energy) {\n            //     Toast.make(\"体力已恢复满!\")\n            //     vm.hide(this);\n\n            // } else {\n            //     Toast.make(\"获得\" + add + \"点体力\");\n            // }\n            Toast.make(\"获得\" + add + \"点体力\");\n            this.isVideo = true;\n            vm.hide(this);\n        }, this);\n    }\n\n    onHidden() {\n        if (this.isVideo) {\n            this.callback && this.callback();\n        }\n        evt.off(this);\n\n    }\n\n    click_moregame() {\n\n\n        qqsdk.showAppBox()\n    }\n    // update (dt) {}\n}\n"]}