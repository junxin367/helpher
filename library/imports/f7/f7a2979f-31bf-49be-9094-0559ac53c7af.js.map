{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIChapterClues.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\n\nimport mvcView from \"../../../framework/ui/mvcView\";\nimport { LevelInfo } from \"../Common/LevelInfo\";\nimport ccUtil from \"../../../framework/utils/ccUtil\";\nimport { SettingInfo } from \"../../../framework/extension/weak_net_game/SettingInfo\";\nimport Device from \"../../../framework/misc/Device\";\nimport { ChapterlInfo } from \"../Common/ChapterlInfo\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport Switcher from \"../../../framework/ui/controller/Switcher\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UIChapterClues extends mvcView {\n    @property(cc.ProgressBar)\n    bar_chapter: cc.ProgressBar = null;\n\n    @property(cc.Sprite)\n    left_chapter: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    right_chapter: cc.Sprite = null;\n\n    @property(cc.Label)\n    left_chapterNum: cc.Label = null;\n\n    @property(cc.Label)\n    right_chapterNum: cc.Label = null;\n\n    @property(cc.Label)\n    left_name: cc.Label = null;\n\n    @property(cc.Label)\n    right_name: cc.Label = null;\n\n    @property(cc.Label)\n    tip: cc.Label = null;\n    @property(Switcher)\n    right_swtich: Switcher = null;\n\n    leftData: ChapterlInfo = null;\n    rightData: ChapterlInfo = null;\n\n\n    onLoad() {\n        this.initData();\n        this.registerSwitcher(this.right_swtich, _ => this.rightSwtich());\n\n        // this.registerProgressBar(this.bar_chapter,_=> this.showBar());\n\n        this.registerLabel(this.tip, _ => this.showTip());\n\n        this.registerLabel(this.left_chapterNum, _ => this.leftData.chapter);\n        this.registerLabel(this.left_name, _ => this.leftData.title);\n        this.registerSprite(this.left_chapter, _ => \"Img/chapter/zj_\" + this.leftData.id);\n\n        if (this.rightData) {\n            this.registerLabel(this.right_chapterNum, _ => this.rightData.chapter);\n            this.registerLabel(this.right_name, _ => this.rightData.title);\n            this.registerSprite(this.right_chapter, _ => \"Img/chapter/zj_\" + this.rightData.id);\n        }\n        // this.render();\n    }\n\n    initData() {\n        let id = PlayerInfo.getChapter(PlayerInfo.playinglevel);\n        this.leftData = ccUtil.get(ChapterlInfo, id);\n        if ((id + 1) > 5) {\n            this.rightData = null;\n            return;\n        }\n        this.rightData = ccUtil.get(ChapterlInfo, id + 1);\n    }\n\n    showBar() {\n        let cur = PlayerInfo.playinglevel;\n        let next = PlayerInfo.getChapter(PlayerInfo.playinglevel) * 10;\n        if (cur == next) return 1;\n        let sub = next - cur;\n        return (10 - sub) / 10;\n\n    }\n\n    showTip() {\n        let cur = PlayerInfo.playinglevel;\n        let next = PlayerInfo.getChapter(PlayerInfo.playinglevel) * 10;\n        if (cur == next && this.rightData) {\n            return \"恭喜你！\" + this.rightData.chapter + \"已解锁\";\n        }\n        let sub = next - cur;\n\n        return `继续挑战${sub}关，解锁下一章`;\n    }\n\n    rightSwtich() {\n        let chapter = PlayerInfo.getChapter(PlayerInfo.playinglevel) + 1;\n        if (chapter > 5) {\n            this.tip.string = \"更多关卡，即将上线\";\n            return 1;\n        } else {\n\n            return 0;\n        }\n    }\n\n    onEnable() {\n        this.bar_chapter.progress = this.showBar();\n        this.render();\n    }\n\n    // onShown() {\n\n\n    // }\n\n\n    clic_close() {\n\n\n        vm.hide(this);\n    }\n\n    // update (dt) {}\n}\n"]}