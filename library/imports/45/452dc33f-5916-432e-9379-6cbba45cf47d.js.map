{"version":3,"sources":["assets\\Game\\Scripts\\Main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LoadingScene from \"./Common/Base/LoadingScene\";\nimport Device from \"../../framework/misc/Device\";\nimport { PlayerInfo } from \"./Common/Base/PlayerInfo\";\nimport { UserInfo } from \"../../framework/extension/weak_net_game/UserInfo\";\nimport Platform from \"../../framework/extension/Platform\";\nimport ccUtil from \"../../framework/utils/ccUtil\";\nimport { evt } from \"../../framework/core/event\";\nimport Net, { net } from \"../../framework/misc/Net\";\nimport WeakNetGame from \"../../framework/extension/weak_net_game/WeakNetGame\";\nimport { Api, ServerConfig } from \"./Common/Base/ServerConfig\";\nimport { SumInvite, DayInvite } from \"./UI/UIFriendHelp\";\nimport PandoraPoint from \"../../framework/ui/controller/PandoraPoint\";\nimport { ConfirmOption } from \"./UI/UIConfirm\";\nimport Game from \"./Game\";\nimport Unity from \"./Common/Unity\";\nimport { TwoType } from \"./UI/UIPersonSkin\";\nimport BuffSystem, { buffSystem } from \"../../framework/extension/buffs/BuffSystem\";\nimport DouyinStorage from \"../../framework/extension/ttsdk/DouyinStorage\";\n\n\nconst { ccclass, property } = cc._decorator;\nlet inited: boolean = false\n// if(!CC_DEBUG)console.log = function(){}\n@ccclass\nexport default class Main extends cc.Component {\n    // @property(cc.Node)\n    // dailyChallenge: cc.Node = null;\n    @property(cc.Node)\n    tili: cc.Node = null;\n\n    @property(cc.Node)\n    btn_play: cc.Node = null;\n\n    @property(cc.Node)\n    daojishi: cc.Node = null;\n\n    @property(cc.Label)\n    label_timeLeft: cc.Label = null;\n\n    @property(cc.Label)\n    label_level: cc.Label = null;\n\n    @property(cc.Node)\n    guideNode: cc.Node = null;\n\n    @property(cc.Node)\n    qiandao_hongdian: cc.Node = null;\n\n    @property(cc.Node)\n    zhuanpan_hongdian: cc.Node = null;\n\n    @property(cc.Node)\n    theme_hongdian: cc.Node = null;\n\n    @property(cc.Node)\n    skin_hongdian: cc.Node = null;\n\n    @property(cc.Node)\n    node_sidebar_icon: cc.Node = null;\n\n    static instance: Main = null\n    isclick: boolean = false;\n\n    @property(dragonBones.ArmatureDisplay)\n    girl: dragonBones.ArmatureDisplay = null;\n\n    @property(PandoraPoint)\n    redpoint: PandoraPoint = null;\n\n    drawer: cc.Node = null;\n\n    @property(cc.Button)\n    btn_challange: cc.Button = null;\n    @property(cc.Label)\n    challene_unlockTip: cc.Label = null;\n\n    onLoad() {\n        Main.instance = this;\n        cc.director.getPhysicsManager().enabled = true;\n\n        evt.on(\"PersistNode.onViewHidden\", this.onViewHidden, this);\n\n        evt.on(\"Game.getTili\", this.playAddTili, this);\n        evt.on(\"Game.friendTili\", this.calcRedpoint, this);\n        evt.on(\"UISkin.onHidden\", this.onChangeSkin, this)\n        evt.on(\"PlayerInfo.star\", this.onChangeStar, this)\n        evt.on(\"UISkin.checkLock\", this.check_lockSkin, this);\n        evt.on(\"UILucky.redPoint\", this.luckyRedPoint, this);\n        evt.on(\"Main.skin\", this.onMainSkin, this);\n\n        // this.onVisible(this.node_sidebar_icon, () => UserInfo.sidebarAvailable && !UserInfo.sidebarRewardClaimed)\n\n        if (inited == false) {\n            inited = true;\n            PlayerInfo.updateBuffs();\n            this.checkDaily();\n            // Platform.loadSubPackage(\"Audio\").then(_ => {\n            //     Device.playBGM(\"BGM0\");\n            // })\n        }\n        Device.playBGM(\"BGM0\");\n        // this.dailyChallenge.active = PlayerInfo.level >= csv.Config.Begin_Daily_Level ? true : false;\n        if (CC_DEBUG) {\n            window['main'] = this;\n        }\n        if (PlayerInfo.level < (csv.Config.Chanllenge_Unlock_Level || 25)) {\n            //25关解锁\n            this.challene_unlockTip.string = ((csv.Config.Chanllenge_Unlock_Level || 25) - PlayerInfo.level).toFixed() + \"关后解锁!\";\n            this.btn_challange.interactable = false;\n        } else {\n            this.btn_challange.interactable = true;\n            this.challene_unlockTip.node.parent.active = false;\n        }\n\n\n        if(this.node_sidebar_icon){\n            if(DouyinStorage.sidebarAvailable && !PlayerInfo.isFavClaimed){\n                // ok \n                // todo : check sidebar reward index is available \n                this.node_sidebar_icon.active = true;\n            }else{\n                this.node_sidebar_icon.active = false;\n            }\n        }\n\n    }\n\n    onChangeSkin() {\n        Unity.loadSkins(this.girl, 1);\n    }\n\n    onChangeStar() {\n        csv.Skin.values.forEach(v => {\n            if (v.unlockType == 2 && !PlayerInfo.isSkinUnlocked(v.id) && PlayerInfo.star >= v.unlock2) {\n                // PlayerInfo.unlockSkin(v.id);\n                vm.show(\"Prefabs/UI/UIUnlockSkin\", v.id);\n            }\n        });\n        //判断 是否解锁 章节\n        let c = PlayerInfo.getChapter(PlayerInfo.level);\n        if (PlayerInfo.star >= csv.star.get(c).demand) {\n            let bNew = PlayerInfo.isChapterNew(c)\n            if (c > 1) {\n                if (bNew) {\n                    vm.show(\"Prefabs/story/help\", c)\n                    PlayerInfo.markChapterOld(c);\n                }\n            }\n        }\n\n    }\n\n    onLoadFinished(viewname) {\n        if (viewname)\n            vm.show(viewname)\n    }\n\n\n\n    start() {\n        PlayerInfo.init();\n        if (buffSystem.getBuff(\"AutoLabour\").isEnabled) {\n            this.daojishi.active = true;\n        }\n        else {\n            this.daojishi.active = false;\n        }\n        this.label_timeLeft.string = new Date(PlayerInfo.buff_labour * 1000).format(\"mm:ss\");\n        if (PlayerInfo.labour < csv.Config.Max_Energy && !buffSystem.getBuff(\"AutoLabour\").isEnabled) {\n            if (PlayerInfo.buff_labour > 0) {\n                buffSystem.startBuff(\"AutoLabour\", PlayerInfo.buff_labour);\n            }\n            else {\n                buffSystem.startBuff(\"AutoLabour\", csv.Config.LabourRecoveryTime * 60 || 300);\n            }\n        }else{\n            buffSystem.stop(\"AutoLabour\")\n        }\n\n        this.girl.armature().animation.fadeIn('frightened', 0.2, 0, '1');\n        Unity.loadSkins(this.girl, 1);\n\n        this.isclick = false;\n        this.label_level.string = \"关卡进度:\" + PlayerInfo.level;\n\n        Platform.hideBannerAd();\n\n        //每次进主页请求是否有体力可领取\n        // if (PlayerInfo.isWechat()) this.checkTili();\n        if (PlayerInfo.isInGuide && !PlayerInfo.is_guide_15) {\n            this.guideNode.active = true;\n        }\n        // WeakNetGame.client.httpPost(ServerConfig.force_url).then(v => {\n        //     if (v) {\n        //         console.log(v);\n        //     }\n        // })\n        for (let i = 1; i <= csv.level.values.length; i++) {\n            if (!PlayerInfo.level_star[i]) {\n                PlayerInfo.level_star[i] = 0;\n            }\n        }\n        this.qiandao_hongdian.active = g.isNextDay(PlayerInfo.signTime);\n        this.zhuanpan_hongdian.active = g.isNextDay(UserInfo.freedrawTime);\n        this.check_lockSkin();\n\n        if (PlayerInfo.guide == 0) {\n            vm.show(\"Prefabs/story/comics1\")\n        } else {\n            g.isNextDay(PlayerInfo.signTime) && vm.show(\"Prefabs/UI/UISign\");\n        }\n    }\n\n    checkDaily() {\n        csv.daily_level.values.forEach(e => {\n            if (PlayerInfo.isGreaterDate(e.day)) {\n                PlayerInfo.maxDailyLv = e.id;\n            }\n        });\n        console.log(\"每日挑战最大关卡数：\" + PlayerInfo.maxDailyLv)\n    }\n\n    calcRedpoint(day_invite, sum_invite) {\n        let freeTili = 0;\n        for (var k in day_invite) {\n            let day = day_invite[k] as DayInvite\n            if (day && day.status == 0) {\n                freeTili++;\n            }\n        }\n        let sum = sum_invite as SumInvite\n        sum.claimedCount = sum.claimedCount || 0;\n        if (sum.claimedCount < sum.inviteeCount) {\n            freeTili++;\n        }\n        this.redpoint.setNumber(freeTili);\n    }\n\n    luckyRedPoint() {\n        this.zhuanpan_hongdian.active = false;\n    }\n\n    checkTili() {\n        WeakNetGame.client.httpGet(Api.invite_get).then(v => {\n            if (v == Net.Code.Timeout) {\n            } else {\n                if (v) {\n                    let d = JSON.parse(v);\n                    if (d.errno == 0) {\n                        d = d.data\n                        this.calcRedpoint(d.day_invite, d.sum_invite);\n                    } else {\n\n                    }\n                } else {\n\n                }\n            }\n        })\n    }\n\n\n    onConfirm(option: ConfirmOption) {\n        if (option == ConfirmOption.Yes) {\n            PlayerInfo.isRandomLevel = true;\n            let lvrow = csv.level.get(g.randomInt(2, csv.level.size))\n            this.flytili(lvrow.id);\n        } else {\n            PlayerInfo.isRandomLevel = false;\n        }\n    }\n    onConfirm_challenge(option: ConfirmOption) {\n        if (option == ConfirmOption.Yes) {\n            PlayerInfo.isPlayingDaily = true;\n            vm.show(\"Prefabs/UI/UIChallengeChapter\");\n        } else {\n            vm.show(\"Prefabs/UI/UIConfirm\", \"是否随机开始之前的关卡\", this.onConfirm, this);\n        }\n    }\n    confirm() {\n        if (PlayerInfo.level >= csv.level.size) {\n            if (PlayerInfo.dailylevel <= PlayerInfo.maxDailyLv) {\n                vm.show(\"Prefabs/UI/UIConfirm\", \"是否前往挑战关卡？\", this.onConfirm_challenge, this);\n            } else {\n                vm.show(\"Prefabs/UI/UIConfirm\", \"是否随机开始之前的关卡\", this.onConfirm, this);\n                return;\n            }\n\n        } else {\n            this.flytili();\n        }\n    }\n\n    onMainSkin() {\n        LoadingScene.goto(\"Skin\");//, TwoType.Skin\n    }\n\n    check_lockSkin() {\n        UserInfo.isunlock_men = 0;\n        UserInfo.isunlock_girl = 0;\n        UserInfo.isunlock_theme = 0;\n        for (let i = 1; i <= 5; i++) {\n            UserInfo[`isunlock_girl${i}`] = 0;\n            UserInfo[`isunlock_men${i}`] = 0;\n        }\n        this.theme_hongdian.active = false;\n        this.skin_hongdian.active = false;\n\n        for (let i = 1; i <= csv.Skin.values.length; i++) {\n            let data = csv.Skin.get(i);\n            if (((PlayerInfo.level >= data.unlock1 && data.unlockType == 1) || (data.unlockType == 2 && PlayerInfo.star >= data.unlock2))\n                && !PlayerInfo.isSkinUnlocked(data.id)) {\n                if (data.type == 1) {\n                    UserInfo.isunlock_girl = 1;\n                } else if (data.type == 2) {\n                    UserInfo.isunlock_men = 1;\n                } else if (data.type == 3) {\n                    UserInfo.isunlock_theme = 1;\n                }\n                if (data.subType < 5) {\n                    if (data.type == 1) {\n                        UserInfo[`isunlock_girl${data.subType + 1}`] = 1;\n                    } else if (data.type == 2) {\n                        UserInfo[`isunlock_men${data.subType + 1}`] = 1;\n                    }\n                }\n            }\n        }\n\n        if (UserInfo.isunlock_theme) {\n            this.theme_hongdian.active = true;\n        }\n        if (UserInfo.isunlock_men || UserInfo.isunlock_girl) {\n            this.skin_hongdian.active = true;\n        }\n    }\n\n    click_sidebar() {\n        if (cc.sys.BYTEDANCE_GAME == cc.sys.platform) {\n            if (DouyinStorage.isFromSidebar) {\n                // UserInfo.isFromSidebar = false;\n                vm.show(\"Prefabs/UI/BD_Guide_Sidebar\", \"claim\")\n            } else {\n                vm.show(\"Prefabs/UI/BD_Guide_Sidebar\", \"sidebar\")\n            }\n        }\n    }\n\n    click_play() {\n        // console.log(csv.level.size)\n        // console.log(PlayerInfo.playinglevel)\n\n        if (this.isclick) return;\n\n        //进入新手引导关\n        if (PlayerInfo.guide == 0) {\n            LoadingScene.goto(\"Game\");\n            this.isclick = true;\n            return;\n        }\n        if (PlayerInfo.labour > 0) {\n            if (!UserInfo.gun_num && !UserInfo.isGetGunStart) {\n                let ran = Math.random();\n                if (PlayerInfo.level >= csv.Config.Start_Lv_Get_Gun\n                    && UserInfo.gunViewDay < csv.Config.Get_Gun_Limt_Day\n                    && UserInfo.gunView < csv.Config.Get_Gun_Limt\n                    && ran < csv.Config.Get_Gun_Pro\n                ) {\n                    vm.show(\"Prefabs/UI/UIGetGun\", _ => {\n                        this.confirm();\n                    }, \"isGetGunStart\");\n                    return;\n                }\n\n\n            }\n            this.confirm();\n        } else {\n            vm.show(\"Prefabs/UI/UIGetLabour\", _ => {\n                this.confirm();\n            }, false);\n        }\n\n    }\n\n\n    test(lv) {\n        Game.debug = true;\n        LoadingScene.goto(\"Game\", lv)\n    }\n    click_daily() {\n\n        PlayerInfo.isPlayingDaily = true;\n        vm.show(\"Prefabs/UI/UIChallengeChapter\");\n        if (PlayerInfo.isInGuide && !PlayerInfo.is_guide_15) {\n            this.guideNode.active = false;\n        }\n    }\n\n    async click_level() {\n        PlayerInfo.isPlayingDaily = false;\n\n        // await Platform.loadSubPackage(\"ImagePart\");\n        vm.show(\"Prefabs/UI/UIChapter\");\n    }\n\n    click_setting() {\n        vm.show(\"Prefabs/UI/UISetting\");\n    }\n\n    click_rank() {\n        // vm.show(\"Prefabs/UI/UIRank\");\n    }\n\n    click_labour() {\n        vm.show(\"Prefabs/UI/UIGetLabour\", null, true);\n    }\n\n    click_draw() {\n\n        vm.show(\"Prefabs/UI/UILucky\");\n    }\n\n\n    click_gettili() {\n        // vm.show(\"Prefabs/UI/UIFriendHelp\")\n        vm.show(\"Prefabs/UI/UIFreeGetLabour\")\n    }\n\n    click_friend() {\n        vm.show(\"Prefabs/UI/UIFriendHelp\")\n    }\n\n    click_theme() {\n        vm.show(\"Prefabs/UI/UISkin\");\n    }\n\n    click_shouchang() {\n        LoadingScene.goto(\"Skin\", TwoType.Collection);\n    }\n\n    click_skin() {\n        LoadingScene.goto(\"Skin\", TwoType.Skin);\n    }\n\n    click_sign() {\n        vm.show(\"Prefabs/UI/UISign\");\n    }\n\n    playAddTili(worldpos, num) {\n        ccUtil.playFly(this.tili, 1.0, num)\n        // ccUtil.playFlyCoin(this.tili, this.tili.parent, worldpos, ccUtil.getWorldPosition(this.tili), { dur: 1.0, interval: 0.2, num })\n    }\n\n    async click_world_wx(userInfo?, isNew?) {\n        if (userInfo) {\n            await UserInfo.openRankAndUpload({ level: PlayerInfo.level, challengelevel: PlayerInfo.dailylevel }, userInfo);\n            // vm.show(\"Prefabs/UI/UIRank\");\n        }\n    }\n\n    flytili(id?) {\n        let tili = cc.instantiate(this.tili);\n        let tar = new cc.Vec2(this.btn_play.position.x, this.btn_play.position.y);\n        let wpos = this.tili.getBoundingBoxToWorld().center;\n        let startpos = this.btn_play.parent.convertToNodeSpaceAR(wpos);\n        let move = cc.moveTo(0.5, tar).easing(cc.easeSineOut())\n        let seq = cc.sequence(\n            move,\n            cc.callFunc(_ => {\n                tili.destroy()\n                PlayerInfo.isPlayingDaily = false;\n                PlayerInfo.labour--;\n                PlayerInfo.save(\"labour\");\n                if (PlayerInfo.labour <= csv.Config.Max_Energy - 1) {\n                    buffSystem.startBuff(\"AutoLabour\", PlayerInfo.buff_labour || 300);\n                }\n                if (id) {\n                    PlayerInfo.playinglevel = id;\n                } else {\n                    PlayerInfo.playinglevel = PlayerInfo.level;\n                }\n                LoadingScene.goto(\"Game\");\n            })\n        )\n        tili.parent = this.btn_play.parent;\n        tili.setPosition(startpos);\n        tili.runAction(seq);\n        this.isclick = true;\n\n    }\n    // update (dt) {}\n    onDestroy() {\n        cc.audioEngine.stopAll();\n        evt.off(this);\n    }\n}\n"]}