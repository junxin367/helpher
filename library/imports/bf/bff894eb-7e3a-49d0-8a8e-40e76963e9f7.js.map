{"version":3,"sources":["assets\\Game\\Scripts\\Levels\\Spike.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,mDAA6C;AAC7C,yDAAoD;AAEhD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAA;AAEzC,IAAK,KAGJ;AAHD,WAAK,KAAK;IACN,iCAAI,CAAA;IACJ,iCAAI,CAAA;AACR,CAAC,EAHI,KAAK,KAAL,KAAK,QAGT;AAGD;IAAmC,yBAAY;IAA/C;QAAA,qEAmEC;QAjEG,SAAG,GAAQ,IAAI,CAAC;QAGhB,cAAQ,GAAuB,IAAI,CAAA;QAEnC,eAAS,GAAY,IAAI,CAAA;;IA4D7B,CAAC;IA1DG,sBAAM,GAAN;QACI,4CAA4C;QAE5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;QAElD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC;QAEhE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,aAAG,CAAC,CAAA;QACjC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAEpC,CAAC;IAED,qBAAK,GAAL;QACI,4CAA4C;QAC5C,6BAA6B;QAC7B,IAAI;QACJ,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IAC1B,CAAC;IAED,4BAAY,GAAZ;QACI,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1B,gBAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;QACvB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;IAE5D,CAAC;IAED,6BAAa,GAAb;QACI,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE;YAC1B,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACpC;IACL,CAAC;IAED,4BAAY,GAAZ;QACI,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1B,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAA;QACvD,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;IAClC,CAAC;IAED,6BAAa,GAAb;QACI,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,CAAC,EAAE;YAC1B,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SACpC;IACL,CAAC;IAED,2BAAW,GAAX;IAEA,CAAC;IAID,sBAAM,GAAN,UAAO,EAAE;IAET,CAAC;IAjEgB,KAAK;QADzB,OAAO;OACa,KAAK,CAmEzB;IAAD,YAAC;CAnED,AAmEC,CAnEkC,EAAE,CAAC,SAAS,GAmE9C;kBAnEoB,KAAK","file":"","sourceRoot":"/","sourcesContent":["import { PasrTimer } from \"../../../framework/misc/PasrTimer\"\r\nimport FSM from \"../../../framework/core/FSM\"\r\nimport Device from \"../../../framework/misc/Device\";\r\n\r\nlet { ccclass, property } = cc._decorator\r\n\r\nenum State {\r\n    Hide,\r\n    Show,\r\n}\r\n\r\n@ccclass\r\nexport default class Spike extends cc.Component {\r\n\r\n    fsm: FSM = null;\r\n\r\n\r\n    collider: cc.PhysicsCollider = null\r\n\r\n    spikeNode: cc.Node = null\r\n\r\n    onLoad() {\r\n        // this.pasr = new PasrTimer(5, 0.1, 2, 0.1)\r\n\r\n        this.spikeNode = this.node.getChildByName(\"spike\")\r\n\r\n        this.collider = this.getComponentInChildren(cc.PhysicsCollider);\r\n\r\n        this.fsm = this.addComponent(FSM)\r\n        this.fsm.init(this, State);\r\n        this.fsm.enterState(State.Hide);\r\n\r\n    }\r\n\r\n    start() {\r\n        // if (this.node.width > this.node.height) {\r\n        //     this.node.height = 30;\r\n        // }\r\n        this.node.height = 40;\r\n    }\r\n\r\n    onEnter_Show() {\r\n        this.spikeNode.group = \"spike\";\r\n        this.collider.enabled = true;\r\n        this.spikeNode.scaleY = 0;\r\n        Device.playSfx(\"spike\")\r\n        cc.tween(this.spikeNode).to(0.2, { scaleY: 1 }).start();\r\n\r\n    }\r\n\r\n    onUpdate_Show() {\r\n        if (this.fsm.timeElapsed > 2) {\r\n            this.fsm.changeState(State.Hide);\r\n        }\r\n    }\r\n\r\n    onEnter_Hide() {\r\n        this.spikeNode.group = \"default\";\r\n        this.spikeNode.scaleY = 1;\r\n        cc.tween(this.spikeNode).to(0.2, { scaleY: 0 }).start()\r\n        this.collider.enabled = false;\r\n    }\r\n\r\n    onUpdate_Hide() {\r\n        if (this.fsm.timeElapsed > 5) {\r\n            this.fsm.changeState(State.Show);\r\n        }\r\n    }\r\n\r\n    onExit_Show() {\r\n\r\n    }\r\n\r\n\r\n\r\n    update(dt) {\r\n\r\n    }\r\n\r\n}"]}