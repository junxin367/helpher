{"version":3,"sources":["assets\\framework\\extension\\shooter\\STargetEnemies.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAA6C;AAC7C,+CAA0C;AAEpC,IAAA,KAAwC,EAAE,CAAC,UAAU,EAApD,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,gBAAgB,sBAAiB,CAAC;AAG5D;IAA4C,kCAAY;IAAxD;QAAA,qEA6CC;QA1CG,oBAAc,GAAU,GAAG,CAAC;;IA0ChC,CAAC;IAvCG,+BAAM,GAAN;QAEI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,mBAAQ,CAAC,CAAC;IAClD,CAAC;IAED,sBAAI,oCAAQ;aAAZ,UAAa,CAAC;YAEV,IAAI,CAAC,cAAc,GAAG,CAAC,CAAA;YACvB,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,QAAQ,EAAE,CAAC;QACpB,CAAC;;;OAAA;IAEO,+BAAM,GAAd,UAAe,MAAM;QAEjB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAA;IAC7C,CAAC;IAED,mCAAU,GAAV;QAEI,IAAG,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,EACvE;YACI,IAAI,OAAO,GAAG,sBAAY,CAAC,QAAQ,CAAC,UAAU,CAAC;YAE/C,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACtC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;SACzC;QACD,cAAc;IAClB,CAAC;IAED,iCAAQ,GAAR;QAEI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;IACvD,CAAC;IAED,kCAAS,GAAT;QAEI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAxCD;QADC,QAAQ;0DACmB;IAHX,cAAc;QADlC,OAAO;OACa,cAAc,CA6ClC;IAAD,qBAAC;CA7CD,AA6CC,CA7C2C,EAAE,CAAC,SAAS,GA6CvD;kBA7CoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["import MoveBase from \"../movement/SMoveBase\";\r\nimport ShootManager from \"./ShootManager\";\r\n\r\nconst {ccclass, property ,requireComponent} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class STargetEnemies extends cc.Component\r\n{\r\n    @property\r\n    targetInterval:number = 0.2;\r\n\r\n    moveEntity:MoveBase;\r\n    onLoad()\r\n    {\r\n        this.moveEntity = this.getComponent(MoveBase);\r\n    }\r\n\r\n    set interval(v)\r\n    {\r\n        this.targetInterval = v\r\n        this.onDisable();\r\n        this.onEnable();\r\n    }\r\n\r\n    private random(length)\r\n    {\r\n        return Math.floor(Math.random() * length)\r\n    }\r\n\r\n    seekTarget()\r\n    {\r\n        if(!this.moveEntity.target || !this.moveEntity.target.activeInHierarchy)\r\n        {\r\n            let enemies = ShootManager.instance.allEnemies;\r\n            \r\n            let idx = this.random(enemies.length);\r\n            this.moveEntity.target = enemies[idx];\r\n        }\r\n        // all enemies\r\n    }\r\n\r\n    onEnable()\r\n    {\r\n        this.schedule(this.seekTarget, this.targetInterval)\r\n    }\r\n\r\n    onDisable()\r\n    {\r\n        this.unschedule(this.seekTarget);\r\n    }\r\n\r\n}"]}