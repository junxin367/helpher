{"version":3,"sources":["assets\\framework\\ui\\controller\\AutoSwitch.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAClC,4CAAuC;AAEjC,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAIlD;IAAwC,8BAAY;IAApD;QAAA,qEAwCC;QAvCG,cAAQ,GAAa,IAAI,CAAA;QAEzB,cAAQ,GAAW,CAAC,CAAC;QACrB,cAAQ,GAAW,IAAI,gBAAM,EAAE,CAAC;QAEhC,UAAI,GAAY,KAAK,CAAA;QAErB,eAAS,GAAY,KAAK,CAAC;QAM3B,OAAC,GAAW,CAAC,CAAA;;IA0BjB,CAAC;IA9BG,2BAAM,GAAN;QACI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,CAAC;IAGD,yBAAI,GAAJ,UAAK,QAAY;QAAZ,yBAAA,EAAA,YAAY;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC;QAC1C,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,MAAM,EAAE,CAAA;QACb,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IAChC,CAAC;IAED,yBAAI,GAAJ;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC;IAED,2BAAM,GAAN;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QACvB,IAAI,CAAC,CAAC,EAAE,CAAC;QACT,IAAI,IAAI,CAAC,IAAI;YAAE,OAAO;QACtB,IAAI,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE;YACxC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;SACxB;IACL,CAAC;IApCD;QADC,QAAQ;gDACY;IAGrB;QADC,QAAQ;4CACY;IANJ,UAAU;QAF9B,OAAO;QACP,IAAI,CAAC,uBAAuB,CAAC;OACT,UAAU,CAwC9B;IAAD,iBAAC;CAxCD,AAwCC,CAxCuC,EAAE,CAAC,SAAS,GAwCnD;kBAxCoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import Switcher from \"./Switcher\";\r\nimport Signal from \"../../core/Signal\";\r\n\r\nconst { ccclass, property, menu } = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"Controller/AutoSwitch\")\r\nexport default class AutoSwitch extends cc.Component {\r\n    switcher: Switcher = null\r\n    @property\r\n    interval: number = 1;\r\n    onFinish: Signal = new Signal();\r\n    @property\r\n    loop: boolean = false\r\n\r\n    isPlaying: boolean = false;\r\n\r\n    onLoad() {\r\n        this.switcher = this.getComponent(Switcher);\r\n        this.isPlaying = false;\r\n    }\r\n    c: number = 0\r\n\r\n    play(interval = 0) {\r\n        this.isPlaying = true;\r\n        this.interval = interval || this.interval;\r\n        this.c = 0;\r\n        this.switch()\r\n        this.stop();\r\n        this.schedule(this.switch, this.interval);\r\n        return this.onFinish.wait();\r\n    }\r\n\r\n    stop() {\r\n        this.unschedule(this.switch);\r\n    }\r\n\r\n    switch() {\r\n        this.switcher.switch();\r\n        this.c++;\r\n        if (this.loop) return;\r\n        if (this.c >= this.switcher._childrenCount) {\r\n            this.unschedule(this.switch);\r\n            this.isPlaying = false;\r\n            this.onFinish.fire();\r\n        }\r\n    }\r\n}"]}