{"version":3,"sources":["assets\\Game\\Scripts\\RoleLoader.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Bomb from \"./Bomb\";\r\nimport ItemPortal from \"./Portal\";\r\nimport { PlayerInfo } from \"./Common/Base/PlayerInfo\";\r\n\r\nlet { ccclass, property, executeInEditMode } = cc._decorator\r\nexport enum RoleType {\r\n    Girl,\r\n    Older,\r\n    Badman,\r\n    Dog,\r\n    Bat,\r\n    Balloon,\r\n    Bomb,\r\n    Door,\r\n    Box,\r\n    Box_jia\r\n}\r\n\r\nconst RolePrefabs = {\r\n    [RoleType.Girl]: \"Prefabs/roles/girl\",\r\n    [RoleType.Older]: \"Prefabs/roles/older\",\r\n    [RoleType.Badman]: \"Prefabs/roles/badman\",\r\n    [RoleType.Dog]: \"Prefabs/roles/dog\",\r\n    [RoleType.Bat]: \"Prefabs/roles/bat\",\r\n    [RoleType.Balloon]: \"Prefabs/roles/ballon\",\r\n    [RoleType.Bomb]: \"Prefabs/roles/bomb\",\r\n    [RoleType.Door]: \"Prefabs/roles/men\",\r\n    [RoleType.Box]: \"Prefabs/roles/box\",\r\n    [RoleType.Box_jia]: \"Prefabs/roles/box_jia\",\r\n\r\n}\r\n\r\nconst Colors = {\r\n    [RoleType.Badman]: cc.Color.RED,\r\n    [RoleType.Dog]: cc.Color.GRAY,\r\n    [RoleType.Girl]: cc.Color.WHITE,\r\n    [RoleType.Older]: cc.Color.GREEN,\r\n    [RoleType.Bat]: cc.Color.BLACK,\r\n    [RoleType.Balloon]: cc.Color.YELLOW,\r\n    [RoleType.Bomb]: cc.Color.GRAY,\r\n    [RoleType.Door]: cc.Color.CYAN,\r\n    [RoleType.Box]: cc.Color.ORANGE,\r\n    [RoleType.Box_jia]: cc.Color.BLUE,\r\n}\r\n\r\n@ccclass\r\n@executeInEditMode\r\nexport default class RoleLoader extends cc.Component {\r\n    @property({ type: cc.Enum(RoleType) })\r\n    private _type: RoleType = RoleType.Girl;\r\n\r\n    @property({ type: cc.Enum(RoleType) })\r\n    public get type(): RoleType {\r\n        return this._type;\r\n    }\r\n    public set type(value: RoleType) {\r\n        this._type = value;\r\n        this.updateIndicator();\r\n\r\n    }\r\n\r\n    @property({ displayName: \"不随机\" })\r\n    isClaim: Boolean = false;\r\n\r\n    @property({ displayName: \"炸弹剩余时间\" })\r\n    time: number = 15;\r\n\r\n    @property(cc.Node)\r\n    another_door: cc.Node;\r\n\r\n    self_door: cc.Node;\r\n\r\n    indicator: cc.Sprite;\r\n\r\n\r\n    onLoad() {\r\n        this.indicator = this.getComponent(cc.Sprite);\r\n    }\r\n\r\n    updateIndicator() {\r\n        this.node.color = Colors[this.type];\r\n        this.node.width = 50;\r\n        this.node.height = 50;\r\n    }\r\n\r\n    get path() {\r\n        if (this.isClaim) return RolePrefabs[this.type];\r\n        if (this.type == RoleType.Dog || this.type == RoleType.Badman) {\r\n            this.type = g.getRandomInArray([RoleType.Dog, RoleType.Badman])\r\n        } else if (this.type == RoleType.Older) {\r\n            if ((!PlayerInfo.isPlayingDaily && csv.level.get(PlayerInfo.playinglevel).treasure)\r\n                || (PlayerInfo.isPlayingDaily && csv.daily_level.get(PlayerInfo.playingDailyLevel).treasure)) {\r\n                this.type = RoleType.Box;\r\n            }\r\n        }\r\n        return RolePrefabs[this.type]\r\n    }\r\n\r\n    start() {\r\n        if (CC_EDITOR) {\r\n            return this.updateIndicator();\r\n        }\r\n        cc.resources.load(this.path, cc.Prefab, (err, res) => {\r\n            let node = cc.instantiate(res) as cc.Node\r\n            node.parent = this.node.parent;\r\n            node.position = this.node.position;\r\n            node.scaleX = node.scaleX * this.node.scaleX;\r\n            if (node.name == \"bomb\") {\r\n                console.log(node.name)\r\n                node.getComponent(Bomb)._timeLeft = this.time;\r\n            }\r\n            else if (node.name == \"men\") {\r\n                this.self_door = node;\r\n                node.getComponent(ItemPortal).anotherDoor = this.another_door;\r\n            }\r\n        })\r\n        this.indicator.enabled = false;\r\n    }\r\n}"]}