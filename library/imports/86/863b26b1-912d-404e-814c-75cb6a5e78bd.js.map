{"version":3,"sources":["assets\\Game\\Scripts\\items\\FreezeTarget.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sCAAiC;AACjC,yDAAoD;AAE9C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA0C,gCAAY;IAAtD;QAAA,qEAkDC;QAjDG,SAAG,GAAY,IAAI,CAAC;QACpB,cAAQ,GAAW,IAAI,CAAC;QACxB,WAAK,GAAY,IAAI,CAAC;QAEtB,WAAK,GAAa,IAAI,CAAC;QACvB,cAAQ,GAAW,CAAC,CAAC;;IA4CzB,CAAC;IA3CG,6BAAM,GAAN;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAA;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,sBAAsB,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;IAEvD,CAAC;IAED,4BAAK,GAAL;IAEA,CAAC;IAED,2BAAI,GAAJ;QACI,gBAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;QAErB,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;YACpB,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,GAAG,CAAC;YACvB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;SACxD;QAED,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC9B,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAA;QAC3E,UAAU;QACV,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QAEvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IAGrC,CAAC;IAED,gCAAS,GAAT;QACI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAChD,CAAC;IAED,2BAAI,GAAJ;QACI,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;IAC7B,CAAC;IAjDgB,YAAY;QADhC,OAAO;OACa,YAAY,CAkDhC;IAAD,mBAAC;CAlDD,AAkDC,CAlDyC,EAAE,CAAC,SAAS,GAkDrD;kBAlDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import AIEnemy from \"../AIEnemy\";\r\nimport Device from \"../../../framework/misc/Device\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FreezeTarget extends cc.Component {\r\n    ice: cc.Node = null;\r\n    duration: number = 10.0;\r\n    enemy: AIEnemy = null;\r\n\r\n    label: cc.Label = null;\r\n    timeleft: number = 0;\r\n    onLoad() {\r\n        this.ice = this.node.getChildByName(\"ice\")\r\n        this.enemy = this.getComponent(AIEnemy);\r\n        this.label = this.getComponentInChildren(cc.Label);\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    cast() {\r\n        Device.playSfx(\"ice\")\r\n\r\n        if (this.timeleft <= 0) {\r\n            this.ice.opacity = 0.0;\r\n            cc.tween(this.ice).to(1.0, { opacity: 255 }).start();\r\n        }\r\n\r\n        this.ice.active = true;\r\n        this.unschedule(this.hide);\r\n        this.scheduleOnce(this.hide, this.duration);\r\n        this.timeleft = this.duration;\r\n        this.label.string = this.timeleft.toString();\r\n        this.label.node.scaleX = Math.sign(this.node.scaleX * this.enemy.baseScale)\r\n        // freeze \r\n        this.enemy.go_frozen();\r\n\r\n        this.unschedule(this.countdown);\r\n        this.schedule(this.countdown, 1);\r\n\r\n\r\n    }\r\n\r\n    countdown() {\r\n        this.timeleft -= 1;\r\n        this.label.string = this.timeleft.toFixed();\r\n    }\r\n\r\n    hide() {\r\n        this.ice.active = false;\r\n        this.enemy.exit_frozen();\r\n    }\r\n}"]}