{"version":3,"sources":["assets\\framework\\ui\\UIFunctions.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["export default class UIFunctions\r\n{\r\n    \r\n    static getChildrenAnimations(node): cc.Animation[] {\r\n        let animations:cc.Animation[] = []\r\n        var anim = node.getComponent(cc.Animation)\r\n        if(anim)\r\n            animations.push(anim)\r\n        for (var i = 0; i< node.childrenCount; i++)\r\n        {\r\n            let child = node.children[i];\r\n            var anim = child.getComponent(cc.Animation)\r\n            if(anim)\r\n                animations.push(anim)\r\n        }\r\n        return animations\r\n    }\r\n\r\n    static stopAnimations(animations)\r\n    {\r\n        animations.forEach((anim:cc.Animation)=>{\r\n            anim.stop();\r\n        })\r\n    }\r\n\r\n    static doShowAnimations(animations,finishCallback?:Function,target?)\r\n    {\r\n        let maxDuration = 0 ;\r\n        let maxDurationAnimation:cc.Animation;\r\n        animations.forEach((anim:cc.Animation)=>{\r\n            let clips = anim.getClips()\r\n            if(clips.length > 0)\r\n            {\r\n                let clip = clips[0]\r\n                let animState = anim.play(clip.name)\r\n                animState.wrapMode = cc.WrapMode.Normal\r\n                if (clip.duration > maxDuration)\r\n                {\r\n                    maxDuration  = clip.duration;\r\n                    maxDurationAnimation = anim;\r\n                }\r\n            }\r\n        })\r\n        if (finishCallback)\r\n        {\r\n            let func = function()\r\n            {\r\n                // console.log(\"finish animations\")\r\n                if(maxDurationAnimation)\r\n                    maxDurationAnimation.off(\"finished\",func);\r\n                finishCallback.call(target);\r\n            }\r\n            if(maxDurationAnimation)\r\n                maxDurationAnimation.on(\"finished\",func);\r\n            else \r\n                finishCallback.call(target);\r\n            \r\n        }\r\n    }\r\n\r\n    // static getLongestAnimation(animations)\r\n    // {\r\n    //     animations.forEach((anim:cc.Animation)=>{\r\n    //         let clips = anim.getClips()\r\n    //         for (clips)\r\n            \r\n    //         //以最长的为准\r\n    //     }\r\n    // }\r\n\r\n    //TODO:还未实现\r\n    static isAnimationRunning(animations: cc.Animation[]): any {\r\n        return false;\r\n    }\r\n\r\n    static doHideAnimations(animations,finishCallback?:Function,target?)\r\n    {\r\n        let hasHideAnimation = false;\r\n        let maxDuration = 0 ;\r\n        let maxDurationAnimation:cc.Animation;\r\n        animations.forEach((anim:cc.Animation)=>{\r\n            let clips = anim.getClips()\r\n            if(clips.length == 2)\r\n            {\r\n                let clip = clips[clips.length-1]\r\n                // anim.on(\"finished\",onHideAnimationFinished)\r\n                hasHideAnimation = true;\r\n                anim.play(clip.name)\r\n                if (clip.duration > maxDuration)\r\n                {\r\n                    maxDuration  = clip.duration;\r\n                    maxDurationAnimation = anim;\r\n                }\r\n            }else if(clips.length == 1)\r\n            {\r\n                let clip = clips[0];\r\n                // clip.wrapMode = cc.WrapMode.Reverse;\r\n                hasHideAnimation = true;\r\n                let animState = anim.play(clip.name)\r\n                animState.wrapMode = cc.WrapMode.Reverse\r\n                if (clip.duration > maxDuration)\r\n                {\r\n                    maxDuration  = clip.duration;\r\n                    maxDurationAnimation = anim;\r\n                }   \r\n            }\r\n        })\r\n        if (maxDurationAnimation && finishCallback)\r\n        {\r\n            let func = function()\r\n            {\r\n                // console.log(\"finish animations\")\r\n                maxDurationAnimation.off(\"finished\",func);\r\n                finishCallback.call(target);\r\n            }\r\n            maxDurationAnimation.on(\"finished\",func);\r\n        }\r\n        return hasHideAnimation;\r\n    }\r\n\r\n    static getToggleIndex(toggle:cc.Toggle)\r\n    {\r\n        let container = toggle.node.getParent();\r\n        for (var i = 0 ;i < container.childrenCount;i++)\r\n        {\r\n            let child = container.children[i]\r\n            if(toggle.node == child )\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    static selectToggleIndex(toggleContainer:cc.Node,index)\r\n    {\r\n        if(toggleContainer == null) {\r\n            console.warn(\"[UIFunction.selectToggleIndex] : invalid toggleContainer :\" )\r\n            return;\r\n        }\r\n        let toggleNode = toggleContainer.children[index]\r\n        if(toggleNode)\r\n        {\r\n            let toggle = toggleNode.getComponent(cc.Toggle)\r\n            if(toggle)\r\n            {\r\n                console.log(\"[UIFunction.selectToggleIndex] :\" + index)\r\n                toggle.check()\r\n            }\r\n        }else{\r\n            console.warn(\"[UIFunction.selectToggleIndex] :cannot find toggle with index:\"+ index)\r\n        }\r\n    }\r\n\r\n    // set btn \r\n    static setTouchEnabled(node,b)\r\n    {\r\n        g.foreachNode(node,child=>{\r\n            let btn:cc.Button = child.getComponent(cc.Button)\r\n            if(btn)\r\n            {\r\n                console.log(\"[UIFunction] \" + child.name + \" touch : \" + b)\r\n                btn.interactable = b;\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n}"]}