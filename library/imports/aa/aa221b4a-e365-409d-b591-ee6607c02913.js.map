{"version":3,"sources":["assets\\framework\\extension\\shooter\\SEquipSystem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAgC;AAC1B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA0C,gCAAY;IAAtD;QAAA,qEAmEC;QAhEG,kBAAY,GAAa,IAAI,CAAA;QAE7B,YAAM,GAAW,IAAI,CAAC;QAEtB,aAAO,GAA4B,EAAE,CAAA;;QA2DrC,iBAAiB;IACrB,CAAC;IA1DG,4BAAK,GAAL;QACI,YAAY;QACZ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACzC,CAAC;IAED,gCAAS,GAAT;QAEI,IAAI,CAAC,gBAAgB,EAAE,CAAA;IAC3B,CAAC;IAEO,mCAAY,GAApB,UAAqB,YAAsB;QAEvC,IAAI,UAAU,GAAG,EAAE,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAC9C,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChC,UAAU,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,MAAM,GAAG,UAAU,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC;QAC9C,IAAG,CAAC,MAAM,EAAC;YACP,OAAO,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAA;YAC1D,MAAM,GAAG,UAAU,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC;SAC7C;QACD,OAAO,MAAM,CAAA;IACjB,CAAC;IAED,gCAAS,GAAT,UAAU,CAAC,EAAC,YAAsB;QAE9B,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;QACpB,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAA;QAC5C,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC;IAC7B,CAAC;IAED,uCAAgB,GAAhB;QAEI,IAAG,IAAI,CAAC,MAAM,EACd;YACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SAC9B;IACL,CAAC;IAED,mCAAY,GAAZ,UAAa,CAAC;QAEV,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;QAC5B,IAAG,MAAM;YACL,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED,mCAAY,GAAZ,UAAa,YAAsB;QAE/B,IAAG,YAAY,IAAI,IAAI;YACnB,OAAO;QACX,IAAG,IAAI,CAAC,MAAM,EACd;YACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SAC9B;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAA;IACjD,CAAC;IA7DD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;sDACS;IAHZ,YAAY;QADhC,OAAO;OACa,YAAY,CAmEhC;IAAD,mBAAC;CAnED,AAmEC,CAnEyC,EAAE,CAAC,SAAS,GAmErD;kBAnEoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import SWeapon from \"./SWeapon\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SEquipSystem extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    weaponPrefab:cc.Prefab = null\r\n\r\n    weapon:SWeapon = null;\r\n\r\n    weapons:{[index:string]:SWeapon} = {}\r\n\r\n    start () {\r\n        //mainweapon\r\n        this.switchWeapon(this.weaponPrefab);\r\n    }\r\n\r\n    onDisable()\r\n    {\r\n        this.removeMainWeapon()\r\n    }\r\n\r\n    private createWeapon(weaponPrefab:cc.Prefab):SWeapon\r\n    {\r\n        let weaponNode = cc.instantiate(weaponPrefab);\r\n        weaponNode.setParent(this.node);\r\n        weaponNode.setPosition(0,0);\r\n        let weapon = weaponNode.getComponent(SWeapon);\r\n        if(!weapon){\r\n            console.log(\"[SEquipSystem] target node is not a SWeapon\")\r\n            weapon = weaponNode.addComponent(SWeapon);\r\n        }\r\n        return weapon\r\n    }\r\n    \r\n    addWeapon(k,weaponPrefab:cc.Prefab)\r\n    {\r\n        this.removeWeapon(k)\r\n        let weapon = this.createWeapon(weaponPrefab)\r\n        this.weapons[k] = weapon;\r\n    }\r\n\r\n    removeMainWeapon()\r\n    {\r\n        if(this.weapon)\r\n        {\r\n            this.weapon.node.destroy();\r\n        }\r\n    }\r\n\r\n    removeWeapon(k)\r\n    {\r\n        let weapon = this.weapons[k]\r\n        if(weapon)\r\n            weapon.node.destroy();\r\n        this.weapons[k] = null;\r\n    }\r\n\r\n    switchWeapon(weaponPrefab:cc.Prefab)\r\n    {\r\n        if(weaponPrefab == null)\r\n            return;\r\n        if(this.weapon)\r\n        {\r\n            this.weapon.node.destroy();\r\n        }\r\n        this.weapon = this.createWeapon(weaponPrefab)\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}