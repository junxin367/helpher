{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UILevelItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import mvcView from \"../../../framework/ui/mvcView\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport { Toast } from \"../../../framework/ui/ToastManager\";\nimport LoadingScene from \"../Common/Base/LoadingScene\";\nimport { LevelInfo } from \"../Common/LevelInfo\";\nimport { SettingInfo } from \"../../../framework/extension/weak_net_game/SettingInfo\";\nimport Device from \"../../../framework/misc/Device\";\nimport ccUtil from \"../../../framework/utils/ccUtil\";\nimport { DailyLevelInfo } from \"../Common/DailyLevelInfo\";\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\nimport Platform from \"../../../framework/extension/Platform\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UILevelItem extends mvcView {\n\n    @property(cc.Node)\n    dangqian: cc.Node = null;\n\n    @property(cc.Label)\n    level: cc.Label = null;\n\n    @property(cc.Node)\n    lock: cc.Node = null;\n\n\n    @property(cc.Node)\n    jiaobiao: cc.Node = null;\n\n    //当前进入类型的关卡数\n    lv: number = 0;\n\n    onLoad() {\n\n    }\n\n    showjiaobiao() {\n        let data = this.getData() as LevelInfo;\n\n        if (PlayerInfo.isPlayingDaily) {\n            let lv1 = ccUtil.get(DailyLevelInfo, data.id);\n            if (data.id <= PlayerInfo.dailylevel) {\n                return false;\n            } else {\n                if (PlayerInfo.isNewLevel(lv1.day)) {\n                    return true;\n                } else {\n                    return false;\n                }\n\n            }\n        } else {\n            let lv2 = ccUtil.get(LevelInfo, data.id);\n            if (data.id <= PlayerInfo.level) {\n                return false;\n            } else {\n                if (lv2.isNew) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        }\n    }\n\n    start() {\n        this.lv = PlayerInfo.getCurrentLevel();\n        let data = this.getData() as LevelInfo;\n        this.level.string = data.id.toString();\n\n        if (data.id == this.lv) {\n            this.dangqian.active = true;\n        }\n        if (data.id <= this.lv) {\n            this.lock.active = false;\n        }\n        this.onVisible(this.jiaobiao, _ => this.showjiaobiao())\n        this.render()\n    }\n\n    click_startGame() {\n\n\n        let data = this.getData() as LevelInfo;\n        if (this.lv < data.id) {\n            Toast.make(\"未解锁\")\n            return;\n        }\n        if (PlayerInfo.labour > 0) {\n            PlayerInfo.labour--;\n            if (PlayerInfo.isPlayingDaily) {\n                PlayerInfo.playingDailyLevel = data.id;\n\n                if ((csv.Config.Challenge_Level_Show_AD == PlayerInfo.playingDailyLevel) || (((PlayerInfo.playingDailyLevel - csv.Config.Challenge_Level_Show_AD) % csv.Config.Challenge_Level_Show_AD_Interval) == 0) && (PlayerInfo.playingDailyLevel > csv.Config.Challenge_Level_Show_AD)) {\n\n                    WeakNetGame.doChoice(\"SOV_ShowAD\", _ => {\n                        PlayerInfo.save();\n                        LoadingScene.goto(\"Game\");\n                    }, this);\n                }\n\n                else if ((csv.Config.Challenge_Level_Show_AD_Skip == PlayerInfo.playingDailyLevel) || (((PlayerInfo.playingDailyLevel - csv.Config.Challenge_Level_Show_AD_Skip) % csv.Config.Challenge_Level_Show_AD_Skip_Interval) == 0) && (PlayerInfo.playingDailyLevel > csv.Config.Challenge_Level_Show_AD_Skip)) {\n                    Platform.showInterstitial(_ => {\n                        PlayerInfo.save();\n                        LoadingScene.goto(\"Game\");\n                    }, this)\n                }\n                else {\n                    PlayerInfo.save();\n                    LoadingScene.goto(\"Game\");\n                }\n            } else {\n                PlayerInfo.playinglevel = data.id;\n                PlayerInfo.save();\n                LoadingScene.goto(\"Game\");\n            }\n\n\n        } else {\n            // Toast.make(\"体力不足\");\n            vm.show(\"Prefabs/UI/UIGetLabour\", _ => {\n                PlayerInfo.labour--;\n                if (PlayerInfo.isPlayingDaily) {\n                    PlayerInfo.playingDailyLevel = data.id;\n                } else {\n                    PlayerInfo.playinglevel = data.id;\n                }\n                PlayerInfo.save();\n                LoadingScene.goto(\"Game\");\n            }, false);\n        }\n\n        // if(PlayerInfo.isNew)\n        //     StatHepler.userAction(\"(新玩家)进入关卡\",PlayerInfo.playinglevel)\n    }\n\n\n}\n"]}