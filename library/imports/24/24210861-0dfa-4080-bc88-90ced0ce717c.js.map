{"version":3,"sources":["assets\\framework\\misc\\Device.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["//电子邮件puhalskijsemen@gmail.com\r\n//源码网站 开vpn全局模式打开 http://web3incubators.com/\r\n//电报https://t.me/gamecode999\r\n//网页客服 http://web3incubators.com/kefu.html\r\nexport default class Device {\r\n\r\n    static isSfxEnabled = true;\r\n\r\n    static isBgmEnabled = true;\r\n    static isVibrateEnabled = true;\r\n\r\n    static audio_path = \"Audio/\"\r\n\r\n    static setSoundsEnable(b: boolean) {\r\n        Device.setSFXEnable(b)\r\n        Device.setBGMEnable(b);\r\n    }\r\n\r\n    static setSFXEnable(b) {\r\n        Device.isSfxEnabled = b;\r\n    }\r\n\r\n    static setVibrateEnable(b) {\r\n        this.isVibrateEnabled = b;\r\n    }\r\n\r\n    static tmp_bgm_url: string = null;\r\n\r\n    static setBGMEnable(b) {\r\n        Device.isBgmEnabled = b;\r\n        if (!b) {\r\n            // cc.audioEngine.pauseMusic()\r\n            cc.audioEngine.stopMusic()\r\n            // this.bgm_clip && this.bgm_clip.pause();\r\n        } else {\r\n            this.playBGM(Device.tmp_bgm_url);\r\n            // this.bgm_clip && this.bgm_clip.play();\r\n            // cc.audioEngine.resumeMusic();\r\n        }\r\n    }\r\n\r\n    static _clips: { [index: string]: any } = {}\r\n\r\n    static playSfx(url, loop = false, volume = 1) {\r\n        this.stopSfx(url);\r\n        if (!Device.isSfxEnabled) { return }\r\n        cc.resources.load(Device.audio_path + url, cc.AudioClip, (err, clip: cc.AudioClip) => {\r\n            if (err)\r\n                console.warn(err)\r\n            else {\r\n                this._clips[url] = this.playEffect(clip, loop, volume);\r\n            }\r\n        });\r\n    }\r\n\r\n    static stopSfx(url) {\r\n        let clip = this._clips[url]\r\n        cc.audioEngine.stopEffect(clip);\r\n        // if (clip) {\r\n        //     clip.stop();\r\n        // }\r\n    }\r\n\r\n    static stopAllEffect() {\r\n        cc.audioEngine.stopAllEffects();\r\n        // for (var k in this._clips) {\r\n        //     let v = this._clips[k];\r\n        //     v.stop();\r\n        // }\r\n    }\r\n\r\n    static playBGM(url, loop = true) {\r\n        this.tmp_bgm_url = url;\r\n        if (!Device.isBgmEnabled) { return }\r\n        this.stopMusic();\r\n        cc.resources.load(Device.audio_path + url, cc.AudioClip, (err, clip: cc.AudioClip) => {\r\n            if (err)\r\n                console.log(err)\r\n            else {\r\n                this.playMusic(clip, loop);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    static setAudioPath(path) {\r\n        Device.audio_path = path;\r\n    }\r\n\r\n    static playEffect(clip: cc.AudioClip, loop = false, volume = 1) {\r\n        if (Device.isSfxEnabled) {\r\n            // console.log(clip);\r\n            return cc.audioEngine.playEffect(clip, loop);\r\n            // clip.setLoop(loop);\r\n            // clip.setVolume(volume);\r\n            // return clip.play();\r\n        }\r\n    }\r\n\r\n    static stopEffect(id: number) {\r\n        cc.audioEngine.stopEffect(id);\r\n    }\r\n\r\n    static bgm_clip: any = null;\r\n    static stopMusic() {\r\n        // this.bgm_clip && this.bgm_clip.stop();\r\n        cc.audioEngine.stopMusic();\r\n    }\r\n\r\n    static playMusic(clip: cc.AudioClip, loop = true) {\r\n        if (Device.isBgmEnabled) {\r\n            // this.bgm_clip = clip;\r\n            this.bgm_clip = cc.audioEngine.playMusic(clip, loop);\r\n            // clip.setLoop(loop);\r\n            // return clip.play();\r\n        }\r\n    }\r\n\r\n\r\n    static vibrate(long?) {\r\n        if (!this.isVibrateEnabled) {\r\n            return;\r\n        }\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            if (long)\r\n                wx.vibrateLong()\r\n            else\r\n                wx.vibrateShort();\r\n        } else {\r\n            // console.log(\"not support vibrate on except-wx platfrom \")\r\n        }\r\n    }\r\n}"]}