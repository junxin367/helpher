{"version":3,"sources":["assets\\framework\\misc\\PlayController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Signal from \"../core/Signal\";\r\n\r\nconst {ccclass, property,menu} = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"其它/PlayController\")\r\nexport default class PlayController extends cc.Component {\r\n\r\n    isTouching:boolean = false;\r\n\r\n    @property\r\n    canHolding:boolean = false;\r\n\r\n    holdingSigal:Signal = new Signal();\r\n\r\n    pressSignal:Signal = new Signal();\r\n\r\n    releaseSignal:Signal = new Signal()\r\n\r\n    @property(cc.Vec2)\r\n    pos:cc.Vec2 = cc.Vec2.ZERO;\r\n\r\n    onLoad () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START,this.onBegan,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.onEnd,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onEnd,this);\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        this.node.off(cc.Node.EventType.TOUCH_START,this.onBegan,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END,this.onEnd,this);\r\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onEnd,this);\r\n    }\r\n\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    onBegan(e)\r\n    {\r\n        this.isTouching = true;\r\n        this.pressSignal.fire()\r\n        let p = e.touch.getLocation()\r\n        p = this.node.convertToNodeSpaceAR(p)\r\n        this.pos = p;\r\n    }\r\n\r\n    onMove(e)\r\n    {\r\n        let p = e.touch.getLocation()\r\n        p = this.node.convertToNodeSpaceAR(p)\r\n        this.pos = p;\r\n    }\r\n\r\n    onEnd()\r\n    {\r\n        this.isTouching = false;\r\n        this.releaseSignal.fire();\r\n    }\r\n    \r\n    update()\r\n    {\r\n        if(this.canHolding && this.isTouching){\r\n            this.holdingSigal.fire(this.pos);\r\n        }\r\n    }\r\n\r\n}"]}