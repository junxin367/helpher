{"version":3,"sources":["assets\\Game\\Scripts\\level\\HintButton.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yDAAoD;AACpD,8EAAyE;AACzE,uDAAoD;AAEpD,wDAAuD;AACvD,sFAAiF;AAE7E,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAA;AAEzC,6BAA6B;AAC7B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,IAAI;AAEJ,IAAM,OAAO,GAAG,yDAAyD,CAAC;AAE1E;IAAwC,8BAAO;IAA/C;QAAA,qEAwFC;QArFG,cAAQ,GAAiB,IAAI,CAAA;QAiB7B,cAAQ,GAAG,KAAK,CAAC;;IAoErB,CAAC;IAnFG,2BAAM,GAAN;QACI,IAAI,CAAC,gBAAgB,CAAC,iBAAO,CAAC,CAAA;QAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACzC,WAAG,CAAC,EAAE,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAA;QACvD,iDAAiD;IACrD,CAAC;IAED,8BAAS,GAAT;QACI,WAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IACjB,CAAC;IAED,0BAAK,GAAL;IAEA,CAAC;IAID,+BAAU,GAAV;QACI,6BAA6B;QAC7B,yCAAyC;QACzC,aAAa;QACb,mCAAmC;QACnC,iEAAiE;QACjE,WAAW;QACX,sDAAsD;QACtD,IAAI;QACJ,6BAA6B;QAC7B,qCAAqC;QACrC,0BAA0B;QAC1B,kDAAkD;QAClD,2BAA2B;QAC3B,IAAI;IACR,CAAC;IAED,yBAAI,GAAJ;QACI,sDAAsD;QACtD,aAAa;QACb,mCAAmC;QACnC,iEAAiE;QACjE,WAAW;QACX,sDAAsD;QACtD,IAAI;QACJ,qCAAqC;QACrC,iDAAiD;QACjD,oBAAoB;QACpB,8DAA8D;QAC9D,iCAAiC;QACjC,sCAAsC;QACtC,UAAU;QACV,IAAI;IACR,CAAC;IAED,+BAAU,GAAV;QACI,qBAAW,CAAC,QAAQ,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5D,CAAC;IAED,mCAAc,GAAd,UAAe,EAAE;QACb,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,EAAE;YACxB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACzB,OAAO;SACV;QACD,IAAI,KAAK,CAAC;QACV,IAAI,uBAAU,CAAC,cAAc,EAAE;YAC3B,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;SACnC;aAAM;YACH,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;SAC7B;QAED,IAAI,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;QAClC,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SAC3B;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SAC5B;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAGD,4BAAO,GAAP;QACI,cAAc;IAElB,CAAC;IAnFD;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;gDACM;IAHZ,UAAU;QAD9B,OAAO;OACa,UAAU,CAwF9B;IAAD,iBAAC;CAxFD,AAwFC,CAxFuC,iBAAO,GAwF9C;kBAxFoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import mvcView from \"../../../framework/ui/mvcView\";\r\nimport IconSov from \"../../../framework/extension/weak_net_game/IconSov\";\r\nimport { evt } from \"../../../framework/core/event\";\r\nimport Platform from \"../../../framework/extension/Platform\";\r\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\r\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\r\n\r\nlet { ccclass, property } = cc._decorator\r\n\r\n// const Hint_Level_Table = {\r\n//     [13]: 'r0954sbep28',\r\n//     [17]: 'e0954mp3sjt',\r\n//     [18]: 'u0954mcymrb',\r\n// }\r\n\r\nconst COS_URL = \"https://video-1256898079.cos.ap-guangzhou.myqcloud.com/\";\r\n@ccclass\r\nexport default class HintButton extends mvcView {\r\n\r\n    @property(cc.Animation)\r\n    hintAnim: cc.Animation = null\r\n\r\n    onLoad() {\r\n        this.registerSubViews(IconSov)\r\n        this.onClick(this.node, this.click_hint);\r\n        evt.on(\"Game.onLevelLoaded\", this.onLevelChanged, this)\r\n        // evt.on(\"Game.hintUser\", this.onHintUser, this)\r\n    }\r\n\r\n    onDestroy() {\r\n        evt.off(this)\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    isInHint = false;\r\n\r\n    onHintUser() {\r\n        // if (this.isInHint) return;\r\n        // if (window.tt || window.qq) { return }\r\n        // let lv_tb;\r\n        // if (PlayerInfo.isPlayingDaily) {\r\n        //     lv_tb = csv.daily_level.get(PlayerInfo.playingDailyLevel);\r\n        // } else {\r\n        //     lv_tb = csv.level.get(PlayerInfo.playinglevel);\r\n        // }\r\n        // if (lv_tb == null) return;\r\n        // let hint_video = lv_tb.hint_video;\r\n        // if (hint_video != \"\") {\r\n        //     this.hintAnim && this.hintAnim.play(\"hint\")\r\n        //     this.isInHint = true\r\n        // }\r\n    }\r\n\r\n    hint() {\r\n        // let lv_tb = csv.level.get(PlayerInfo.playinglevel);\r\n        // let lv_tb;\r\n        // if (PlayerInfo.isPlayingDaily) {\r\n        //     lv_tb = csv.daily_level.get(PlayerInfo.playingDailyLevel);\r\n        // } else {\r\n        //     lv_tb = csv.level.get(PlayerInfo.playinglevel);\r\n        // }\r\n        // let hint_video = lv_tb.hint_video;\r\n        // let hint_video2 = COS_URL + lv_tb.hint_video2;\r\n        // if (hint_video) {\r\n        //     Platform.playVideo(hint_video, hint_video2).then(v => {\r\n        //         this.isInHint = false;\r\n        //         this.hintAnim.stop(\"hint\");\r\n        //     });\r\n        // }\r\n    }\r\n\r\n    click_hint() {\r\n        WeakNetGame.doChoice(\"SOV_Level_Hint\", this.hint, this);\r\n    }\r\n\r\n    onLevelChanged(lv) {\r\n        if (window.tt || window.qq) {\r\n            this.node.active = false;\r\n            return;\r\n        }\r\n        let lv_tb;\r\n        if (PlayerInfo.isPlayingDaily) {\r\n            lv_tb = csv.daily_level.get(lv);\r\n        } else {\r\n            lv_tb = csv.level.get(lv);\r\n        }\r\n\r\n        let hint_video = lv_tb.hint_video;\r\n        if (hint_video) {\r\n            this.node.active = true;\r\n        } else {\r\n            this.node.active = false;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n\r\n    onShown() {\r\n        // this.render\r\n\r\n    }\r\n\r\n}"]}