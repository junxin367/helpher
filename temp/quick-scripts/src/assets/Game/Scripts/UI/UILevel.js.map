{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UILevel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\n\nimport mvcView from \"../../../framework/ui/mvcView\";\nimport { LevelInfo } from \"../Common/LevelInfo\";\nimport ccUtil from \"../../../framework/utils/ccUtil\";\nimport { SettingInfo } from \"../../../framework/extension/weak_net_game/SettingInfo\";\nimport Device from \"../../../framework/misc/Device\";\nimport { DailyLevelInfo } from \"../Common/DailyLevelInfo\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport { ChapterlInfo } from \"../Common/ChapterlInfo\";\nimport Const from \"../Common/Const\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UILevel extends mvcView {\n\n    @property(cc.Layout)\n    layout: cc.Layout = null;\n\n    @property(cc.Label)\n    title: cc.Label = null;\n\n    @property(cc.Button)\n    last_btn: cc.Button = null;\n\n    @property(cc.Button)\n    next_btn: cc.Button = null;\n\n    datas: LevelInfo[] = [];\n\n    id: number = 0;\n\n    onLoad() {\n\n    }\n\n    onShow(id?) {\n\n        if (PlayerInfo.isPlayingDaily) {\n\n            let datas: DailyLevelInfo[] = [];\n            csv.daily_level.values.map(e => {\n                if (PlayerInfo.isGreaterDate(e.day)) {\n                    let data = ccUtil.get(DailyLevelInfo, e.id);\n                    datas.push(data);\n                }\n            });\n            this.register(this.layout, _ => datas);\n            this.title.string = \"关卡挑战\";\n            this.last_btn.node.active = false;\n            this.next_btn.node.active = false;\n        } else {\n            this.datas = [];\n            this.id = id;\n            csv.level.values.map(e => {\n                let data = ccUtil.get(LevelInfo, e.id);\n                if (data.chapter == id)\n                    this.datas.push(data);\n            });\n            this.register(this.layout, _ => this.datas);\n            this.title.string = ccUtil.get(ChapterlInfo, id).name;\n            console.log(Math.ceil(PlayerInfo.level / 10), id);\n            if (id == 1) {\n                this.next_btn.interactable = true;\n                this.last_btn.node.active = false;\n            }\n            else if (id == Const.Chapter_Unlock || (id >= Math.ceil(PlayerInfo.level / 10))) {\n                this.last_btn.node.active = true;\n                this.next_btn.interactable = false;\n            }\n            else {\n                this.last_btn.node.active = true;\n                this.next_btn.interactable = true;\n\n            }\n        }\n        this.render();\n    }\n\n    start() {\n\n    }\n\n    clic_close() {\n\n\n        vm.hide(this);\n    }\n\n    click_last() {\n        this.id -= 1;\n        vm.show(\"Prefabs/UI/UILevel\", this.id);\n    }\n\n    click_next() {\n        this.id += 1;\n        vm.show(\"Prefabs/UI/UILevel\", this.id);\n    }\n\n    // update (dt) {}\n}\n"]}