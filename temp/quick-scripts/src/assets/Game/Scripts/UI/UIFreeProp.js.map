{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIFreeProp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ccUtil from \"../../../framework/utils/ccUtil\";\r\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\r\nimport { UserInfo } from \"../../../framework/extension/weak_net_game/UserInfo\";\r\nimport { EaseType } from \"../../../framework/extension/qanim/EaseType\";\r\nimport { evt } from \"../../../framework/core/event\";\r\n\r\nlet { ccclass, property } = cc._decorator\r\n@ccclass\r\nexport default class UIFreeProp extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    itemLayout: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    dialog: cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    particle: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    iconNode: cc.Node = null;\r\n\r\n    @property(cc.Button)\r\n    btn_get: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    node_btn_close: cc.Node = null;\r\n\r\n    hideCallback: Function;\r\n\r\n    onLoad() {\r\n        this.node_btn_close.active = false\r\n    }\r\n\r\n    onShown(callback) {\r\n        this.hideCallback = callback;\r\n        let pos = this.itemLayout.position;\r\n        this.dialog.active = false;\r\n        this.itemLayout.setPosition(0, 0)\r\n        this.itemLayout.scale = 0;\r\n        cc.tween(this.itemLayout)\r\n            .to(0.5, { scale: 1 }, { easing: \"backInOut\" })\r\n            .delay(1.0)\r\n            .to(0.5, { position: pos }, { easing: \"sineInOut\" })\r\n            .call(() => {\r\n                this.dialog.active = true;\r\n                this.dialog.scale = 0;\r\n                cc.tween(this.dialog).to(0.5, { scale: 1 }, { easing: \"sineInOut\" }).start()\r\n            })\r\n            .start();\r\n    }\r\n\r\n    res_names = [\"snowball_num\", \"magnet_num\", \"gun_num\"]\r\n\r\n    async click_get() {\r\n        this.btn_get.interactable = false;\r\n        let children = this.itemLayout.children;\r\n        for (let i = 0; i < 3; i++) {\r\n            let child = children[i];\r\n            await ccUtil.playFlyCoin(this.particle, child, ccUtil.getWorldPosition(this.iconNode), ccUtil.getWorldPosition(child), { num: 1, dur: 0.8 });\r\n            UserInfo.addData(this.res_names[i], 3, true);\r\n            cc.tween(child).to(0.2, { scale: 1.3 }).to(0.1, { scale: 1 }).start();\r\n        }\r\n        this.node_btn_close.active = true;\r\n    }\r\n\r\n    click_close() {\r\n        vm.hide(this);\r\n    }\r\n\r\n    onHidden() {\r\n        if (this.hideCallback)\r\n            this.hideCallback.call(this);\r\n    }\r\n}"]}