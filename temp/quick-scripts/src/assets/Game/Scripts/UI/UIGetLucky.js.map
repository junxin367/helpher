{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIGetLucky.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport mvcView from \"../../../framework/ui/mvcView\";\nimport Signal from \"../../../framework/core/Signal\";\nimport ccUtil from \"../../../framework/utils/ccUtil\";\nimport { TurntableInfo } from \"../Common/TurntableInfo\";\nimport { UserInfo } from \"../../../framework/extension/weak_net_game/UserInfo\";\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\nimport { DrawType } from \"./UILucky\";\nimport { Toast } from \"../../../framework/ui/ToastManager\";\nimport { evt } from \"../../../framework/core/event\";\nimport display from \"../../../framework/misc/display\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n\n@ccclass\nexport default class UIGetLucky extends mvcView {\n\n    @property(cc.Node)\n    node_close: cc.Node = null;\n\n    @property(cc.Layout)\n    layout: cc.Layout = null;\n\n    item_id = 0;\n\n    _closeSignal = new Signal();\n\n    datas: TurntableInfo[] = [];\n\n    onLoad() {\n        this.register(this.layout, _ => this.datas);\n    }\n\n    onShown(id, closeCallback, target, doubleEnabled) {\n        this._closeSignal.on(closeCallback, this);\n        this.item_id = id;\n\n        this.datas.splice(0);\n        let data = ccUtil.get(TurntableInfo, id);\n        if (data.type === DrawType.Gift) {\n            csv.turntable.values.filter(_ => {\n                return DrawType.Gun === _.type || DrawType.Frozen === _.type || DrawType.Magnet === _.type;\n            }).forEach(_ => {\n                let d = ccUtil.get(TurntableInfo, _.id);\n                d.num = 1;\n                this.datas.push(d);\n            });\n        } else {\n            this.datas.push(data);\n        }\n        this.render();\n    }\n\n    click_no() {\n        let data = ccUtil.get(TurntableInfo, this.item_id);\n        vm.hide(this);\n        if (this.item_id === 1 || this.item_id === 3) {\n            PlayerInfo.addLabour(data.num);\n            evt.emit(\"Game.getTili\", display.center, data.num);\n        }\n    }\n\n    onHidden() {\n        let data = ccUtil.get(TurntableInfo, this.item_id);\n        if (this.item_id !== 1 && this.item_id !== 3) {\n            this._closeSignal.fire(data);\n        } else {\n            this.scheduleOnce(_ => this._closeSignal.fire(data), 1);\n        }\n    }\n}\n"]}