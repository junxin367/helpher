{"version":3,"sources":["assets\\Game\\Scripts\\UI\\UIEnergeyPackage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import mvcView from \"../../../framework/ui/mvcView\";\r\nimport IconSov from \"../../../framework/extension/weak_net_game/IconSov\";\r\nimport WeakNetGame from \"../../../framework/extension/weak_net_game/WeakNetGame\";\r\nimport { PlayerInfo } from \"../Common/Base/PlayerInfo\";\r\nimport { Toast } from \"../../../framework/ui/ToastManager\";\r\nimport { evt } from \"../../../framework/core/event\";\r\nimport display from \"../../../framework/misc/display\";\r\nimport StatHepler from \"../../../framework/extension/aldsdk/StatHelper\";\r\nimport wegame from \"../sdk/wegame\";\r\nimport { CloudFuncType } from \"../Common/CloudFuncTypes\";\r\nimport Game from \"../Game\";\r\nimport Platform from \"../../../framework/extension/Platform\";\r\n\r\nlet { ccclass, property } = cc._decorator\r\n@ccclass\r\nexport default class UIEnergeyPackage extends mvcView {\r\n    @property(cc.Label)\r\n    label_tips: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    label_energy: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    btn_claim: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    btn_double: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    btn_nothanks: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    btn_jia: cc.Node = null\r\n\r\n    @property(cc.Node)\r\n    sdk: cc.Node = null;\r\n    youlike: cc.Node = null;\r\n\r\n    successClaim: boolean = false;\r\n\r\n    onLoad() {\r\n        this.register(this.label_tips, () => `恭喜你获得${csv.Config.EneryPackage_Count}体力，快来领取吧！`)\r\n        this.register(this.label_energy, () => csv.Config.EneryPackage_Count)\r\n        this.register(this.btn_claim, this.click_claim)\r\n        this.register(this.btn_double, this.click_double)\r\n        this.register(this.btn_nothanks, this.click_cancel)\r\n        this.registerSubViews(IconSov);\r\n\r\n    }\r\n\r\n\r\n\r\n    start() {\r\n        // if (PlayerInfo.isShowSDK()) {\r\n        //     let youlike = window['zzsdkui'].youlike(2, 0, 400);\r\n        //     youlike && this.sdk.addChild(youlike);\r\n        //     youlike.scale = 1;\r\n        // }\r\n    }\r\n    onHidden() {\r\n        evt.off(this);\r\n    }\r\n    onDestroy() {\r\n        evt.off(this);\r\n    }\r\n    onResume() {\r\n        Platform.reloadBannerAd();\r\n    }\r\n    onShown() {\r\n        evt.on(\"Game.Resume\", this.onResume, this);\r\n        this.render();\r\n        this.successClaim = false;\r\n        if (window.qq || window.tt) {\r\n            this.btn_nothanks.node.active = true;\r\n            this.btn_jia.active = false;\r\n            Platform.showBannerAd();\r\n            return;\r\n        }\r\n        // if (wegame.isCheatOpen(CloudFuncType.Banner_move)) {\r\n        //     wegame.enableFakeForAdClick(this.btn_nothanks.node, this.btn_jia, 2, () => {\r\n        //         if (PlayerInfo.isShowSDK()) {\r\n        //             if (this.youlike == null) {\r\n        //                 this.youlike = window['zzsdkui'].youlike(2, null, null, null, function () {\r\n        //                     Game.instance.interfull.active = true;\r\n        //                 }.bind(this));\r\n        //                 if (this.youlike) {\r\n        //                     this.sdk.addChild(this.youlike);\r\n        //                     this.youlike.scale = 1;\r\n        //                 }\r\n        //             }\r\n        //             if (this.youlike)\r\n        //                 this.youlike.active = true;\r\n        //         }\r\n        //     });\r\n        // } else {\r\n        this.btn_nothanks.node.active = true;\r\n        this.btn_jia.active = false;\r\n        // }\r\n    }\r\n\r\n    click_cancel() {\r\n        vm.hide(this);\r\n    }\r\n\r\n    click_claim() {\r\n        // if (this.checkEnergyFull()) return;\r\n        this.claim()\r\n    }\r\n\r\n    click_double() {\r\n        // if (this.checkEnergyFull()) return;\r\n        WeakNetGame.doChoice(\"SOV_EneryPackage\", this.onClaimDouble, this, () => {\r\n            StatHepler.sendPath(\"领取体力大礼包\", \"状态\", \"领取失败\")\r\n        })\r\n    }\r\n\r\n    checkEnergyFull() {\r\n        if (PlayerInfo.labour >= csv.Config.Max_Energy) {\r\n            Toast.make('体力已满!')\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n\r\n    onClaimDouble() {\r\n        this.claim(1);\r\n        // vm.hide(this);\r\n    }\r\n\r\n    claim(mult = 1) {\r\n        if (this.successClaim) return;\r\n        let add = mult * csv.Config.EneryPackage_Count;\r\n        let old = PlayerInfo.labour;\r\n        let r = PlayerInfo.labour + add;\r\n        // PlayerInfo.labour = Math.min(r, csv.Config.Max_Energy);\r\n        PlayerInfo.labour = r;\r\n        PlayerInfo.save(\"labour\")\r\n        evt.emit(\"Game.getTili\", display.center, PlayerInfo.labour - old)\r\n        // if (PlayerInfo.labour >= csv.Config.Max_Energy) {\r\n        //     Toast.make(\"体力已恢复满!\")\r\n        // } else {\r\n        //     Toast.make(\"获得\" + add + \"点体力\");\r\n        // }\r\n        Toast.make(\"获得\" + add + \"点体力\");\r\n        this.successClaim = true;\r\n        StatHepler.sendPath(\"领取体力大礼包\", \"状态\", \"领取成功\")\r\n    }\r\n\r\n    // onHidden() {\r\n    //     if (this.successClaim) {\r\n    //         vm.show(\"Prefabs/UI/UIDoubleGet\", csv.Config.EneryPackage_Count);\r\n    //     }\r\n    // }\r\n\r\n}"]}