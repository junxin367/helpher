{"version":3,"sources":["assets\\Game\\Scripts\\Box.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA0C;AAC1C,oDAAiD;AACjD,uDAAkD;AAClD,gEAAwD;AACxD,sDAAiD;AAE3C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAiC,uBAAY;IAA7C;QAAA,qEAmDC;QAhDG,cAAQ,GAAY,IAAI,CAAC;QAEzB,wBAAwB;QAExB,iBAAW,GAAY,KAAK,CAAC;QAE7B,YAAM,GAAY,KAAK,CAAC;;QAyCxB,iBAAiB;IACrB,CAAC;IAxCG,oBAAM,GAAN;IACA,CAAC;IAED,mBAAK,GAAL;IAEA,CAAC;IAED,4BAAc,GAAd;QACI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,EAAE;YACzB,IAAI,IAAI,CAAC,MAAM,EAAE;gBACb,OAAO;aACV;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;aACI;YACD,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;IACL,CAAC;IAEK,uBAAS,GAAf;;;;;wBACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;wBAC5B,qBAAM,WAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAA;;wBAAlB,SAAkB,CAAA;wBAClB,gBAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAA;wBAC1B,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;;;;;KACpC;IAED,0BAAY,GAAZ;QACI,IAAI,IAAI,CAAC,WAAW;YAAE,OAAO;QAC7B,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;QAC3C,gBAAM,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC;QAChE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,oBAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC7B,CAAC;IAED,uBAAS,GAAT;QACI,WAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACO;IAHR,GAAG;QADvB,OAAO;OACa,GAAG,CAmDvB;IAAD,UAAC;CAnDD,AAmDC,CAnDgC,sBAAY,GAmD5C;kBAnDoB,GAAG","file":"","sourceRoot":"/","sourcesContent":["import SkeletonBase from \"./SkeletonBase\";\r\nimport { evt } from \"../../framework/core/event\";\r\nimport ccUtil from \"../../framework/utils/ccUtil\";\r\nimport { Toast } from \"../../framework/ui/ToastManager\";\r\nimport Device from \"../../framework/misc/Device\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Box extends SkeletonBase {\r\n\r\n    @property(cc.Node)\r\n    ani_node: cc.Node = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    open_status: boolean = false;\r\n\r\n    isover: boolean = false;\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    onBeginContact() {\r\n        if (this.node.name == \"box\") {\r\n            if (this.isover) {\r\n                return;\r\n            }\r\n            this.isover = true;\r\n            this.onOpenBox();\r\n        }\r\n        else {\r\n            this.onOpenjiaBox();\r\n        }\r\n    }\r\n\r\n    async onOpenBox() {\r\n        this.ani_node.active = true;\r\n        await evt.sleep(1)\r\n        Device.playSfx(\"open-box\")\r\n        vm.show(\"Prefabs/UI/UIBoxAward\");\r\n    }\r\n\r\n    onOpenjiaBox() {\r\n        if (this.open_status) return;\r\n        let spr = this.node.getComponent(cc.Sprite)\r\n        ccUtil.setDisplay(spr, \"Img/\" + spr.spriteFrame.name + \"_kong\");\r\n        this.open_status = true;\r\n        Toast.make(\"可惜。。。箱子是空的\");\r\n    }\r\n\r\n    onDestroy() {\r\n        evt.off(this);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}