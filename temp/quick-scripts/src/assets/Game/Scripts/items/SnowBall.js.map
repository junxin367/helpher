{"version":3,"sources":["assets\\Game\\Scripts\\items\\SnowBall.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+EAAwF;AACxF,+CAA0C;AAC1C,mEAA8D;AAExD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsC,4BAAY;IAAlD;QAAA,qEA0CC;QAzCG,gBAAU,GAAe,IAAI,CAAC;QAE9B,YAAM,GAAY,IAAI,CAAC;QACvB,QAAE,GAAY,IAAI,CAAC;;IAsCvB,CAAC;IArCG,yBAAM,GAAN;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,oBAAU,CAAC,CAAC;QACrD,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,EAAE,CAAC;IAClC,CAAC;IAED,2BAAQ,GAAR;QACI,oDAAoD;IAExD,CAAC;IAED,4BAAS,GAAT;QACI,oDAAoD;IAExD,CAAC;IAGD,yBAAM,GAAN;QACI,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;YAAE,OAAO;QACrC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QACpC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;QACzB,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAA;QAC5C,IAAI,MAAM,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;QACxB,IAAI,MAAM,GAAG,IAAI,EAAE;YACf,YAAY;YACZ,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,sBAAY,CAAC,CAAC;YACxD,aAAa;YACb,IAAI,GAAG,GAAG,qBAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;YACrD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;YACd,KAAK,CAAC,IAAI,EAAE,CAAC;YACb,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;SACvB;IACL,CAAC;IAvCgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA0C5B;IAAD,eAAC;CA1CD,AA0CC,CA1CqC,EAAE,CAAC,SAAS,GA0CjD;kBA1CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import MoveEngine, { Behavior } from \"../../../framework/extension/movement/MoveEngine\";\r\nimport FreezeTarget from \"./FreezeTarget\";\r\nimport PoolManager from \"../../../framework/core/PoolManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SnowBall extends cc.Component {\r\n    moveEngine: MoveEngine = null;\r\n\r\n    target: cc.Node = null;\r\n    fx: cc.Node = null;\r\n    onLoad() {\r\n        this.moveEngine = this.getOrAddComponent(MoveEngine);\r\n        this.moveEngine.maxSpeed = 34;\r\n    }\r\n\r\n    onEnable() {\r\n        // this.moveEngine.changeBeheavior(Behavior.Arrive);\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        // this.moveEngine.changeBeheavior(Behavior.Simple);\r\n\r\n    }\r\n\r\n\r\n    update() {\r\n        if (!cc.isValid(this.target)) return;\r\n        let pos = this.target.getPosition();\r\n        pos.addSelf(cc.v2(0, 80))\r\n        let f = this.moveEngine.seek(pos);\r\n        this.moveEngine.applyForce(f);\r\n        let v = pos.subSelf(this.node.getPosition())\r\n        let distsq = v.magSqr();\r\n        if (distsq < 1000) {\r\n            //free enemy\r\n            let skill = this.target.getOrAddComponent(FreezeTarget);\r\n            //hit effect \r\n            let hit = PoolManager.get(\"Pool\").get(\"snowball-hit\")\r\n            hit.setPosition(this.node.position);\r\n            this.fx = hit;\r\n            skill.cast();\r\n            this.node.destroy();\r\n        }\r\n    }\r\n\r\n\r\n}"]}