{"version":3,"sources":["assets\\framework\\utils\\ccUtil.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import SpriteFrameCache from \"../misc/SpriteFrameCache\";\r\nimport { evt } from \"../core/event\";\r\nimport display from \"../misc/display\";\r\ninterface FlyCoinConfig { dur?: number, num?: number, interval?: number, random_length?: number, scale?: number, scaleTo?: number };\r\nexport default class ccUtil {\r\n    public static Instantiate(origin, position?: cc.Vec3, rotation?: cc.Quat): any {\r\n        let node = cc.instantiate(origin)\r\n        if (position)\r\n            node.position = position;\r\n        if (rotation)\r\n            node.rotation = rotation;\r\n        return node;\r\n    }\r\n\r\n    static loadJson(path) {\r\n        return new Promise((resolve, reject) => {\r\n            cc.resources.load(path, cc.JsonAsset, (errorcode, data) => {\r\n                resolve(data.json)\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    public static playParticles(ps: cc.ParticleSystem) {\r\n        let subs = ps[\"_subParticles\"]\r\n        if (subs == null) {\r\n            subs = ps.node.getComponentsInChildren(cc.ParticleSystem);\r\n            ps[\"_subParticles\"] = subs;\r\n        }\r\n        subs.forEach(v => {\r\n            v.play()\r\n        });\r\n    }\r\n\r\n    public static playAnimation(anim: cc.Animation, stopAfter: number) {\r\n        anim.play();\r\n        if (stopAfter > 0)\r\n            evt.sleep(stopAfter).then(v => {\r\n                anim.stop();\r\n            })\r\n\r\n    }\r\n    static newButton(target: cc.Node, component: string, handler: string, listener?: cc.Node, data?: string) {\r\n        listener = listener || target;\r\n        let button = target.getOrAddComponent(cc.Button);\r\n        button.transition = cc.Button.Transition.SCALE;\r\n        if (button.clickEvents.length > 0) {\r\n            let clickEvent = button.clickEvents[0]\r\n            clickEvent.target = listener\r\n            clickEvent.customEventData = data;\r\n            clickEvent.component = component;\r\n            clickEvent.handler = handler;\r\n        } else {\r\n            button.clickEvents.push(ccUtil.handler(listener, component, handler, data))\r\n        }\r\n        return button;\r\n    }\r\n\r\n\r\n    static handler(target: cc.Node, component: string, handler: string, bindstr?: string) {\r\n        let eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.component = component\r\n        eventHandler.target = target;\r\n        eventHandler.handler = handler\r\n        eventHandler.customEventData = bindstr;\r\n        return eventHandler;\r\n    }\r\n\r\n    static allInfos: any = {}; // 所有信息\r\n    static types = [];\r\n    static get<T>(cls: { prototype: T }, ...args): T {\r\n        //prototype.constructor.name 在js 编译后不可用\r\n        let tt = cls.prototype;\r\n        let idx = this.types.indexOf(tt);\r\n        if (idx == -1) {\r\n            this.types.push(tt);\r\n            idx = this.types.length - 1;\r\n        }\r\n        let models = this.allInfos[idx]\r\n        if (!models) {\r\n            models = {};\r\n            this.allInfos[idx] = models;\r\n        }\r\n        let _id = args.join(\"-\");\r\n        let info = models[_id];\r\n        if (!info) {\r\n            let c = cls as any;\r\n            info = new c(args)\r\n            // info = Reflect.construct(c, args);\r\n            models[_id] = info;\r\n        }\r\n        return info as T;\r\n    }\r\n\r\n\r\n    static isGreaterDays(before, num = 7) {\r\n        let now = new Date();\r\n        var diff = now.getTime() - before\r\n        if (diff > 86400000 * num) // 24*60*60*1000\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static setDisplay(sp, url, callback?) {\r\n        if (typeof (url) == 'string') {\r\n            return SpriteFrameCache.instance.getSpriteFrame(url).then(sf => {\r\n                try {\r\n                    sp.spriteFrame = sf\r\n                    callback && callback()\r\n                } catch (e) {\r\n                    console.warn(e)\r\n                }\r\n            }).catch(e => console.warn(e))\r\n        } else {\r\n            if (url instanceof cc.SpriteFrame)\r\n                sp.spriteFrame = url;\r\n        }\r\n\r\n    }\r\n\r\n    static getOrAddComponent<T extends cc.Component>(obj: any, type: { prototype: T }): T {\r\n        return obj.getOrAddComponent(type);\r\n    }\r\n\r\n\r\n    static formatSeconds(time) {\r\n        var h = Math.floor(time / 3600);\r\n        var m = Math.floor(time / 60 - h * 60);\r\n        var s = Math.floor(time - m * 60 - h * 3600);\r\n        var start = h > 0 ? (h < 10 ? \"0\" + h : h) + \":\" : \"\";\r\n        var end = m + \":\" + (s < 10 ? \"0\" + s : s);\r\n        return start + end;\r\n    }\r\n\r\n    static convertCameraWorldPosition(worldpos, cameraFrom: cc.Camera, cameraTo: cc.Camera) {\r\n        let pos = cameraFrom.getWorldToScreenPoint(worldpos, cc.Vec2.ZERO)\r\n        let from = cameraTo.getScreenToWorldPoint(pos, cc.Vec2.ZERO)\r\n        return from;\r\n    }\r\n\r\n    static setButtonEnabled(btn, b) {\r\n        let node = btn.node;\r\n        if (btn instanceof cc.Node) {\r\n            btn = btn.getComponent(cc.Button)\r\n            node = btn;\r\n        }\r\n        if (btn) {\r\n            node.opacity = b ? 255 : 155;\r\n            btn.interactable = b\r\n        }\r\n    }\r\n\r\n    static find<T extends cc.Component>(path: string, node: cc.Node, compType: { prototype: T }): T {\r\n        return cc.find(path, node).getComponent(compType);\r\n    }\r\n\r\n\r\n    static sign(x) {\r\n        return x > 0 ? 1 : -1;\r\n    }\r\n\r\n    /**\r\n * invoke every components \r\n * @param node \r\n * @param funcname \r\n * @param params \r\n */\r\n    static broadCast(node, funcname, ...params): Promise<any> {\r\n        return Promise.race(\r\n            node.getComponents(cc.Component).filter(v => v[funcname] != null).map(v => {\r\n                return new Promise((resolve) => {\r\n                    let ret = v[funcname].call(v, ...params)\r\n                    resolve(ret);\r\n                })\r\n            })\r\n        )\r\n    }\r\n\r\n    /**\r\n     * attempat to call func of one component which succeded \r\n     * @param node \r\n     * @param funcname \r\n     * @param params \r\n     */\r\n    static sendMessage(node: cc.Node, funcname, ...params) {\r\n        let ret = null;\r\n        node.getComponents(cc.Component).some(v => {\r\n            let f = v[funcname]\r\n            if (f) {\r\n                ret = f.call(v, ...params)\r\n                return true\r\n            }\r\n            return false;\r\n        })\r\n        return ret;\r\n    }\r\n\r\n    //高效率getboundingbox ,不同于node.getBoundingBoxToWorld\r\n    static getWorldBoundingBox(node: cc.Node) {\r\n        let parent = node.parent\r\n        if (parent == null) return;\r\n        let box = node.getBoundingBox();\r\n        let xy = cc.v2(box.xMin, box.yMin)\r\n        let xy2 = cc.v2(box.xMax, box.yMax);\r\n        xy = parent.convertToWorldSpaceAR(xy);\r\n        xy2 = parent.convertToWorldSpaceAR(xy2);\r\n        let wh = xy2.subSelf(xy);\r\n        return cc.rect(xy.x, xy.y, wh.x, wh.y)\r\n    }\r\n\r\n    static setParent(node, newParent, keepWorldPosition = false) {\r\n        let oldParent = node.parent;\r\n        if (oldParent == null) return;\r\n        let worldPos = oldParent.convertToWorldSpaceAR(node.position);\r\n        node.removeFromParent();\r\n        node.parent = newParent;\r\n        if (keepWorldPosition) {\r\n            node.position = newParent.convertToNodeSpaceAR(worldPos);\r\n        }\r\n    }\r\n\r\n\r\n    static getWorldPosition(node: cc.Node) {\r\n        if (node.parent == null) return;\r\n        let xy = cc.v2(node.x, node.y)\r\n        return node.parent.convertToWorldSpaceAR(xy);\r\n    }\r\n\r\n\r\n    static changeParent(node: cc.Node, parentNode: cc.Node, zindex = 0) {\r\n        let pos = ccUtil.getWorldPosition(node);\r\n        node.removeFromParent();\r\n        parentNode.addChild(node, zindex);\r\n        pos = parentNode.convertToNodeSpaceAR(pos)\r\n        node.setPosition(pos)\r\n    }\r\n\r\n    static moveToOrigin(node, dur, ease?) {\r\n        node.runAction(cc.moveTo(dur, cc.Vec2.ZERO).easing(ease || cc.easeSineOut()))\r\n    }\r\n    static _tmp_vec2: cc.Vec2 = cc.v2()\r\n    static default_flycoin_config = {\r\n        dur: 0.5,\r\n        num: 5,\r\n        interval: 0.1,\r\n        random_length: 0,\r\n        scale: 1,\r\n        scaleTo: 1\r\n    }\r\n\r\n    /**播放 飞行动画 简化版本 */\r\n    static async playFly(template: cc.Node, dur?, num?, interval?) {\r\n        this.playFlyCoin(template, template.parent, display.center, ccUtil.getWorldPosition(template), { dur, num, interval })\r\n    }\r\n\r\n    //播放飞行动画 \r\n    static async playFlyCoin(template: cc.Node | cc.Prefab = null, parent: cc.Node = null, from: cc.Node | cc.Vec2 = display.center, to: cc.Vec2 = display.leftTop, config?: FlyCoinConfig) {\r\n        try {\r\n\r\n            if (config == null) {\r\n                config = this.default_flycoin_config\r\n            }\r\n            config.num = config.num || this.default_flycoin_config.num;\r\n            for (var i = 0; i < config.num; i++) {\r\n                let node = cc.instantiate(template) as cc.Node;\r\n                node.parent = parent;\r\n                let f = from;\r\n                if (from instanceof cc.Node) {\r\n                    f = ccUtil.getWorldPosition(from);\r\n                } else {\r\n                    f = from;\r\n                }\r\n                f = parent.convertToNodeSpaceAR(f)\r\n                let target = parent.convertToNodeSpaceAR(to);\r\n                if (config.random_length > 0) {\r\n                    let round = cc.Vec2.random(this._tmp_vec2, config.random_length || this.default_flycoin_config.random_length)\r\n                    node.setPosition(f.add(round));\r\n                } else {\r\n                    node.setPosition(f)\r\n                }\r\n                let duration = config.dur || this.default_flycoin_config.dur\r\n                cc.tween(node).to(duration, { position: target }, { easing: \"sineInOut\" }).call(() => {\r\n                    node.destroy();\r\n                }).start();\r\n                //缩放动画\r\n                if (config.scale) {\r\n                    node.scale = config.scale;\r\n                    cc.tween(node).to(duration, { scale: config.scaleTo }).start();\r\n                }\r\n                await evt.sleep((config.interval || this.default_flycoin_config.interval))\r\n            }\r\n        } catch (e) {\r\n            console.warn(e);\r\n        }\r\n    }\r\n\r\n    public static getRes<T extends cc.Asset>(path, type: { prototype: T }): Promise<T> {\r\n        return new Promise((resolve, reject) => {\r\n            cc.resources.load(path, type, (err, res) => {\r\n                if (err) return reject(err)\r\n                resolve(res);\r\n            })\r\n        })\r\n    }\r\n\r\n}"]}