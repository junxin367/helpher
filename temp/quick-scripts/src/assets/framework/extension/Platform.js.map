{"version":3,"sources":["assets\\framework\\extension\\Platform.ts"],"names":[],"mappings":";;;;;;AAAA,yCAAoC;AACpC,mCAAoC;AAEpC,6DAAwD;AACxD,mDAA2C;AAC3C,uCAAoC;AACpC,mDAAiD;AACjD,oCAAmC;AACnC,uCAAsC;AAItC,IAAK,UAKJ;AALD,WAAK,UAAU;IACX,4CAAS,CAAA;IACT,6CAAI,CAAA;IACJ,uDAAS,CAAA;IACT,6CAAI,CAAA;AACR,CAAC,EALI,UAAU,KAAV,UAAU,QAKd;AAuBD;IAAA;IA6vBA,CAAC;IAlvBU,kBAAS,GAAhB;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,UAAU;YACV,IAAI,QAAQ,GAAG,WAAK,CAAC,QAAQ,CAAA;YAC7B,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,EAAE;gBAC7B,OAAO,QAAQ,CAAC,MAAM,CAAA;aACzB;iBAAM;gBACH,OAAO,EAAE,CAAA;aACZ;SACJ;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC1C,OAAO;SACV;aAAM;YACH,OAAO,KAAK,CAAA;SACf;IACL,CAAC;IAEM,gBAAO,GAAd;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACnC,OAAO;SACV;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC9C,OAAO,CAAC,WAAK,CAAC,QAAQ,IAAI,WAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAA;SAC7D;aAAM;YACH,OAAO,MAAM,CAAA;SAChB;IACL,CAAC;IAEM,gBAAO,GAAd;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACnC,OAAO;SACV;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC9C,wNAAwN;YACxN,IAAI,QAAQ,GAAG,WAAK,CAAC,QAAQ,CAAA;YAC7B,IAAI,QAAQ,IAAI,QAAQ,CAAC,SAAS,EAAE;gBAChC,OAAO,QAAQ,CAAC,SAAS,CAAA;aAC5B;iBAAM;gBACH,OAAO,2CAA2C,CAAA;aACrD;SACJ;QACD,OAAO,2CAA2C,CAAA;IACtD,CAAC;IAGM,qBAAY,GAAnB,UAAoB,MAAM;QACtB,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SACtC;aAAM;YACH,0BAAgB,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,UAAA,EAAE,IAAI,OAAA,MAAM,CAAC,WAAW,GAAG,EAAE,EAAvB,CAAuB,CAAC,CAAA;SACnG;IACL,CAAC;IAEM,aAAI,GAAX;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;YACtC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;SACzC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAE7C;IACL,CAAC;IAIM,cAAK,GAAZ,UAAa,CAAE;QACX,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,WAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;SACjB;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAC7C;IACL,CAAC;IAED,uBAAuB;IACvB,mDAAmD;IACnD,oCAAoC;IACpC,eAAe;IACf,4CAA4C;IAC5C,gIAAgI;IAChI,mCAAmC;IACnC,mCAAmC;IACnC,+CAA+C;IAC/C,4CAA4C;IAC5C,QAAQ;IACR,IAAI;IAGG,kBAAS,GAAhB;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,OAAO,WAAK,CAAC,SAAS,EAAS,CAAC;SACnC;aAAM;YACH,IAAI,QAAQ,GAAG,EAAkB,CAAA;YACjC,QAAQ,CAAC,SAAS,GAAG,gGAAgG,CAAA;YACrH,QAAQ,CAAC,IAAI,GAAG,OAAO;gBACnB,QAAQ,CAAC,MAAM,GAAG,CAAC;gBACnB,QAAQ,CAAC,QAAQ,GAAG,YAAY,CAAA;YACpC,OAAO,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACpC;IACL,CAAC;IAED,oBAAoB;IACb,8BAAqB,GAA5B,UAA6B,UAA+B,EAAE,IAAkB;QAC5E,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,YAAY,CAAC,UAAA,CAAC;YACf,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;QACjC,CAAC,EAAE,GAAG,CAAC,CAAA;IACX,CAAC;IAIa,kBAAS,GAAvB,UAAwB,EAAE;QACtB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAA;IACpB,CAAC;IAIM,kBAAS,GAAhB,UAAiB,GAAgB,EAAE,MAAO;QACtC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,SAAS,CAAA;QACvC,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,KAAK,CAAA;QAC/B,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,WAAK,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;YACrC,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;SACxC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAC7C;QACD,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAGM,kBAAS,GAAhB;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SACtC;QACD,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAGM,yBAAgB,GAAvB;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,OAAO,EAAE,CAAC,oBAAoB,EAAE,CAAA;SACnC;QACD,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAA;IAClC,CAAC;IAGM,gBAAO,GAAd;QACI,OAAO,EAAE,CAAA;IACb,CAAC;IAGM,gBAAO,GAAd,UAAe,SAAsB,EAAE,QAAS,EAAE,OAAc;QAAd,wBAAA,EAAA,cAAc;QAC5D,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAA;IAC9D,CAAC;IAEM,cAAK,GAAZ,UAAa,OAAQ;QACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;IACnD,CAAC;IAGM,0BAAiB,GAAxB,UAAyB,MAAM,EAAE,UAAuB,EAAE,QAAS,EAAE,MAAO,EAAE,OAAc;QAAd,wBAAA,EAAA,cAAc;QACxF,UAAU,GAAG,UAAU,IAAI,IAAI,CAAC,kBAAkB,CAAA;QAClD,IAAI,SAAS,CAAC;QACd,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YAC3B,SAAS,GAAG,CAAC,CAAC,gBAAgB,CAAC,UAAU,CAAc,CAAC;SAC3D;QACD,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;QACzB,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,IAAI,GAAG,SAAA,CAAC;YACR,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,GAAG,GAAG,aAAK,CAAC;aACf;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,GAAG,GAAG,aAAK,CAAC;aACf;iBAAM;gBACH,GAAG,GAAG,WAAK,CAAA;aACd;YACD,MAAM,GAAG,MAAM,IAAI,EAAE,CAAA;YACrB,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC5B,GAAG,CAAC,SAAS,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YACjC,IAAI,GAAC,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;YAC5B,QAAQ,CAAC,uBAAuB,CAAC,EAAE,CAAC,UAAC,GAAG;gBACpC,QAAQ,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC;gBACzC,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,GAAC,CAAC;gBACjC,IAAI,CAAC,GAAG,OAAO,EAAE;oBACb,0BAA0B;oBAC1B,IAAI;oBACJ,UAAU,CAAC,UAAA,CAAC;wBACR,IAAI,QAAQ;4BACR,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBACjC,CAAC,EAAE,GAAG,CAAC,CAAA;oBACP,SAAS;oBACT,gCAAgC;oBAChC,+BAA+B;oBAC/B,4BAA4B;oBAC5B,4BAA4B;oBAC5B,wCAAwC;oBACxC,kBAAkB;oBAClB,QAAQ;oBACR,YAAY;oBACZ,wBAAwB;oBACxB,uCAAuC;oBACvC,QAAQ;oBACR,IAAI;iBACP;qBAAM;oBACH,aAAa;oBACb,IAAI,QAAQ;wBACR,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBAC7B,+BAA+B;iBAClC;YACL,CAAC,CAAC,CAAA;SACL;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAE7C;aAAM;YACH,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;SACvC;IACL,CAAC;IAMM,qBAAY,GAAnB,UAAoB,CAAC;QACjB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC5B,CAAC;IAEM,yBAAgB,GAAvB,UAAwB,CAAC;QACrB,OAAO,IAAI,CAAC,aAAa,CAAA;IAC7B,CAAC;IAEM,0BAAiB,GAAxB,UAAyB,CAAC;QACtB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC/B,CAAC;IAEM,qBAAY,GAAnB,UAAoB,KAAa,EAAE,KAAa;QAC5C,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC/C,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SAC7E;IACL,CAAC;IAKM,oBAAW,GAAlB,UAAmB,QAAQ,EAAE,MAAO,EAAE,kBAAmB;QACrD,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;QAC1B,IAAI,CAAC,IAAI,CAAC,aAAa;YAAE,OAAO;QAChC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAClB,IAAI,GAAG,SAAA,CAAC;YACR,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,GAAG,GAAG,aAAK,CAAC;aACf;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,GAAG,GAAG,aAAK,CAAC;aACf;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,GAAG,GAAG,WAAK,CAAA;aACd;iBAAI;gBACD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,OAAO;aACV;YACD,IAAI,GAAG,EAAE;gBACL,GAAG,CAAC,WAAW,CAAC,UAAC,IAAI,EAAE,OAAO;oBAC1B,IAAI,IAAI,IAAI,MAAM,EAAE;wBAChB,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;qBACpC;yBAAM,IAAI,IAAI,IAAI,MAAM,EAAE;wBACvB,EAAE,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;qBAC/B;yBACI,IAAI,IAAI,IAAI,OAAO,EAAE;wBACtB,QAAQ,CAAC,eAAe,GAAG,IAAI,CAAC;wBAChC,EAAE,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;wBAC5B,EAAE,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;wBAC7B,IAAI,CAAC,OAAO,EAAE;4BACV,oBAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;4BAC3B,yDAAyD;4BACzD,EAAE,CAAC,SAAS,CAAC;gCACT,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,KAAK;6BACzD,CAAC,CAAA;yBACL;6BACI;4BACD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;yBACpC;qBACJ;yBAAM,IAAI,IAAI,IAAI,OAAO,EAAE;wBACxB,4BAA4B;wBAC5B,kBAAkB,IAAI,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBACtD,sFAAsF;qBACzF;gBACL,CAAC,CAAC,CAAA;aACL;SACJ;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACtD,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YAEjC,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;YAE9D,IAAI,cAAc,GAAG,UAAA,CAAC;gBAClB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAC5B,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACjC,6FAA6F;gBAC7F,cAAc;gBACd,+DAA+D;gBAC/D,6BAA6B;gBAC7B,+FAA+F;gBAC/F,IAAI;YACR,CAAC,CAAA;YACD,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;YAE3C,IAAI,YAAY,GAAG,UAAA,CAAC;gBAChB,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACjC,6FAA6F;gBAC7F,kBAAkB,IAAI,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1D,CAAC,CAAA;YACD,QAAQ,CAAC,kBAAkB,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;SAGhD;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC1D,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,gCAAgC,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;YACnF,IAAI,cAAc,GAAG,UAAA,CAAC;gBAClB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAC5B,IAAI,IAAI,EAAE;oBACN,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;oBACtB,+EAA+E;iBAClF;YACL,CAAC,CAAA;YACD,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;YAE3C,IAAI,YAAY,GAAG,UAAA,CAAC;gBAChB,kBAAkB,IAAI,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACtD,IAAI,IAAI,EAAE;oBACN,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;oBACtB,wEAAwE;iBAC3E;YACL,CAAC,CAAA;YACD,QAAQ,CAAC,kBAAkB,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;SAChD;aAEI;YACD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;SACpC;IACL,CAAC;IAEM,gBAAO,GAAd;QACI,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC/C,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAClD,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SACpD;IAEL,CAAC;IAEM,yBAAgB,GAAvB,UAAwB,QAAS,EAAE,MAAO,EAAE,aAAc;QACtD,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC1B,IAAI,QAAQ,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAC7B,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAClC,OAAO;SACV;QACD,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAClB,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,OAAO,aAAK,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAA;aAC/C;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,OAAO,aAAK,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAA;aAC/C;YACD,OAAO,WAAK,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;SAChD;aACI,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACpD,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACjC,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;YAC5D,IAAI,cAAc,GAAG,UAAA,CAAC;gBAClB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAC5B,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACjC,6FAA6F;gBAC7F,cAAc;gBACd,+DAA+D;gBAC/D,6BAA6B;gBAC7B,+FAA+F;gBAC/F,IAAI;YACR,CAAC,CAAA;YACD,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;SACrD;aACI,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACxD,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,gCAAgC,EAAE,kBAAkB,EAAE,KAAK,CAAC,CAAC;YAC7F,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YAEjC,IAAI,cAAc,GAAG,UAAA,CAAC;gBAClB,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAC5B,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACjC,6FAA6F;gBAC7F,cAAc;gBACd,+DAA+D;gBAC/D,6BAA6B;gBAC7B,+FAA+F;gBAC/F,IAAI;YACR,CAAC,CAAA;YACD,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC;SAErD;QACD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAA;IAC5B,CAAC;IAEM,uBAAc,GAArB,UAAsB,WAAW;QAC7B,IAAI,QAAQ,GAAG,IAAI,CAAC;QACpB,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;QAC3B,IAAI,EAAE,CAAC,gBAAgB,EAAE;YACrB,QAAQ,GAAG,EAAE,CAAC,gBAAgB,CAAC,EAAE,QAAQ,EAAE,wBAAU,CAAC,SAAS,EAAE,CAAC,CAAA;SACrE;aAAM;YACH,OAAO,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;YACxC,WAAW,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;SACjC;QACD,cAAc;QACd,IAAI,QAAQ,EAAE;YACV,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAQ,QAAQ,CAAC,IAAI,EAAE,CAAA,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;gBACtD,OAAO,CAAC,KAAK,CAAC,mBAAmB,GAAG,GAAG,CAAC,CAAC;gBACzC,WAAW,IAAI,WAAW,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACvC,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IAEM,qBAAY,GAAnB,UAAoB,aAAc;QAC9B,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAA;QAC/B,IAAI,CAAC,IAAI,CAAC,cAAc;YAAE,OAAM;QAChC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAClB,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,OAAO,aAAK,CAAC,YAAY,CAAC,aAAa,CAAC,CAAA;aAC3C;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,OAAO,aAAK,CAAC,YAAY,CAAC,aAAa,CAAC,CAAA;aAC3C;iBAAK,IAAI,MAAM,CAAC,EAAE,EAAE;gBACjB,OAAO,WAAK,CAAC,YAAY,CAAC,aAAa,CAAC,CAAA;aAC3C;SAEJ;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACtD,kGAAkG;SAErG;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAC7C;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC1D,0FAA0F;SAE7F;aACI;YACD,KAAK;YACL,IAAI,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,EAAE;gBACrB,SAAS;gBACT,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;gBACzB,aAAa,IAAI,aAAa,EAAE,CAAC;aACpC;SACJ;IACL,CAAC;IAEM,qBAAY,GAAnB;QACI,IAAI,aAAa,EAAE;YACf,OAAO,WAAK,CAAC,YAAY,EAAE,CAAA;SAC9B;IACL,CAAC;IAEM,qBAAY,GAAnB;QACI,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAA;QAC/B,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACvC,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,aAAK,CAAC,YAAY,EAAE,CAAC;gBACrB,OAAO;aACV;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,OAAO,aAAK,CAAC,YAAY,EAAE,CAAC;aAC/B;YACD,WAAK,CAAC,YAAY,EAAE,CAAC;SACxB;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAC7C;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YACtD,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;SAE1D;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC1D,GAAG,CAAC,UAAU,CAAC,gBAAgB,CAAC,gCAAgC,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;SAC3F;aAAM;SACN;IACL,CAAC;IAEM,wBAAe,GAAtB;QACI,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;QACzB,IAAI,aAAa,EAAE;YACf,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,aAAK,CAAC,YAAY,EAAE,CAAC;gBACrB,OAAO;aACV;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,OAAO,aAAK,CAAC,OAAO,EAAE,CAAC;aAC1B;YACD,WAAK,CAAC,YAAY,EAAE,CAAC;SACxB;IACL,CAAC;IAGM,uBAAc,GAArB,UAAsB,KAAa,EAAE,WAAY;QAA3B,sBAAA,EAAA,aAAa;QAC/B,IAAI,aAAa,EAAE;YACf,WAAK,CAAC,YAAY,EAAE,CAAA;YACpB,WAAK,CAAC,YAAY,CAAC,UAAA,CAAC;gBAChB,IAAI,CAAC,IAAI,MAAM;oBACX,IAAI,KAAK,EAAE;wBACP,WAAK,CAAC,YAAY,EAAE,CAAC;qBACxB;yBACI,IAAI,CAAC,IAAI,OAAO,EAAE;wBACnB,WAAW,IAAI,WAAW,EAAE,CAAC;qBAChC;YACT,CAAC,CAAC,CAAA;SACL;aAAM;YACH,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAA;SACxC;IACL,CAAC;IAEM,qBAAY,GAAnB,UAAoB,CAAK;QAAL,kBAAA,EAAA,KAAK;QACrB,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO;QACnB,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;SAEtC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC9C,WAAW,CAAC,UAAA,CAAC;gBACT,IAAI,QAAQ,CAAC,qBAAqB,IAAI,QAAQ,CAAC,eAAe,EAAE;oBAC5D,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAA;oBAClC,WAAK,CAAC,YAAY,EAAE,CAAA;oBACpB,WAAK,CAAC,YAAY,CAAC,UAAA,CAAC;wBAChB,IAAI,CAAC,IAAI,MAAM;4BACX,WAAK,CAAC,YAAY,EAAE,CAAC;oBAC7B,CAAC,CAAC,CAAA;iBACL;YACL,CAAC,EAAE,KAAK,CAAC,CAAA;SACZ;IACL,CAAC;IAEM,eAAM,GAAb;QACI,0CAA0C;QAC1C,qCAAqC;QACrC,yCAAyC;IAC7C,CAAC;IAEM,uBAAc,GAArB;QACI,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,oBAAK,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAA;QAExC,+CAA+C;IACnD,CAAC;IAED,sBAAsB;IAEf,0BAAiB,GAAxB,UAAyB,GAAI;QACzB,OAAO,CAAC,GAAG,CAAC,6DAA6D,CAAC,CAAA;QAC1E,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE;YACnC,mBAAmB;YACnB,uBAAuB;YACvB,EAAE,CAAC,WAAW,CAAC,WAAW,EAAE,CAAA;SAC/B;aAAM;YACH,+BAA+B;SAClC;QACD,QAAQ,CAAC,uBAAuB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3C,WAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAA;IACjC,CAAC;IAEM,0BAAiB,GAAxB;QACI,iDAAiD;QACjD,2CAA2C;QAE3C,WAAW;QACX,kCAAkC;QAClC,IAAI;QACJ,WAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAA;IACjC,CAAC;IAEM,mBAAU,GAAjB;QACI,qCAAqC;IACzC,CAAC;IAEM,0BAAiB,GAAxB,UAAyB,GAAG,EAAE,IAAI;QAC9B,IAAI,aAAa,EAAE;YACf,WAAK,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;SAChC;IACL,CAAC;IACM,sBAAa,GAApB,UAAqB,QAAQ,EAAE,QAAQ;QACnC,WAAK,CAAC,WAAW,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE,QAAQ,UAAA,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;IACpE,CAAC;IAEM,iBAAQ,GAAf,UAAgB,QAAQ,EAAE,QAAQ;QAC9B,WAAK,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,QAAQ,UAAA,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;IAC/D,CAAC;IAEM,iBAAQ,GAAf;QACI,WAAK,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;IACtC,CAAC;IAEM,oBAAW,GAAlB,UAAmB,QAAQ,EAAE,MAAO;QAChC,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QAClC,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE;SAEtC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,EAAE;SAEjD;IACL,CAAC;IAEM,oBAAW,GAAlB,UAAmB,CAAkB,EAAE,CAAU;QAC7C,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE;SACtC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC9C,yCAAyC;YACzC,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1B,WAAK,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAC3B;aAAM;YACH,wCAAwC;SAC3C;IACL,CAAC;IAEM,qBAAY,GAAnB,UAAoB,GAAqC;QACrD,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE;SACtC;aAAM,IAAI,EAAE,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC9C,yCAAyC;YACzC,OAAO,WAAK,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;SAClC;aAAM;YACH,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAC1B,wCAAwC;SAC3C;IACL,CAAC;IAID,sBAAkB,0BAAc;aAAhC;YACI,IAAI,CAAC,aAAa,EAAE;gBAChB,OAAO,IAAI,CAAC;aACf;YACD,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,EAAE;gBAC9B,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,oBAAoB,EAAE,CAAC;aACpD;YACD,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;;;OAAA;IAEa,kBAAS,GAAvB,UAAwB,GAAoB;QAA5C,iBAmBC;QAlBG,eAAe;QACf,cAAc;QACd,iBAAiB;QACjB,oJAAoJ;QACpJ,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI;YAAE,OAAO,KAAK,CAAC;QAC9C,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA;QAChB,IAAI,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;QAC3B,OAAO,GAAG,CAAC,IAAI,CAAC,UAAA,CAAC;YACb,IAAI,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAA;YAC7B,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,IAAI,EAAE,EAAP,CAAO,CAAC,CAAA;YAC9B,4CAA4C;YAC5C,OAAO,GAAG,CAAC,KAAK,CAAC,UAAA,EAAE;gBACX,IAAA,KAAS,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAArB,CAAC,QAAA,EAAE,CAAC,QAAiB,CAAA;gBAC1B,IAAI,EAAE,GAAG,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBACrC,IAAI,EAAE,IAAI,SAAS,IAAI,CAAC,IAAI,SAAS;oBAAE,OAAO,KAAK,CAAC;gBACpD,OAAO,EAAE,IAAI,CAAC,CAAC;YACnB,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAA;IACN,CAAC;IACM,uBAAc,GAArB,UAAsB,IAAI,EAAE,QAAS;QACjC,IAAI,aAAa,EAAE;YACf,IAAI,MAAM,CAAC,EAAE,EAAE;gBACX,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;oBAC/B,IAAM,QAAQ,GAAG,EAAE,CAAC,cAAc,CAAC;wBAC/B,IAAI,EAAE,IAAI;wBACV,OAAO,EAAE;4BACL,OAAO,EAAE,CAAC;wBACd,CAAC;wBACD,IAAI,EAAE;4BACF,MAAM,EAAE,CAAC;wBACb,CAAC;qBACJ,CAAC,CAAC;oBACH,QAAQ,CAAC,gBAAgB,CAAC,UAAA,GAAG;wBACzB,QAAQ;4BACJ,QAAQ,CACJ,GAAG,CAAC,QAAQ,EACZ,GAAG,CAAC,iBAAiB,EACrB,GAAG,CAAC,yBAAyB,CAChC,CAAC;wBACN,oCAAoC;wBACpC,kDAAkD;wBAClD,6DAA6D;oBACjE,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC,CAAC;aACN;iBAAM,IAAI,MAAM,CAAC,EAAE,EAAE;gBAClB,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;oBAC/B,IAAI,WAAW,GAAG,CAAC,CAAC;oBACpB,IAAM,QAAQ,GAAG,EAAE,CAAC,cAAc,CAAC;wBAC/B,IAAI,EAAE,IAAI;wBACV,OAAO,EAAE;4BACL,aAAa,CAAC,WAAW,CAAC,CAAC;4BAC3B,OAAO,EAAE,CAAA;wBACb,CAAC;wBACD,IAAI,EAAE,UAAU,CAAC;4BACb,aAAa,CAAC,WAAW,CAAC,CAAC;4BAC3B,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,CAAA;wBAC1B,CAAC;qBACJ,CAAC,CAAA;oBACF,IAAI,CAAC,GAAG,CAAC,CAAC;oBACV,WAAW,GAAG,WAAW,CAAC,UAAA,CAAC;wBACvB,CAAC,IAAI,CAAC,CAAA;wBACN,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;wBAChC,IAAI,CAAC,IAAI,GAAG,EAAE;4BACV,aAAa,CAAC,WAAW,CAAC,CAAC;yBAC9B;oBACL,CAAC,EAAE,EAAE,CAAC,CAAA;oBACN,QAAQ,CAAC,gBAAgB,CAAC,UAAA,GAAG;wBACzB,IAAI,WAAW,IAAI,CAAC,EAAE;4BAClB,aAAa,CAAC,WAAW,CAAC,CAAA;4BAC1B,WAAW,GAAG,CAAC,CAAC;yBACnB;wBACD,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,yBAAyB,CAAC,CAAA;wBACxF,oCAAoC;wBACpC,kDAAkD;wBAClD,6DAA6D;oBACjE,CAAC,CAAC,CAAA;gBACN,CAAC,CAAC,CAAA;aACL;SACJ;aAAM;YACH,OAAO,IAAI,OAAO,CAAC,UAAA,OAAO;gBACtB,IAAI,CAAC,GAAG,CAAC,CAAC;gBACV,IAAI,EAAE,GAAG,WAAW,CAAC,UAAA,CAAC;oBAClB,CAAC,IAAI,EAAE,CAAA;oBACP,QAAQ,IAAI,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;oBAChC,IAAI,CAAC,IAAI,GAAG,EAAE;wBACV,aAAa,CAAC,EAAE,CAAC,CAAC;wBAClB,OAAO,EAAE,CAAA;qBACZ;gBACL,CAAC,EAAE,EAAE,CAAC,CAAA;YACV,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IAEM,mBAAU,GAAjB;QACI,IAAI,aAAa,EAAE;YACf,IAAM,eAAa,GAAG,EAAE,CAAC,gBAAgB,EAAE,CAAA;YAC3C,eAAa,CAAC,gBAAgB,CAAC,UAAC,GAAG;gBAC/B,cAAc;gBACd,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;YAC9B,CAAC,CAAC,CAAA;YAEF,eAAa,CAAC,aAAa,CAAC;gBACxB,EAAE,CAAC,SAAS,CAAC;oBACT,KAAK,EAAE,MAAM;oBACb,OAAO,EAAE,kBAAkB;oBAC3B,OAAO,YAAC,GAAG;wBACP,IAAI,GAAG,CAAC,OAAO,EAAE;4BACb,oCAAoC;4BACpC,eAAa,CAAC,WAAW,EAAE,CAAA;yBAC9B;oBACL,CAAC;iBACJ,CAAC,CAAA;YACN,CAAC,CAAC,CAAA;YAEF,eAAa,CAAC,cAAc,CAAC;gBACzB,UAAU;YAGd,CAAC,CAAC,CAAA;SACL;IAGL,CAAC;IAGa,WAAE,GAAhB;QACI,IAAI,aAAa,EAAE;YACf,aAAa;YACb,EAAE,CAAC,SAAS,EAAE,CAAA;SACjB;IACL,CAAC;IAzvBM,8BAAqB,GAAG,IAAI,CAAC;IAC7B,wBAAe,GAAG,KAAK,CAAC;IACxB,gCAAuB,GAAG,IAAI,gBAAM,EAAE,CAAC;IAEvC,kBAAS,GAAG,KAAK,CAAA;IACjB,cAAK,GAAG,KAAK,CAAC;IA8Dd,wBAAe,GAAW,IAAI,gBAAM,EAAE,CAAC;IA4C9C,wBAAwB;IACjB,eAAM,GAAW,GAAG,CAAA;IAMpB,2BAAkB,GAAgB,IAAI,CAAC;IAwGvC,sBAAa,GAAG,IAAI,CAAC;IACrB,uBAAc,GAAG,IAAI,CAAC;IAqBtB,uBAAc,GAAW,IAAI,gBAAM,EAAE,CAAC;IACtC,2BAAkB,GAAW,IAAI,gBAAM,EAAE,CAAC;IAyG1C,8BAAqB,GAAW,IAAI,gBAAM,EAAE,CAAC;IA6ZxD,eAAC;CA7vBD,AA6vBC,IAAA;kBA7vBoB,QAAQ;AAgwB7B,oCAAoC;AACpC,sCAAsC;AACtC,4BAA4B;AAC5B,IAAI;AAEJ,yCAAyC;AACzC,uCAAuC;AACvC,6CAA6C;AAC7C,4BAA4B;AAC5B,IAAI;AAEJ,wCAAwC;AACxC,0CAA0C;AAC1C,8BAA8B;AAC9B,IAAI;AAEJ,MAAM,CAAC,OAAO,CAAC,GAAG;IACd,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;IAChB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACxB,CAAC,CAAA;AAED,MAAM,CAAC,QAAQ,CAAC,GAAG;IACf,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;IACjB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACxB,CAAC,CAAA;AAED,MAAM,CAAC,YAAY,CAAC,GAAG,UAAC,MAAM;IAC1B,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IACjC,oEAAoE;IACpE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC1B,CAAC,CAAA;AAED,MAAM,CAAC,aAAa,CAAC,GAAG,UAAC,MAAM;IAC3B,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IACjC,qEAAqE;IACrE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC1B,CAAC,CAAA;AAGD,iDAAiD;AACjD,gDAAgD;AAChD,2CAA2C;AAC3C,0CAA0C;AAC1C,gFAAgF;AAEhF,kEAAkE;AAClE,2CAA2C;AAC3C,8CAA8C;AAC9C,gFAAgF;AAChF,QAAQ;AACR,uDAAuD;AACvD,gFAAgF;AAChF,2CAA2C;AAC3C,iDAAiD;AACjD,QAAQ;AACR,IAAI;AAEJ,4DAA4D;AAE5D,IAAI","file":"","sourceRoot":"/","sourcesContent":["import Signal from \"../core/Signal\";\r\nimport { wxsdk } from \"./wxsdk/sdk\";\r\nimport BKTool from \"./qq/BKTool\";\r\nimport SpriteFrameCache from \"../misc/SpriteFrameCache\";\r\nimport { Toast } from \"../ui/ToastManager\";\r\nimport { evt } from \"../core/event\";\r\nimport { GameConfig } from \"./wxsdk/GameConfigs\";\r\nimport { qqsdk } from \"./qq/qqsdk\";\r\nimport { ttsdk } from \"./ttsdk/ttsdk\";\r\nimport StatHepler from \"./aldsdk/StatHelper\";\r\n\r\n\r\nenum WxCommands {\r\n    Hide = 99,\r\n    Next,\r\n    RankSmall,\r\n    Rank,\r\n}\r\n\r\nexport interface ShareInfo {\r\n    title: string,\r\n    imageUrl: string,\r\n    query?: string,\r\n    ald_desc?: string\r\n    // id?:string,\r\n    queryObjects: Object | { id: string },\r\n    share_weight: number,\r\n}\r\n//\"{\"nickName\":\"꯭Da꯭m꯭o꯭nR꯭e꯭n\",\"gender\":1,\"language\":\"zh_CN\",\"city\":\"\",\"province\":\"\",\"country\":\"中国\",\"avatarUrl\":\"https://wx.qlogo.cn/mmopen/vi_32/OAaG3jcYYVFic1vYH3K4Lxaej7OPFl7cVpaACre2ibiaJa21Cz5zUz1K7FH6JNvfZqqlhC2glrDj9ibgofmk2ZqzMQ/132\"}\"\r\nexport interface AuthUserInfo {\r\n    openId: string,\r\n    avatarUrl: string,\r\n    nickName: string,\r\n    city: string,\r\n    gender: number,\r\n    country: string;\r\n    provice: string;\r\n}\r\n\r\n\r\nexport default class Platform {\r\n\r\n    static bannnerRefreshEnabled = true;\r\n    static _refreshEnabled = false;\r\n    static onEnterForegroundSignal = new Signal();\r\n\r\n    static isAndroid = false\r\n    static isIOS = false;\r\n\r\n    static _shareConfig: any;\r\n\r\n    static getOpenID() {\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            // wechat \r\n            let userInfo = wxsdk.userInfo\r\n            if (userInfo && userInfo.openID) {\r\n                return userInfo.openID\r\n            } else {\r\n                return \"\"\r\n            }\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n            return;\r\n        } else {\r\n            return \"123\"\r\n        }\r\n    }\r\n\r\n    static getNick() {\r\n        if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n            return;\r\n        } else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            return (wxsdk.userInfo && wxsdk.userInfo.nickName) || \"自已\"\r\n        } else {\r\n            return \"玩家自已\"\r\n        }\r\n    }\r\n\r\n    static getHead() {\r\n        if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n            return;\r\n        } else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            // avatarUrl:\"https://wx.qlogo.cn/mmopen/vi_32/QlHaicGZOD7do9LuX5W4APHYSrUBqVaGULuwISLUf35IyOOYZ3IXl7nF5mW36JiaQ9snziawrAvkknX41SmeYa9AQ/132\"city:\"\"country:\"\"gender:1language:\"zh_CN\"nickName:\"Damon Ren⁶⁶⁶\"province:\"\"\r\n            let userInfo = wxsdk.userInfo\r\n            if (userInfo && userInfo.avatarUrl) {\r\n                return userInfo.avatarUrl\r\n            } else {\r\n                return \"https://tank.wdfunny.com/speed_logo/2.jpg\"\r\n            }\r\n        }\r\n        return \"https://tank.wdfunny.com/speed_logo/1.jpg\"\r\n    }\r\n\r\n\r\n    static loadSelfHead(sprite) {\r\n        if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        } else {\r\n            SpriteFrameCache.instance.getSpriteFrame(Platform.getHead()).then(sf => sprite.spriteFrame = sf)\r\n        }\r\n    }\r\n\r\n    static exit() {\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            wx.offShow(Platform.onEnterForeground)\r\n            wx.offHide(Platform.onEnterBackground)\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n\r\n        }\r\n    }\r\n\r\n    static configGetSignal: Signal = new Signal();\r\n\r\n    static login(p?) {\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            wxsdk.login(p)\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        }\r\n    }\r\n\r\n    // static startAuth() {\r\n    //     if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n    //         return wxsdk.startAuth();\r\n    //     } else {\r\n    //         let userInfo = {} as AuthUserInfo\r\n    //         userInfo.avatarUrl = \"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1030399321,1493970029&fm=27&gp=0.jpg\"\r\n    //         userInfo.city = \"WuHan\",\r\n    //             userInfo.gender = 1,\r\n    //             userInfo.nickName = 'aliwangzai'\r\n    //         return Promise.resolve(userInfo);\r\n    //     }\r\n    // }\r\n\r\n\r\n    static checkAuth(): Promise<AuthUserInfo> {\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            return wxsdk.checkAuth() as any;\r\n        } else {\r\n            let userInfo = {} as AuthUserInfo\r\n            userInfo.avatarUrl = \"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1030399321,1493970029&fm=27&gp=0.jpg\"\r\n            userInfo.city = \"WuHan\",\r\n                userInfo.gender = 1,\r\n                userInfo.nickName = 'aliwangzai'\r\n            return Promise.resolve(userInfo);\r\n        }\r\n    }\r\n\r\n    /** 解决 排行榜 无法划动问题 */\r\n    static fix_wechat_subContext(subContext: cc.WXSubContextView, self: cc.Component) {\r\n        subContext.node.active = false;\r\n        self.scheduleOnce(_ => {\r\n            subContext.node.active = true\r\n        }, 0.1)\r\n    }\r\n\r\n    /**当前玩家 id ，用于分享卡片是带上 */\r\n    static userId: string = '0'\r\n    public static setUserId(id) {\r\n        this.userId = id\r\n    }\r\n\r\n\r\n    static defaultShareConfig: ShareInfo[] = null;\r\n    static initShare(cfg: ShareInfo[], userId?) {\r\n        this.defaultShareConfig = cfg;\r\n        this.userId = userId;\r\n        this.isAndroid = cc.sys.os == \"Android\"\r\n        console.log(\"================= os\", cc.sys.os);\r\n        this.isIOS = cc.sys.os == \"iOS\"\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            wxsdk.showShareMenu(cfg[0]);\r\n            wx.onShow(Platform.onEnterForeground)\r\n            wx.onHide(Platform.onEnterBackground)\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        }\r\n        this.initUpdate();\r\n    }\r\n\r\n\r\n    static getGameID() {\r\n        if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        }\r\n        return \"speed_wanyiwan\";\r\n    }\r\n\r\n\r\n    static getLaunchOptions(): { scene: number, query: Object } {\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            return wx.getLaunchOptionsSync()\r\n        }\r\n        return { scene: 0, query: {} }\r\n    }\r\n\r\n\r\n    static getCity() {\r\n        return \"\"\r\n    }\r\n\r\n\r\n    static doShare(share_cfg: ShareInfo[], callback?, timeout = 3000) {\r\n        this.doShareWithParams(null, share_cfg, callback, timeout)\r\n    }\r\n\r\n    static share(calback?) {\r\n        this.doShare(this.defaultShareConfig, calback);\r\n    }\r\n\r\n\r\n    static doShareWithParams(params, share_cfgs: ShareInfo[], callback?, target?, timeout = 2000) {\r\n        share_cfgs = share_cfgs || this.defaultShareConfig\r\n        let share_cfg;\r\n        if (Array.isArray(share_cfgs)) {\r\n            share_cfg = g.getRandomInArray(share_cfgs) as ShareInfo;\r\n        }\r\n        console.log(\"######开始分享\")\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            let sdk;\r\n            if (window.qq) {\r\n                sdk = qqsdk;\r\n            } else if (window.tt) {\r\n                sdk = ttsdk;\r\n            } else {\r\n                sdk = wxsdk\r\n            }\r\n            params = params || {}\r\n            params.userId = this.userId;\r\n            sdk.openShare(share_cfg, params);\r\n            let t = new Date().getTime()\r\n            Platform.onEnterForegroundSignal.on((obj) => {\r\n                Platform.onEnterForegroundSignal.clear();\r\n                let d = new Date().getTime() - t;\r\n                if (d > timeout) {\r\n                    // if(Math.random() < 0.5)\r\n                    // {\r\n                    setTimeout(_ => {\r\n                        if (callback)\r\n                            callback.call(target, 1);\r\n                    }, 500)\r\n                    // }else{\r\n                    //     if(this.shareCount >= 2){\r\n                    //         this.shareCount = 0;\r\n                    //         setTimeout(_ => {\r\n                    //             if (callback)\r\n                    //                 callback.call(target)\r\n                    //         }, 500)\r\n                    //     }\r\n                    //     else{\r\n                    //         //用户及时返回分享失败 \r\n                    //         Toast.make(\"分享失败,请尝试换其它群分享\")\r\n                    //     }\r\n                    // }\r\n                } else {\r\n                    //用户及时返回分享失败 \r\n                    if (callback)\r\n                        callback.call(target, 0);\r\n                    // Toast.make(\"分享失败,请尝试换其它群分享\")\r\n                }\r\n            })\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n\r\n        } else {\r\n            callback && callback.call(target, 1)\r\n        }\r\n    }\r\n\r\n\r\n    static _videoEnabled = true;\r\n    static _bannerEnabled = true;\r\n\r\n    static setAdEnabled(b) {\r\n        this._videoEnabled = b;\r\n        this._bannerEnabled = b;\r\n    }\r\n\r\n    static isVideoAdEnabled(b) {\r\n        return this._videoEnabled\r\n    }\r\n\r\n    static isBannerAdEnabled(b) {\r\n        return this._bannerEnabled;\r\n    }\r\n\r\n    static sendUmengEvt(title: string, count: string) {\r\n        if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"Umeng\", \"umengEvt:count:\", title, count);\r\n        }\r\n    }\r\n\r\n    static video_callback: Signal = new Signal();\r\n    static video_failcallback: Signal = new Signal();\r\n\r\n    static watch_video(callback, target?, fail_load_callback?) {\r\n        console.log(\"######开始看视频\")\r\n        if (!this._videoEnabled) return;\r\n        if (!cc.sys.isNative) {\r\n            let sdk;\r\n            if (window.qq) {\r\n                sdk = qqsdk;\r\n            } else if (window.tt) {\r\n                sdk = ttsdk;\r\n            } else if (window.wx) {\r\n                sdk = wxsdk\r\n            }else{\r\n                callback && callback.call(target);\r\n                return;\r\n            }\r\n            if (sdk) {\r\n                sdk.loadVideoAd((code, isEnded) => {\r\n                    if (code == \"load\") {\r\n                        Platform._refreshEnabled = false;\r\n                    } else if (code == 'show') {\r\n                        cc.audioEngine.pauseMusic();\r\n                    }\r\n                    else if (code == \"close\") {\r\n                        Platform._refreshEnabled = true;\r\n                        cc.audioEngine.pauseMusic();\r\n                        cc.audioEngine.resumeMusic();\r\n                        if (!isEnded) {\r\n                            Toast.make(\"必须看完视频,才能获取奖励\")\r\n                            // fail_load_callback && fail_load_callback.call(target);\r\n                            wx.showModal({\r\n                                title: \"提示\", content: \"看完广告才能获得奖励哦\", showCancel: false\r\n                            })\r\n                        }\r\n                        else {\r\n                            callback && callback.call(target)\r\n                        }\r\n                    } else if (code == 'error') {\r\n                        // Toast.make(\"没有视频,请稍后再试!\")\r\n                        fail_load_callback && fail_load_callback.call(target);\r\n                        // this.doShare(WeakNetGame.shareConfigs[\"default\"], callback, target, fail_callback);\r\n                    }\r\n                })\r\n            }\r\n        } else if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            cc.audioEngine.setMusicVolume(0);\r\n\r\n            jsb.reflection.callStaticMethod(\"TXsdk\", \"showRewardedVideo\");\r\n\r\n            var finishCallback = _ => {\r\n                callback && callback.call(target);\r\n                console.log(callback, name);\r\n                cc.audioEngine.setMusicVolume(1);\r\n                // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\",\"(Ljava/lang/String;)V\");\r\n                // if (name) {\r\n                //     let str = JSON.stringify({ \"type\": name, \"result\": 1 });\r\n                //     console.log(\"进入埋点上传2\")\r\n                //     jsb.reflection.callStaticMethod(\"AppsFlyerHelper\", \"trackEvent:withValues:\", \"ad\", str);\r\n                // }\r\n            }\r\n            Platform.video_callback.on(finishCallback);\r\n\r\n            var failCallback = _ => {\r\n                cc.audioEngine.setMusicVolume(1);\r\n                // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\",\"(Ljava/lang/String;)V\");\r\n                fail_load_callback && fail_load_callback.call(target);\r\n            }\r\n            Platform.video_failcallback.on(failCallback);\r\n\r\n\r\n        } else if (cc.sys.os == cc.sys.OS_ANDROID && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"com/mimgame/sdk/BytedanceAdSdk\", \"loadAd\", \"()V\");\r\n            var finishCallback = _ => {\r\n                callback && callback.call(target);\r\n                console.log(callback, name);\r\n                if (name) {\r\n                    console.log(\"进入埋点上传1\")\r\n                    // StatHepler.userAction(null,null,\"adddClick\" , { \"type\": name, \"result\": 1 })\r\n                }\r\n            }\r\n            Platform.video_callback.on(finishCallback);\r\n\r\n            var failCallback = _ => {\r\n                fail_load_callback && fail_load_callback.call(target);\r\n                if (name) {\r\n                    console.log(\"进入埋点上传2\")\r\n                    // StatHepler.userAction(null,null,\"ad\" , { \"type\": name, \"result\": 1 })\r\n                }\r\n            }\r\n            Platform.video_failcallback.on(failCallback);\r\n        }\r\n\r\n        else {\r\n            callback && callback.call(target)\r\n        }\r\n    }\r\n\r\n    static initSDK() {\r\n        if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"GDTSdk\", \"init\");\r\n            jsb.reflection.callStaticMethod(\"Umeng\", \"init\");\r\n        }\r\n\r\n    }\r\n    static interstitial_callback: Signal = new Signal();\r\n    static showInterstitial(callback?, target?, errorCallback?): Promise<any> {\r\n        console.log(\"####显示插屏广告\");\r\n        if (CC_DEBUG) {\r\n            console.log(\"DEBUG模式跳过插屏广告\");\r\n            callback && callback.call(target);\r\n            return;\r\n        }\r\n        this.hideBannerAd();\r\n        if (!cc.sys.isNative) {\r\n            if (window.qq) {\r\n                return qqsdk.showInterstitial(errorCallback)\r\n            } else if (window.tt) {\r\n                return ttsdk.showInterstitial(errorCallback)\r\n            }\r\n            return wxsdk.showInterstitial(errorCallback);\r\n        }\r\n        else if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            cc.audioEngine.setMusicVolume(0);\r\n            jsb.reflection.callStaticMethod(\"TXsdk\", \"showFullScreeAd\");\r\n            var finishCallback = _ => {\r\n                callback && callback.call(target);\r\n                console.log(callback, name);\r\n                cc.audioEngine.setMusicVolume(1);\r\n                // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\",\"(Ljava/lang/String;)V\");\r\n                // if (name) {\r\n                //     let str = JSON.stringify({ \"type\": name, \"result\": 1 });\r\n                //     console.log(\"进入埋点上传2\")\r\n                //     jsb.reflection.callStaticMethod(\"AppsFlyerHelper\", \"trackEvent:withValues:\", \"ad\", str);\r\n                // }\r\n            }\r\n            Platform.interstitial_callback.on(finishCallback);\r\n        }\r\n        else if (cc.sys.os == cc.sys.OS_ANDROID && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"com/mimgame/sdk/BytedanceAdSdk\", \"loadFullscreenAd\", \"()V\");\r\n            cc.audioEngine.setMusicVolume(0);\r\n\r\n            var finishCallback = _ => {\r\n                callback && callback.call(target);\r\n                console.log(callback, name);\r\n                cc.audioEngine.setMusicVolume(1);\r\n                // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\",\"(Ljava/lang/String;)V\");\r\n                // if (name) {\r\n                //     let str = JSON.stringify({ \"type\": name, \"result\": 1 });\r\n                //     console.log(\"进入埋点上传2\")\r\n                //     jsb.reflection.callStaticMethod(\"AppsFlyerHelper\", \"trackEvent:withValues:\", \"ad\", str);\r\n                // }\r\n            }\r\n            Platform.interstitial_callback.on(finishCallback);\r\n\r\n        }\r\n        return Promise.resolve()\r\n    }\r\n\r\n    static showGamePortal(errcallback) {\r\n        let portalAd = null;\r\n        console.log(\"创建推荐位实例-----\")\r\n        if (wx.createGamePortal) {\r\n            portalAd = wx.createGamePortal({ adUnitId: GameConfig.portal_id })\r\n        } else {\r\n            console.error('不支持wx.createGamePortal');\r\n            errcallback && errcallback(0);\r\n        }\r\n        // 在适合的场景显示推荐位\r\n        if (portalAd) {\r\n            portalAd.load().then(() => { portalAd.show() }).catch((err) => {\r\n                console.error('createGamePortal:' + err);\r\n                errcallback && errcallback(1, err);\r\n            })\r\n        }\r\n    }\r\n\r\n    static showBannerAd(errorCallback?) {\r\n        console.log(\"######显示Banner广告\")\r\n        if (!this._bannerEnabled) return\r\n        if (!cc.sys.isNative) {\r\n            if (window.qq) {\r\n                return qqsdk.showBannerAd(errorCallback)\r\n            } else if (window.tt) {\r\n                return ttsdk.showBannerAd(errorCallback)\r\n            }else if (window.wx) {\r\n                return wxsdk.showBannerAd(errorCallback)\r\n            }\r\n            \r\n        } else if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            // jsb.reflection.callStaticMethod(\"TXsdk\", \"loadBanner:\", (csv.Config.Banner_Refresh_Rate || 30))\r\n\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        } else if (cc.sys.os == cc.sys.OS_ANDROID && cc.sys.isNative) {\r\n            // jsb.reflection.callStaticMethod(\"com/mimgame/sdk/BytedanceAdSdk\", \"loadBanner\", \"()V\");\r\n\r\n        }\r\n        else {\r\n            //pc \r\n            if (Math.random() < 0.5) {\r\n                //显示 广告失败\r\n                console.log(\"显示广告失败(模拟)\")\r\n                errorCallback && errorCallback();\r\n            }\r\n        }\r\n    }\r\n\r\n    static isBannerShow() {\r\n        if (CC_WECHATGAME) {\r\n            return wxsdk.isBannerShow()\r\n        }\r\n    }\r\n\r\n    static hideBannerAd() {\r\n        console.log(\"######隐藏Banner广告\")\r\n        if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            if (window.qq) {\r\n                qqsdk.hideBannerAd();\r\n                return;\r\n            } else if (window.tt) {\r\n                return ttsdk.hideBannerAd();\r\n            }\r\n            wxsdk.hideBannerAd();\r\n        } else if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n        } else if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"TXsdk\", \"hideBanner\");\r\n\r\n        } else if (cc.sys.os == cc.sys.OS_ANDROID && cc.sys.isNative) {\r\n            jsb.reflection.callStaticMethod(\"com/mimgame/sdk/BytedanceAdSdk\", \"closeBanner\", \"()V\");\r\n        } else {\r\n        }\r\n    }\r\n\r\n    static refreshBannerAd() {\r\n        console.log(\"刷新 banner \")\r\n        if (CC_WECHATGAME) {\r\n            if (window.qq) {\r\n                qqsdk.loadBannerAd();\r\n                return;\r\n            } else if (window.tt) {\r\n                return ttsdk.destroy();\r\n            }\r\n            wxsdk.loadBannerAd();\r\n        }\r\n    }\r\n\r\n\r\n    static reloadBannerAd(bShow = false, errcallback?) {\r\n        if (CC_WECHATGAME) {\r\n            wxsdk.hideBannerAd()\r\n            wxsdk.loadBannerAd(v => {\r\n                if (v == \"load\")\r\n                    if (bShow) {\r\n                        wxsdk.showBannerAd();\r\n                    }\r\n                    else if (v == 'error') {\r\n                        errcallback && errcallback();\r\n                    }\r\n            })\r\n        } else {\r\n            console.log(\"####reload Banner.....\")\r\n        }\r\n    }\r\n\r\n    static initBannerAd(b = 1) {\r\n        if (b == 0) return;\r\n        if (cc.sys.QQ_PLAY == cc.sys.platform) {\r\n\r\n        } else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            setInterval(_ => {\r\n                if (Platform.bannnerRefreshEnabled && Platform._refreshEnabled) {\r\n                    console.log(\"######加载WX Banner广告\")\r\n                    wxsdk.hideBannerAd()\r\n                    wxsdk.loadBannerAd(v => {\r\n                        if (v == \"load\")\r\n                            wxsdk.showBannerAd();\r\n                    })\r\n                }\r\n            }, 40000)\r\n        }\r\n    }\r\n\r\n    static jumpTo() {\r\n        // var desGameId = 1234; //跳转的gameid，必须为数字\r\n        // var extendInfo = \"\"; //额外参数，必须为字符串\r\n        // BK.QQ.skipGame(desGameId, extendInfo);\r\n    }\r\n\r\n    static showRankDialog() {\r\n        console.log(\"[Platform]#showRankDialog\");\r\n        Toast.make(\"#[Platform]#showRankDialog\")\r\n\r\n        // ViewManager.instance.show(\"Game/RankDialog\")\r\n    }\r\n\r\n    // Andriod 发送游戏快捷方式到桌面\r\n\r\n    static onEnterForeground(obj?) {\r\n        console.log(\"=====================onEnterForeground=====================\")\r\n        if (cc.sys.platform == cc.sys.QQ_PLAY) {\r\n            //onEnterForeground\r\n            // Device.resumeMusic()\r\n            cc.audioEngine.resumeMusic()\r\n        } else {\r\n            // cc.audioEngine.resumeMusic()\r\n        }\r\n        Platform.onEnterForegroundSignal.fire(obj);\r\n        evt.emit(\"onEnterForeground\")\r\n    }\r\n\r\n    static onEnterBackground() {\r\n        // BK.onEnterBackground(enterBackgroundListener);\r\n        // if (cc.sys.platform == cc.sys.QQ_PLAY) {\r\n\r\n        // } else {\r\n        //     cc.audioEngine.pauseMusic()\r\n        // }\r\n        evt.emit(\"onEnterBackground\")\r\n    }\r\n\r\n    static onGameExit() {\r\n        // BK.onGameClose(gameCloseListener);\r\n    }\r\n\r\n    static sendMessageToOpen(cmd, data) {\r\n        if (CC_WECHATGAME) {\r\n            wxsdk.postMessage(cmd, data);\r\n        }\r\n    }\r\n    static showSmallRank(rankName, rankType) {\r\n        wxsdk.postMessage(WxCommands.RankSmall, { rankName, rankType });\r\n    }\r\n\r\n    static showRank(rankName, rankType) {\r\n        wxsdk.postMessage(WxCommands.Rank, { rankName, rankType });\r\n    }\r\n\r\n    static hideRank() {\r\n        wxsdk.postMessage(WxCommands.Hide)\r\n    }\r\n\r\n    static getRankList(callback, target?) {\r\n        console.log(\"[Platform]#获取排行榜数据\");\r\n        if (cc.sys.platform == cc.sys.QQ_PLAY) {\r\n\r\n        } else if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\r\n        }\r\n    }\r\n\r\n    static uploadScore(k: string | number, v?: object) {\r\n        console.log(\"[Platform]#上传分数\");\r\n        if (cc.sys.platform == cc.sys.QQ_PLAY) {\r\n        } else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            // wxsdk.postMessage(WxCommands., score);\r\n            let s = JSON.stringify(v);\r\n            wxsdk.uploadScore(k, s);\r\n        } else {\r\n            // Toast.make(\"#[Platform]#uploadScore\")\r\n        }\r\n    }\r\n\r\n    static uploadScores(kvs: { key: string, value: string }[]) {\r\n        if (cc.sys.platform == cc.sys.QQ_PLAY) {\r\n        } else if (cc.sys.WECHAT_GAME == cc.sys.platform) {\r\n            // wxsdk.postMessage(WxCommands., score);\r\n            return wxsdk.uploadScores(kvs);\r\n        } else {\r\n            return Promise.resolve({})\r\n            // Toast.make(\"#[Platform]#uploadScore\")\r\n        }\r\n    }\r\n\r\n\r\n    private static _launch_options: LaunchOption;\r\n    public static get launch_options(): LaunchOption {\r\n        if (!CC_WECHATGAME) {\r\n            return null;\r\n        }\r\n        if (this._launch_options == null) {\r\n            this._launch_options = wx.getLaunchOptionsSync();\r\n        }\r\n        return this._launch_options;\r\n    }\r\n\r\n    public static matchPath(cfg: string | number) {\r\n        // ald_link_key\r\n        //ald_media_id\r\n        //ald_position_id\r\n        // let t = '?ald_media_id=15641&ald_link_key=8ebc0645ddba0996&ald_position_id=0,?ald_media_id=15641&ald_link_key=8ebc0645ddba0996&ald_position_id=0'\r\n        if (this.launch_options == null) return false;\r\n        let s = cfg + \"\"\r\n        let arr = s.split(/[,\\s]+/)\r\n        return arr.some(a => {\r\n            let kvs = a.split(/[\\?&@\\*]/)\r\n            kvs = kvs.filter(v => v != '')\r\n            //是否解析出来的k和 launch option query 对象key 对应的值相等\r\n            return kvs.every(kv => {\r\n                let [k, v] = kv.split('=')\r\n                let rv = this.launch_options.query[k]\r\n                if (rv == undefined && v == undefined) return false;\r\n                return rv == v;\r\n            })\r\n        })\r\n    }\r\n    static loadSubPackage(name, progress?) {\r\n        if (CC_WECHATGAME) {\r\n            if (window.qq) {\r\n                return new Promise((resolve, reject) => {\r\n                    const loadTask = qq.loadSubpackage({\r\n                        name: name,\r\n                        success: function () {\r\n                            resolve();\r\n                        },\r\n                        fail: function () {\r\n                            reject();\r\n                        }\r\n                    });\r\n                    loadTask.onProgressUpdate(res => {\r\n                        progress &&\r\n                            progress(\r\n                                res.progress,\r\n                                res.totalBytesWritten,\r\n                                res.totalBytesExpectedToWrite\r\n                            );\r\n                        // console.log('下载进度', res.progress)\r\n                        // console.log('已经下载的数据长度', res.totalBytesWritten)\r\n                        // console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite)\r\n                    });\r\n                });\r\n            } else if (window.wx) {\r\n                return new Promise((resolve, reject) => {\r\n                    let id_interval = 0;\r\n                    const loadTask = wx.loadSubpackage({\r\n                        name: name,\r\n                        success: function () {\r\n                            clearInterval(id_interval);\r\n                            resolve()\r\n                        },\r\n                        fail: function (e) {\r\n                            clearInterval(id_interval);\r\n                            reject(e + \":\" + name)\r\n                        }\r\n                    })\r\n                    let c = 0;\r\n                    id_interval = setInterval(v => {\r\n                        c += 5\r\n                        progress && progress(c, c, 100);\r\n                        if (c >= 100) {\r\n                            clearInterval(id_interval);\r\n                        }\r\n                    }, 20)\r\n                    loadTask.onProgressUpdate(res => {\r\n                        if (id_interval != 0) {\r\n                            clearInterval(id_interval)\r\n                            id_interval = 0;\r\n                        }\r\n                        progress && progress(res.progress, res.totalBytesWritten, res.totalBytesExpectedToWrite)\r\n                        // console.log('下载进度', res.progress)\r\n                        // console.log('已经下载的数据长度', res.totalBytesWritten)\r\n                        // console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite)\r\n                    })\r\n                })\r\n            }\r\n        } else {\r\n            return new Promise(resolve => {\r\n                let c = 0;\r\n                let id = setInterval(v => {\r\n                    c += 10\r\n                    progress && progress(c, c, 100);\r\n                    if (c >= 100) {\r\n                        clearInterval(id);\r\n                        resolve()\r\n                    }\r\n                }, 50)\r\n            })\r\n        }\r\n    }\r\n\r\n    static initUpdate() {\r\n        if (CC_WECHATGAME) {\r\n            const updateManager = wx.getUpdateManager()\r\n            updateManager.onCheckForUpdate((res) => {\r\n                // 请求完新版本信息的回调\r\n                console.log(res.hasUpdate)\r\n            })\r\n\r\n            updateManager.onUpdateReady(function () {\r\n                wx.showModal({\r\n                    title: '更新提示',\r\n                    content: '新版本已经准备好，是否重启应用？',\r\n                    success(res) {\r\n                        if (res.confirm) {\r\n                            // 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n                            updateManager.applyUpdate()\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            updateManager.onUpdateFailed(function () {\r\n                // 新版本下载失败\r\n\r\n\r\n            })\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    public static gc() {\r\n        if (CC_WECHATGAME) {\r\n            //trigger gc \r\n            wx.triggerGC()\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n// window[\"watchCallback\"] = () => {\r\n//     Platform.video_callback.fire();\r\n//     console.log(\"观看视频回调\")\r\n// }\r\n\r\n// window[\"fullscreenCallback\"] = () => {\r\n//     cc.audioEngine.setMusicVolume(1)\r\n//     Platform.interstitial_callback.fire();\r\n//     console.log(\"观看视频回调\")\r\n// }\r\n\r\n// window[\"watchCallbackfail\"] = () => {\r\n//     Platform.video_failcallback.fire();\r\n//     console.log(\"观看视频失败回调\")\r\n// }\r\n\r\nwindow[\"pause\"] = () => {\r\n    cc.game.pause();\r\n    console.log(\"游戏暂停\");\r\n}\r\n\r\nwindow[\"resume\"] = () => {\r\n    cc.game.resume();\r\n    console.log(\"游戏继续\");\r\n}\r\n\r\nwindow[\"pausemusic\"] = (params) => {\r\n    cc.audioEngine.setMusicVolume(0);\r\n    // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmclose\");\r\n    console.log(\"游戏音乐暂停\");\r\n}\r\n\r\nwindow[\"resumemusic\"] = (params) => {\r\n    cc.audioEngine.setMusicVolume(1);\r\n    // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\");\r\n    console.log(\"游戏音乐继续\");\r\n}\r\n\r\n\r\n// window[\"BuadSDK\"] = function (event, params) {\r\n//     if (event == \"rewardedVideoAdDidClose\") {\r\n//         cc.audioEngine.setMusicVolume(1)\r\n//         Platform.video_callback.fire();\r\n//         // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\");\r\n\r\n//     } else if (event == \"rewardedVideoAdServerRewardDidFail\") {\r\n//         cc.audioEngine.setMusicVolume(1)\r\n//         Platform.video_failcallback.fire();\r\n//         // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\");\r\n//     }\r\n//     else if (event == \"fullscreenVideoAdDidClose\") {\r\n//         // jsb.reflection.callStaticMethod(\"MoreGameHelper\", \"setbgmresuse\");\r\n//         cc.audioEngine.setMusicVolume(1)\r\n//         Platform.interstitial_callback.fire();\r\n//     }\r\n// }\r\n\r\n// window[\"ISAndroidCallbacks\"] = function (event, params) {\r\n\r\n// }"]}