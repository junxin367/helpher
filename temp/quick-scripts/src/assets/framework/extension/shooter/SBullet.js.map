{"version":3,"sources":["assets\\framework\\extension\\shooter\\SBullet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6CAAwD;AAElD,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAIlD;IAAqC,2BAAU;IAA/C;QAAA,qEA4DC;QAzDG,WAAK,GAAW,CAAC,CAAC;QAGlB,WAAK,GAAgB,EAAE,CAAA;QAGvB,iBAAW,GAAW,GAAG,CAAC;;IAmD9B,CAAC;IAjDG,wBAAM,GAAN;QACI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;YAChB,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,CAAA;IACN,CAAC;IAED,wBAAM,GAAN;QAAA,iBAMC;QALG,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;YACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YACrD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,IAAI,IAAI,KAAI,CAAC,IAAI,EAAnB,CAAmB,CAAC,CAAA;SAC3D;IACL,CAAC;IAED,0BAAQ,GAAR;QAAA,iBAMC;QALG,iBAAM,QAAQ,WAAE,CAAC;QACjB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;YAChB,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;YAChB,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC;QACtC,CAAC,CAAC,CAAA;IACN,CAAC;IAED,kCAAgB,GAAhB,UAAiB,KAAkB,EAAE,IAAI;QAErC,IAAI,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC,qBAAU,CAAC,CAAA;QAC3C,IAAI,MAAM,IAAI,IAAI,EAAE;YAChB,MAAM,GAAG,KAAK,CAAC,oBAAoB,CAAC,qBAAU,CAAC,CAAC;SACnD;QACD,IAAI,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;YAClC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;YAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;SAClC;IACL,CAAC;IAED,6BAAW,GAAX,UAAY,MAAkB,EAAE,QAAqB;IAErD,CAAC;IAED,sBAAI,GAAJ,UAAK,CAAC;QACF,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAA;QAC5B,IAAI,CAAC,GAAG,EAAE,CAAA;IACd,CAAC;IAED,wBAAM,GAAN,UAAO,EAAE;QAAT,iBAIC;QAHG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,CAAC;YAChB,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,KAAI,CAAC,KAAK,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IAxDD;QADC,QAAQ;0CACS;IAGlB;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;0CACC;IAGvB;QADC,QAAQ;gDACiB;IATT,OAAO;QAF3B,OAAO;QACP,IAAI,CAAC,gBAAgB,CAAC;OACF,OAAO,CA4D3B;IAAD,cAAC;CA5DD,AA4DC,CA5DoC,qBAAU,GA4D9C;kBA5DoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["import GameEntity, { EntityState } from \"./SGameEntity\";\r\n\r\nconst { ccclass, property, menu } = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"shooter/Bullet\")\r\nexport default class SBullet extends GameEntity {\r\n\r\n    @property\r\n    speed: number = 5;\r\n\r\n    @property([cc.Sprite])\r\n    tails: cc.Sprite[] = []\r\n\r\n    @property\r\n    def_opacity: number = 155;\r\n\r\n    onDead() {\r\n        this.tails.forEach(v => {\r\n            v.node.runAction(cc.fadeOut(0.2));\r\n        })\r\n    }\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        if (this.tails.length == 0) {\r\n            this.tails = this.getComponentsInChildren(cc.Sprite);\r\n            this.tails = this.tails.filter(v => v.node != this.node)\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        this.tails.forEach(v => {\r\n            v.node.width = 0\r\n            v.node.opacity = this.def_opacity;\r\n        })\r\n    }\r\n\r\n    onCollisionEnter(other: cc.Collider, self) {\r\n\r\n        let entity = other.getComponent(GameEntity)\r\n        if (entity == null) {\r\n            entity = other.getComponentInParent(GameEntity);\r\n        }\r\n        if (entity.isActive && this.isActive) {\r\n            entity.decreaseHp(this.damage);\r\n            this.decreaseHp(entity.damage)\r\n            this.onHitEntity(entity, other)\r\n        }\r\n    }\r\n\r\n    onHitEntity(entity: GameEntity, collider: cc.Collider) {\r\n\r\n    }\r\n\r\n    fire(v) {\r\n        this.moveEngine.velocity = v\r\n        this.run()\r\n    }\r\n\r\n    update(dt) {\r\n        this.tails.forEach(v => {\r\n            v.node.width += this.speed;\r\n        })\r\n    }\r\n}\r\n"]}