{"version":3,"sources":["assets\\framework\\ui\\mvcView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ccUtil from \"../utils/ccUtil\";\r\nimport Switcher from \"./controller/Switcher\";\r\n//电子邮件puhalskijsemen@gmail.com\r\n//源码网站 开vpn全局模式打开 http://web3incubators.com/\r\n//电报https://t.me/gamecode999\r\n//网页客服 http://web3incubators.com/kefu.html\r\nconst { ccclass, property } = cc._decorator;\r\ninterface SubViewBind {\r\n    views: mvcView[];\r\n    exp: Function\r\n}\r\n@ccclass\r\nexport default class mvcView extends cc.Component {\r\n\r\n    static DisableAutoRender = -1\r\n\r\n    @property\r\n    render_interval: number = mvcView.DisableAutoRender;\r\n\r\n    @property\r\n    auto_render_list: boolean = true;\r\n\r\n    labels: (cc.Label | cc.RichText)[] = []\r\n    sprites: cc.Sprite[] = []\r\n    bars: cc.ProgressBar[] = []\r\n    buttons: cc.Button[] = []\r\n    nodes: cc.Node[] = []\r\n    subViews: SubViewBind[] = []\r\n    events: any[] = []\r\n    private switchers: Switcher[] = []\r\n\r\n    layouts = []\r\n\r\n    __data: any;\r\n    __data2: any;\r\n\r\n\r\n    getData<T>(): T {\r\n        return this.__data\r\n    }\r\n\r\n    registerSubViews(viewComp, exp?) {\r\n        try {\r\n            let views = this.getComponentsInChildren(viewComp)\r\n            if (views) {\r\n                views = views.filter(v => v != this);\r\n            }\r\n            this.registerMvcView(views, exp);\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    //注册 子view \r\n    registerMvcView(views, exp) {\r\n        this.subViews.push({ views, exp });\r\n    }\r\n\r\n    register<T>(view_comp: string | Switcher | cc.Button | cc.Label | cc.RichText | cc.Sprite | cc.ProgressBar | cc.ScrollView | cc.Layout | mvcView[], exp: (data: T, data2: any) => any, ext?) {\r\n        if (typeof (view_comp) == \"string\") {\r\n            let node = cc.find(view_comp, this.node)\r\n            if (!node) {\r\n                throw new Error(view_comp + \" not found\")\r\n            }\r\n            let label = node.getComponent(cc.Label);\r\n            if (label) {\r\n                this.registerLabel(label, exp);\r\n            } else {\r\n                let bar = node.getComponent(cc.ProgressBar);\r\n                if (!bar) {\r\n                    let sp = node.getComponent(cc.Sprite);\r\n                    if (sp) {\r\n                        this.registerSprite(sp, exp);\r\n                    } else {\r\n                        console.warn(\"[mvc-View] not found : \" + view_comp)\r\n                    }\r\n                } else {\r\n                    this.registerProgressBar(bar, exp);\r\n                }\r\n            }\r\n        } else {\r\n            if (view_comp instanceof cc.Label || (cc.RichText && view_comp instanceof cc.RichText)) {\r\n                this.registerLabel(view_comp, exp);\r\n            } else if (view_comp instanceof Switcher) {\r\n                this.registerSwitcher(view_comp, exp);\r\n            } else if (view_comp instanceof cc.ProgressBar) {\r\n                this.registerProgressBar(view_comp, exp);\r\n            } else if (view_comp instanceof cc.Sprite) {\r\n                this.registerSprite(view_comp, exp);\r\n            } else if (view_comp instanceof cc.Button) {\r\n                this.onClick(view_comp.node, exp)\r\n            } else if (view_comp instanceof cc.Layout || view_comp instanceof cc.ScrollView) {\r\n                this.registerList(view_comp, exp, ext)\r\n            } else if (Array.isArray(view_comp)) {\r\n                this.registerMvcView(view_comp, exp);\r\n            }\r\n        }\r\n    }\r\n\r\n    registerSwitcher(switcher: Switcher, exp) {\r\n        switcher.node[\"which\"] = exp;\r\n        this.switchers.push(switcher);\r\n        return switcher;\r\n    }\r\n\r\n\r\n    registerList(layout: cc.Layout | cc.ScrollView, exp, callback) {\r\n        if (callback == null) {\r\n            callback = (node: cc.Node, data: any, i) => {\r\n                let subview = node.getComponent(mvcView)\r\n                if (subview)\r\n                    subview.render(data)\r\n            };\r\n        }\r\n        layout.node.attr({ dataBind: exp, setItemCallback: callback })\r\n        this.layouts.push(layout);\r\n    }\r\n\r\n    registerLabel(label: cc.Label | cc.RichText, exp) {\r\n        label.node.attr({ getViewString: exp })\r\n        this.labels.push(label);\r\n    }\r\n\r\n    onClick<T>(btnNode: string | cc.Node, exp: (data: T, data2) => any) {\r\n        if (typeof (btnNode) == \"string\")\r\n            btnNode = cc.find(btnNode, this.node)\r\n        if (btnNode) {\r\n            let btn = ccUtil.newButton(btnNode, \"mvcView\", \"__onButtonClicked\", this.node);\r\n            btnNode.attr({ onClick: exp.bind(this) })\r\n            return btn;\r\n        }\r\n    }\r\n\r\n    private __onButtonClicked(e) {\r\n        e.target.onClick(this.__data, this.__data2);\r\n    }\r\n\r\n    onVisible<T>(view_comp: string | cc.Node, exp: (data: T, data2) => any) {\r\n        if (typeof (view_comp) == \"string\") {\r\n            view_comp = cc.find(view_comp, this.node);\r\n            if (!view_comp) {\r\n                console.warn(\"[mvc-View] not found : \" + view_comp)\r\n                return;\r\n            }\r\n        }\r\n        view_comp.attr({ isVisible: exp })\r\n        this.nodes.push(view_comp);\r\n    }\r\n\r\n    onInteractable<T>(view_comp: string | cc.Node | cc.Button, exp: (data: T, data2) => any) {\r\n        if (typeof (view_comp) == \"string\") {\r\n            view_comp = cc.find(view_comp, this.node);\r\n            if (!view_comp) {\r\n                console.warn(\"[mvc-View] not found : \" + view_comp)\r\n                return;\r\n            }\r\n        }\r\n        if (view_comp instanceof cc.Node) {\r\n            view_comp = view_comp.getComponent(cc.Button);\r\n        }\r\n        view_comp.node.attr({ isInteractable: exp })\r\n        this.buttons.push(view_comp);\r\n    }\r\n\r\n    observe<T>(exp: (data: T, data2) => boolean, callback, policy?) {\r\n        let triggered = false\r\n        let evt = { exp, callback, policy, triggered }\r\n        this.events.push(evt)\r\n    }\r\n\r\n    registerSprite(sp: cc.Sprite, exp) {\r\n        sp.node.attr({ url: exp })\r\n        this.sprites.push(sp);\r\n        return sp;\r\n    }\r\n\r\n    registerProgressBar(bar: cc.ProgressBar, exp) {\r\n        bar.node.attr({ progress: exp })\r\n        this.bars.push(bar);\r\n        return bar;\r\n    }\r\n\r\n    renderLayout(layout, data?, data2?) {\r\n        if (!layout.node.activeInHierarchy) return;\r\n        let list_data = layout.node.dataBind(data, data2);\r\n        let callback = layout.node.setItemCallback;\r\n        layout.showlist(callback, list_data || []);\r\n    }\r\n\r\n    renderList(data?, data2?) {\r\n        this.layouts.forEach(layout => {\r\n            this.renderLayout(layout, data, data2);\r\n        })\r\n    }\r\n\r\n    disableAutoRender() {\r\n        this.render_interval = mvcView.DisableAutoRender\r\n    }\r\n\r\n    onLaterRender() {\r\n\r\n    }\r\n\r\n    private _updateView(data?, data2?) {\r\n\r\n        if (this.node.active == false) return;\r\n\r\n        if (this.auto_render_list) {\r\n            this.renderList(data, data2);\r\n        }\r\n\r\n        this.nodes.forEach(node => {\r\n            let bVisible = node['isVisible'](data, data2);\r\n            node.active = bVisible;\r\n        })\r\n        this.labels.forEach(label => {\r\n            if (!label.node.active) return;\r\n            let str = label.node[\"getViewString\"](data, data2);\r\n            if (str == null) console.warn(\"[mvc_View] failed to render label:\" + label.node.name, label.node['getViewString'])\r\n            label.string = str || \"0\";\r\n        })\r\n        this.sprites.forEach(sp => {\r\n            if (!sp.node.activeInHierarchy) return;\r\n            let url = sp.node['url'](data, data2);\r\n            if (!url) {\r\n                sp.spriteFrame = null;\r\n                return;\r\n            }\r\n            ccUtil.setDisplay(sp, url);\r\n        })\r\n\r\n\r\n        this.events.forEach(evt => {\r\n            if (!evt.triggered && evt.exp(data, data2)) {\r\n                evt.callback && evt.callback.call(this)\r\n                if (evt.policy) {\r\n                }\r\n                evt.triggered = true\r\n            }\r\n        })\r\n        // reset event trigger \r\n        this.events.forEach(evt => {\r\n            if (evt.triggered && !evt.exp(data, data2)) {\r\n                evt.triggered = false;\r\n            }\r\n        })\r\n\r\n        this.subViews.forEach(viewd => {\r\n            let res\r\n            if (viewd.exp) {\r\n                res = viewd.exp(data, data2);\r\n            }\r\n            viewd.views.forEach((v, i) => v.render(res && res[i], data))\r\n        })\r\n\r\n        this.buttons.forEach(btn => {\r\n            if (!btn.node.activeInHierarchy) return;\r\n            let bInteractable = btn.node['isInteractable'](data, data2);\r\n            btn.interactable = bInteractable;\r\n            btn.node.opacity = bInteractable && 255 || 120;\r\n        })\r\n\r\n        this.switchers.forEach(v => {\r\n            if (!v.node.activeInHierarchy) return;\r\n            let exp = v.node[\"which\"]\r\n            let res = exp(data, data2);\r\n            v.index = res;\r\n        })\r\n\r\n\r\n        // this.bars.forEach(bar=>{\r\n        //     let progress = bar.node.progress(data);\r\n        //     bar.progress = progress;\r\n        // })\r\n        this._renderBars(data, data2);\r\n        this.onLaterRender();\r\n\r\n    }\r\n\r\n    _renderBars(data?, data2?) {\r\n        this.bars.forEach(bar => {\r\n            let progress = bar.node['progress'](data, data2);\r\n            bar.progress = progress;\r\n        })\r\n    }\r\n\r\n    update(dt) {\r\n        // this._renderBars();\r\n    }\r\n\r\n    render(d?, d2?) {\r\n        this.__data = d || this.__data;\r\n        this.__data2 = d2 || this.__data2;\r\n        this._updateView(this.__data, this.__data2);\r\n    }\r\n\r\n    renderLabel(label: cc.Label) {\r\n        let str = label.node['getViewString']()\r\n        label.string = str;\r\n    }\r\n\r\n    onEnable() {\r\n        if (this.render_interval != -1)\r\n            this.schedule(this.render, this.render_interval)\r\n    }\r\n\r\n    onDisable() {\r\n        this.unschedule(this.render);\r\n        this.__data = null;\r\n    }\r\n\r\n}"]}