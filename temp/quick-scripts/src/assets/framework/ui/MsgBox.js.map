{"version":3,"sources":["assets\\framework\\ui\\MsgBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import View from \"./View\";\r\nimport ccUtil from \"../utils/ccUtil\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property, requireComponent, playOnFocus } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MsgBox extends cc.Component {\r\n\r\n    static OK: number = 1;\r\n    static CANCEL: number = 0;\r\n\r\n\r\n    @property(cc.Node)\r\n    btn_ok: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_cancel: cc.Node = null;\r\n\r\n\r\n    defaultStrings: { [index: string]: string } = {};\r\n\r\n    text: string[] = []\r\n\r\n    messageBoxCallback: Function = null;\r\n\r\n    label_ok: cc.Label = null;\r\n    label_cancel: cc.Label = null;\r\n\r\n    bgAnimation: cc.Animation;\r\n    onLoad() {\r\n        // this.getComponent(View).setDelegate(this);\r\n        ccUtil.newButton(this.btn_ok, \"MsgBox\", \"on_btn_ok_clicked\", this.node);\r\n        ccUtil.newButton(this.btn_cancel, \"MsgBox\", \"on_btn_cancel_clicked\", this.node);\r\n    }\r\n\r\n    onHidden() {\r\n    }\r\n\r\n    onShown(params) {\r\n        this.messageBoxCallback = params.callback;\r\n        Object.keys(params.text).forEach(k => {\r\n            let label = ccUtil.find(k, this.node, cc.Label)\r\n            let basestr = this.defaultStrings[k]\r\n            if (basestr == null) {\r\n                basestr = label.string;\r\n                this.defaultStrings[k] = basestr\r\n            }\r\n            if (label) {\r\n                label.string = cc.js.formatStr(basestr, ...params.text[k])\r\n            } else {\r\n                console.warn(\"label not found\", k)\r\n            }\r\n        })\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    on_btn_ok_clicked() {\r\n        if (this.messageBoxCallback)\r\n            this.messageBoxCallback.call(null, MsgBox.OK)\r\n        this.getComponent(View).hide();\r\n    }\r\n\r\n    on_btn_cancel_clicked() {\r\n        if (this.messageBoxCallback)\r\n            this.messageBoxCallback.call(null, MsgBox.CANCEL)\r\n        this.getComponent(View).hide();\r\n    }\r\n\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}